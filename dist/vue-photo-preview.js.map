{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///vue-photo-preview.js","webpack:///webpack/bootstrap 67c0936c6225e9526aca","webpack:///./node_modules/.registry.npmjs.org/babel-runtime/6.26.0/node_modules/babel-runtime/regenerator/index.js","webpack:///src/lib/preview.vue","webpack:///./src/lib/index.js","webpack:///./node_modules/.registry.npmjs.org/regenerator-runtime/0.11.1/node_modules/regenerator-runtime/runtime-module.js","webpack:///./node_modules/.registry.npmjs.org/regenerator-runtime/0.11.1/node_modules/regenerator-runtime/runtime.js","webpack:///./src/lib/preview.vue","webpack:///./node_modules/.registry.npmjs.org/vue-loader/13.7.3/node_modules/vue-loader/lib/component-normalizer.js","webpack:///./src/lib/preview.vue?0884","webpack:///./src/lib/photoswipe.js","webpack:///./src/lib/photoswipe-ui-default.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__photoswipe_css__","__WEBPACK_IMPORTED_MODULE_1__default_skin_default_skin_css__","_asyncToGenerator","fn","gen","apply","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","__WEBPACK_IMPORTED_MODULE_1__preview_vue__","__WEBPACK_IMPORTED_MODULE_2__photoswipe__","__WEBPACK_IMPORTED_MODULE_3__photoswipe_ui_default__","__WEBPACK_IMPORTED_MODULE_3__photoswipe_ui_default___default","$preview","vuePhotoPreview","install","Vue","opts","Preview","extend","previewComponent","el","document","createElement","body","appendChild","$el","eventName","eventCallback","on","callback","mixin","data","galleryElements","galleryPicLoading","methods","$previewRefresh","_this","setTimeout","querySelectorAll","length","setAttribute","onclick","onThumbnailsClick","e","window","event","preventDefault","returnValue","thumbElements","eTarget","target","srcElement","group","getAttribute","index","clickedGallery","openPhotoSwipe","$emit","src","galleryElement","disableAnimation","fromURL","_this2","a","mark","_callee2","pswpElement","gallery","options","items","j","realViewportWidth","useLargeImages","firstResize","imageSrcWillChange","loadingTag","wrap","_context2","prev","next","parseThumbnailElements","sent","getThumbBoundsFn","thumbnail","pageYScroll","pageYOffset","documentElement","scrollTop","rect","getBoundingClientRect","x","left","y","top","w","width","addCaptionHTMLFn","item","captionEl","isFake","title","children","innerHTML","innerText","showHideOpacity","history","shareEl","maxSpreadZoom","getDoubleTapZoom","isMouseClick","initialZoomLevel","galleryPIDs","pid","abrupt","parseInt","isNaN","showAnimationDuration","PhotoSwipe","PhotoSwipeUI_Default","listen","dpiRatio","devicePixelRatio","Math","min","viewportSize","likelyTouchDevice","screen","invalidateCurrItems","_ref","_callee","currIndex","_context","Image","onload","h","height","stop","_x","_x2","ITEM","init","classList","Array","count","nodeType","naturalWidth","rw","rh","naturalHeight","text","author","o1","o2","prop","initPreview","gallerySelector","mounted","g","Function","hadRuntime","regeneratorRuntime","getOwnPropertyNames","indexOf","oldRuntime","undefined","global","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","obj","type","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","forEach","method","AsyncIterator","invoke","record","result","hasOwn","__await","unwrapped","enqueue","callInvokeWithMethodAndArg","previousPromise","state","GenStateSuspendedStart","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","_sent","dispatchException","GenStateSuspendedYield","iterator","return","TypeError","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","values","iterable","iteratorMethod","iteratorSymbol","Op","$Symbol","Symbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","inModule","runtime","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","constructor","displayName","isGeneratorFunction","genFun","ctor","setPrototypeOf","__proto__","awrap","async","iter","toString","keys","reverse","pop","skipTempReset","charAt","slice","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_registry_npmjs_org_vue_loader_13_7_3_node_modules_vue_loader_lib_selector_type_script_index_0_preview_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_registry_npmjs_org_vue_loader_13_7_3_node_modules_vue_loader_lib_template_compiler_index_id_data_v_321b1d0a_hasScoped_false_buble_transforms_node_modules_registry_npmjs_org_vue_loader_13_7_3_node_modules_vue_loader_lib_selector_type_template_index_0_preview_vue__","normalizeComponent","Component","rawScriptExports","compiledTemplate","functionalTemplate","injectStyles","scopeId","moduleIdentifier","esModule","scriptExports","default","render","staticRenderFns","_compiled","functional","_scopeId","hook","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","existing","beforeCreate","_injectStyles","concat","_vm","_h","$createElement","_self","_c","_m","staticClass","attrs","tabindex","role","aria-hidden","_v","esExports","_typeof","template","UiClass","framework","features","bind","listener","unbind","methodName","split","isArray","createEl","classes","tag","className","getScrollY","yOffset","removeClass","reg","RegExp","replace","addClass","hasClass","test","getChildByClass","parentEl","childClassName","node","firstChild","nextSibling","arraySearch","array","preventOverwrite","easing","sine","out","k","sin","PI","inOut","cos","cubic","detectFeatures","helperEl","helperStyle","style","vendor","oldIE","all","addEventListener","touch","requestAnimationFrame","raf","caf","cancelAnimationFrame","pointerEvent","PointerEvent","navigator","msPointerEnabled","ua","userAgent","platform","v","appVersion","match","isOldIOSPhone","androidversion","parseFloat","isOldAndroid","androidVersion","isMobileOpera","styleCheckItem","styleName","styleChecks","vendors","toUpperCase","toLowerCase","lastTime","currTime","Date","getTime","timeToCall","max","id","clearTimeout","svg","createElementNS","createSVGRect","evName","_handleEv","handleEvent","_options","allowPanToNext","spacing","bgOpacity","mouseUsed","loop","pinchToClose","closeOnScroll","closeOnVerticalDrag","verticalDragRange","hideAnimationDuration","focus","escKey","arrowKeys","mainScrollEndFriction","panEndFriction","isClickableElement","tagName","modal","scaleMode","_isOpen","_isDestroying","_closedByScroll","_currentItemIndex","_containerStyle","_containerShiftIndex","_upMoveEvents","_downEvents","_globalEventHandlers","_currZoomLevel","_startZoomLevel","_translatePrefix","_translateSufix","_updateSizeInterval","_itemsNeedUpdate","_itemHolders","_prevItemIndex","_dragStartEvent","_dragMoveEvent","_dragEndEvent","_dragCancelEvent","_transformKey","_pointerEventEnabled","_likelyTouchDevice","_requestAF","_cancelAF","_initalClassName","_initalWindowScrollY","_oldIE","_currentWindowScrollY","_features","_orientationChangeTimeout","_gestureStartTime","_gestureCheckSpeedTime","_releaseAnimData","_isZoomingIn","_verticalDragInitiated","_oldAndroidTouchEndTimeout","_isDragging","_isMultitouch","_zoomStarted","_moved","_dragAnimFrame","_mainScrollShifted","_currentPoints","_isZooming","_currPointsDistance","_startPointsDistance","_currPanBounds","_currZoomElementStyle","_mainScrollAnimating","_direction","_isFirstMove","_opacityChanged","_bgOpacity","_wasOverInitialZoom","_tempCounter","_getEmptyPoint","_currPanDist","_startPanOffset","_panOffset","_viewportSize","_currPositionIndex","_offset","_slideSize","_indexDiff","_isFixedPosition","_modules","_windowVisibleSize","_renderMaxResolution","_registerModule","publicMethods","_getLoopedId","numSlides","_getNumItems","_listeners","_listen","_shout","listeners","args","shift","_shoutAsync","_p","_args","_getCurrentTime","_applyBgOpacity","opacity","bg","_applyZoomTransform","styleObj","zoom","currItem","fitRatio","_applyCurrentZoomPan","allowRenderResolution","_setImageSize","_applyZoomPanToItem","container","initialPosition","_setTranslateX","elStyle","_moveMainScroll","dragging","newSlideIndexOffset","delta","round","_mainScrollPos","_calculatePanOffset","axis","zoomLevel","_midZoomPoint","_equalizePoints","p1","p2","_roundPoint","_mouseMoveTimeout","_onFirstMouseMove","_bindEvents","transform","scrollWrap","_unbindEvents","scroll","_calculatePanBounds","update","bounds","_calculateItemSize","_getMinZoomLevel","_getMaxZoomLevel","_modifyDestPanOffset","destPanBounds","destPanOffset","destZoomLevel","_setupTransforms","allow3dTransform","perspective","zoomRatio","_onKeyDown","keydownAction","keyCode","ctrlKey","altKey","shiftKey","metaKey","_onGlobalClick","stopPropagation","_updatePageScrollOffset","setScrollOffset","_animations","_numAnimations","_stopAnimation","_registerStartAnimation","_stopAllAnimations","_animateProp","b","endProp","easingFn","onUpdate","onComplete","t","startAnimTime","animloop","_animatePropAsync","_ref2","_callee3","_context3","_ref3","_x3","_x4","_x5","_x6","_x7","_x8","shout","isMainScrollAnimating","getZoomLevel","getCurrentIndex","isDragging","isZooming","applyZoomPan","panX","panY","itemHolders","display","resize","updateSize","orientationchange","clientWidth","keydown","click","oldPhone","animationName","ui","_getItemAt","position","rootClasses","mainClass","_callee4","_context4","setContentAsync","setContent","updateCurrItem","setInterval","close","_showOrHide","destroy","_showOrHideTimeout","clearInterval","_stopDragUpdateLoop","panTo","force","goTo","diff","updateCurrZoomItem","emulateSetContent","zoomElement","center","needsUpdate","beforeAnimation","tempHolder","diffAbs","abs","NUM_HOLDERS","unshift","prevItem","updateCurrItemAsync","_x9","_ref5","_callee5","_context5","windowScrollY","innerWidth","innerHeight","clientHeight","holder","hIndex","cleanSlide","zoomTo","centerPoint","speed","updateFn","initialPanOffset","now","_currPoint","_startPoint","_currPointers","_startMainScrollPos","_posPoints","_tempPoint","_currZoomedItemIndex","_centerPoint","_lastReleaseTime","_currCenterPoint","_isEqualPoints","_isNearbyPoints","touch0","touch1","_calculatePointsDistance","sqrt","_dragUpdateLoop","_renderMovement","_canPan","_closestElement","parentNode","_preventObj","_preventDefaultEventBehaviour","isDown","prevent","_convertTouchToPoint","pageX","pageY","identifier","_findCenterOfPoints","pCenter","_pushPosPoint","time","_calculateVerticalDragOpacityRatio","_ePoint1","_ePoint2","_tempPointsArr","_getTouchPoints","touches","_panOrMoveMainScroll","panFriction","startOverDiff","newPanPos","newMainScrollPos","newOffset","dir","newMainScrollPosition","mainScrollDiff","_onDragStart","button","_initialZoomRunning","pointerIndex","pointerId","startPointsList","numPoints","_onDragMove","touchesList","pointsDistance","_calculateZoomLevel","zoomFriction","minZoomLevel","maxZoomLevel","minusDiff","percent","opacityRatio","mainScrollChanged","_onDragRelease","_ref6","_callee6","releasePoint","MSPOINTER_TYPES","touchList","gestureType","releaseTimeDiff","initalPanY","initialBgOpacity","itemChanged","_context6","splice","4","2","3","pointerType","changedTouches","_initDragReleaseAnimationData","calculateSwipeSpeed","_finishSwipeMainScrollGesture","_completeZoomGesture","_completePanGesture","_x10","lastFlickDuration","tempReleasePos","lastFlickOffset","lastFlickDist","lastFlickSpeed","slowDownRatio","slowDownRatioReverse","speedDecelerationRatio","speedDecelerationRatioAbs","distanceOffset","backAnimDestination","backAnimStarted","calculateOverBoundsAnimOffset","pos","calculateAnimOffset","timeDiff","panAnimLoop","zoomPan","lastNow","animData","_ref7","_callee8","itemsDiff","totalShiftDist","isFastLastFlick","nextCircle","animateToX","animateToDist","finishAnimDuration","_context8","_callee7","_context7","_x11","_x12","touchesDistance","initialOpacity","initGestures","addEventNames","pref","down","move","up","cancel","maxTouchPoints","msMaxTouchPoints","mousedown","mousemove","mouseup","_items","_initialContentSet","_initialIsLoop","img","completeFn","thumbBounds","initialLayout","duration","removeAttribute","closeWithRaf","fadeEverything","loadError","miniImg","webkitBackfaceVisibility","initalBgOpacity","_tempPanAreaSize","_imagesToAppendPool","_controllerDefaultOptions","errorMsg","forceProgressiveLoading","preload","getNumItemsFn","_getZeroBounds","_calculateSingleItemPanBounds","realPanElementW","realPanElementH","vGap","isInitial","bottom","hRatio","vRatio","_appendImage","baseDiv","preventAnimation","keepPlaceholder","imageAppended","loaded","placeholder","_preloadImage","loading","loadComplete","onerror","_checkForError","cleanUp","maxRes","lastChild","_appendImagesPool","poolItem","clearPlaceholder","lazyLoadItem","initController","getItemAt","isNext","preloadBefore","preloadAfter","preloader","allowProgressiveImg","html","placeholderClassName","msrc","_x13","_x14","_ref9","_callee9","_context9","tapTimer","tapReleasePoint","_dispatchTapEvent","origEvent","createEvent","eDetail","initCustomEvent","dispatchEvent","initTap","onTapStart","onTapRelease","p0","_wheelDelta","initDesktopZoom","setupDesktopZoom","onInit","events","handleMouseWheel","mouseZoomedIn","hasDraggingClass","updateZoomable","removeDraggingClass","deltaY","deltaMode","deltaX","wheelDeltaX","wheelDeltaY","wheelDelta","detail","newPanX","newPanY","toggleDesktopZoom","doubleTapZoomLevel","zoomOut","_historyUpdateTimeout","_hashChangeTimeout","_hashAnimCheckTimeout","_hashChangedByScript","_hashChangedByHistory","_hashReseted","_initialHash","_historyChanged","_closedFromURL","_urlChangedOnce","_windowLoc","_supportsPushState","_historyDefaultOptions","galleryUID","_getHash","hash","substring","_cleanHistoryTimeouts","_parseItemIndexFromURL","params","vars","pair","searchfor","_updateHash","newHash","newURL","href","location","initHistory","updateURL","onHashChange","returnToOriginal","back","pushState","pathname","search","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","pswp","_fullscrenAPI","_controls","_captionContainer","_fakeCaptionContainer","_indexIndicator","_shareButton","_shareModal","_initalCloseOnScrollValue","_isIdle","_loadingIndicator","_loadingIndicatorHidden","_loadingIndicatorTimeout","_galleryHasOneSlide","_blockControlsTap","_blockControlsTapTimeout","_idleInterval","_idleTimer","_overlayUIUpdated","_controlsVisible","_shareModalHidden","_defaultUIOptions","barsSize","closeElClasses","timeToIdle","timeToIdleOutside","loadingIndicatorDelay","closeEl","fullscreenEl","zoomEl","counterEl","arrowEl","preloaderEl","tapToClose","tapToToggleControls","clickToCloseNonZoomable","shareButtons","label","url","download","getImageURLForShare","getPageURLForShare","getTextForShare","indexIndicatorSep","fitControlsWidth","_onControlsTap","_onIdleMouseMove","uiElement","found","clickedClass","_uiElements","onTap","tapDelay","_fitControlsInViewport","_togglePswpClass","cName","_countNumItems","hasOneSlide","_toggleShareModalClass","_toggleShareModal","_updateShareURLs","_openWindowPopup","hasAttribute","open","shareButtonData","shareURL","image_url","page_url","share_text","shareButtonOut","encodeURIComponent","parseShareButtonOut","_hasCloseClass","_idleIncrement","setIdle","_onMouseLeaveWindow","from","relatedTarget","toElement","nodeName","_setupFullscreenAPI","getFullscreenAPI","eventK","updateFullscreen","_setupLoadingIndicator","_toggleLoadingIndicator","hide","_applyNavBarGaps","gap","bars","insertBefore","captionSize","_setupIdle","_setupHidingControlsDuringGestures","hideControls","showControls","pinchControlsHidden","option","isFullscreen","exit","enter","_setupUIElements","classAttr","loopThroughChildElements","sChildren","topBar","point","preventObj","onGlobalTap","onMouseOver","removeChild","isIdle","updateIndexIndicator","supportsFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","api","dE","tF","requestFullscreen","enterK","exitK","elementK","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,IACA,kBAAAG,gBAAAC,IACAD,OAAA,uBAAAH,GACA,gBAAAC,SACAA,QAAA,qBAAAD,IAEAD,EAAA,qBAAAC,KACC,mBAAAK,WAAAC,KAAA,WACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAR,OAGA,IAAAC,GAAAQ,EAAAD,IACAE,EAAAF,EACAG,GAAA,EACAX,WAUA,OANAM,GAAAE,GAAAI,KAAAX,EAAAD,QAAAC,IAAAD,QAAAO,GAGAN,EAAAU,GAAA,EAGAV,EAAAD,QAvBA,GAAAS,KA4DA,OAhCAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,SAAAf,EAAAgB,EAAAC,GACAV,EAAAW,EAAAlB,EAAAgB,IACAG,OAAAC,eAAApB,EAAAgB,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAV,EAAAiB,EAAA,SAAAvB,GACA,GAAAgB,GAAAhB,KAAAwB,WACA,WAA2B,MAAAxB,GAAA,SAC3B,WAAiC,MAAAA,GAEjC,OADAM,GAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAQ,EAAAC,GAAsD,MAAAR,QAAAS,UAAAC,eAAAjB,KAAAc,EAAAC,IAGtDpB,EAAAuB,EAAA,SAGAvB,IAAAwB,EAAA,KDgBM,SAAU9B,EAAQD,EAASO,GE7EjCN,EAAAD,QAAiBO,EAAQ,IFoFnB,SAAUN,EAAQ+B,EAAqBzB,GAE7C,YACqB,IAAI0B,GAAgD1B,EAAoB,GAEpE2B,GADwD3B,EAAoBiB,EAAES,GACf1B,EAAoB,GACZA,GAAoBiB,EAAEU,EGpBtHF,GAAA,MH+FM,SAAU/B,EAAQ+B,EAAqBzB,GAE7C,YAUA,SAAS4B,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAMjC,KAAMkC,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAUE,EAAQD,EAAKC,MAAS,MAAOC,GAAwB,WAAfN,GAAOM,GAAkB,IAAIF,EAAKG,KAAiC,MAAOT,SAAQC,QAAQM,GAAOG,KAAK,SAAUH,GAASJ,EAAK,OAAQI,IAAW,SAAUI,GAAOR,EAAK,QAASQ,IAAtIV,GAAQM,GAA4I,MAAOJ,GAAK,WATzbxB,OAAOC,eAAeY,EAAqB,cAAgBe,OAAO,GAC7C,IAAIK,GAA0D7C,EAAoB,GAC9E8C,EAAkE9C,EAAoBiB,EAAE4B,GACxFE,EAA6C/C,EAAoB,GACjEgD,EAA4ChD,EAAoB,IAChEiD,EAAuDjD,EAAoB,IAC3EkD,EAA+DlD,EAAoBiB,EAAEgC,GI1K1GE,SACAC,GACFC,QADoB,SACZC,EAAKC,GACX,GAAMC,GAAUF,EAAIG,OAAOC,KACvBH,EAAOA,KACNJ,KACHA,EAAW,GAAIK,IAASG,GAAIC,SAASC,cAAc,SACnDD,SAASE,KAAKC,YAAYZ,EAASa,KAErC,IAAIC,UAAWC,QACfZ,GAAIjC,UAAU8B,UACZtD,KAAM,KACNsE,GAAI,SAAC1D,EAAM2D,GACTH,EAAYxD,EACZyD,EAAgBE,IAGpBd,EAAIe,OACFC,KADQ,WAEN,OACEC,gBAAiB,KACjBC,mBAAmB,IAGvBC,SACEC,gBADO,WACW,GAAAC,GAAA7E,IAChB8E,YAAW,WACTD,EAAKJ,gBAAkBX,SAASiB,iBAAiB,eACjD,KAAK,GAAI1E,GAAI,EAAGC,EAAIuE,EAAKJ,gBAAgBO,OAAQ3E,EAAIC,EAAGD,IACtDwE,EAAKJ,gBAAgBpE,GAAG4E,aAAa,gBAAiB5E,EAAI,GAC1DwE,EAAKJ,gBAAgBpE,GAAG6E,QAAUL,EAAKM,mBAExC,MAGLA,kBAXO,SAWWC,GAChB,GAAIpF,KAAK0E,kBAAmB,OAAO,CACnC1E,MAAK0E,mBAAoB,EACzBU,EAAIA,GAAKC,OAAOC,MAChBF,EAAEG,eAAiBH,EAAEG,iBAAmBH,EAAEI,aAAc,CAExD,IAGIC,GAHAC,EAAUN,EAAEO,QAAUP,EAAEQ,WAIxBC,EAAQH,EAAQI,aAAa,UAE/BL,GADEI,EACc/B,SAASiB,iBAAiB,gBAAkBc,EAAQ,MAEpD/B,SAASiB,iBAAiB,eAM5C,KAAK,GAFDgB,GAFAC,EAAiBP,EAIZpF,EAAI,EAAGA,EAAI2F,EAAehB,OAAQ3E,IACzC,GAAI2F,EAAe3F,KAAOqF,EAAS,CACjCK,EAAQ1F,CACR,OAOJ,MAJI0F,IAAS,IACX/F,KAAKiG,eAAeF,EAAOC,GAC3BhG,KAAKkG,MAAM,eAAgBd,EAAGM,EAAQS,OAEjC,GAEHF,eA3CC,SA2CcF,EAAOK,EAAgBC,EAAkBC,GAAS,GAAAC,GAAAvG,IAAA,OAAA8B,GAAAkB,EAAAwD,EAAAC,KAAA,QAAAC,KAAA,GAAAC,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,CAAA,OAAApE,GAAAwD,EAAAa,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,aACjEb,GAAc7C,SAASiB,iBAAiB,SAAS,GADgBuC,EAAAE,KAAA,EAInDjB,EAAKkB,uBAAuBrB,EAJuB,WAIjEU,EAJiEQ,EAAAI,KAKrEb,GAIEc,iBAAkB,SAAU5B,GAE1B,GAAI6B,GAAYd,EAAMf,GAAOlC,GAC3BgE,EAAcxC,OAAOyC,aAAehE,SAASiE,gBAAgBC,UAC7DC,EAAOL,EAAUM,uBACnB,QACEC,EAAGF,EAAKG,KACRC,EAAGJ,EAAKK,IAAMT,EACdU,EAAGN,EAAKO,QAKZC,iBAAkB,SAAUC,EAAMC,EAAWC,GAC3C,MAAKF,GAAKG,OAIVF,EAAUG,SAAS,GAAGC,UAAYL,EAAKG,OAChC,IAJLF,EAAUG,SAAS,GAAGE,UAAY,IAC3B,IAKXC,iBAAiB,EACjBC,SAAS,EACTC,SAAS,EACTC,cAAe,EACfC,iBAAkB,SAAUC,EAAcZ,GACxC,MAAIY,GAEK,IAGAZ,EAAKa,iBAAmB,GAAM,EAAI,OAM3CjD,EA9CiE,CAAAgB,EAAAE,KAAA,aA+C/DX,EAAQ2C,YA/CuD,CAAAlC,EAAAE,KAAA,SAkDxDT,EAAI,CAlDoD,aAkDjDA,EAAID,EAAM9B,QAlDuC,CAAAsC,EAAAE,KAAA,YAmD3DV,EAAMC,GAAG0C,KAAO1D,EAnD2C,CAAAuB,EAAAE,KAAA,eAoD7DX,GAAQd,MAAQgB,EApD6CO,EAAAoC,OAAA,oBAkD/B3C,IAlD+BO,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,iBAyDjEX,EAAQd,MAAQ4D,SAAS5D,EAAO,IAAM,CAzD2B,SAAAuB,EAAAE,KAAA,iBA4DnEX,EAAQd,MAAQ4D,SAAS5D,EAAO,GA5DmC,aAgEjE6D,MAAM/C,EAAQd,OAhEmD,CAAAuB,EAAAE,KAAA,eAAAF,GAAAoC,OAAA,kBAmErE7C,EAAUN,EAAK5C,OAAOkD,EAASpD,GAE3B4C,IACFQ,EAAQgD,sBAAwB,GAIlCjD,EAAU,GAAIkD,KAAWnD,EAAaoD,IAAsBjD,EAAOD,GACnErD,EAAIjC,UAAU8B,SAAStD,KAAO6G,EAG5BK,GAAiB,EACjBC,GAAc,EAGhBN,EAAQoD,OAAO,eAAgB,WAE7B,GAAIC,GAAW5E,OAAO6E,iBAAmB7E,OAAO6E,iBAAmB,CACnED,GAAWE,KAAKC,IAAIH,EAAU,KAC9BjD,EAAoBJ,EAAQyD,aAAalC,EAAI8B,EAEzCjD,GAAqB,OAAUJ,EAAQ0D,mBAAqBtD,EAAoB,KAAQuD,OAAO/B,MAAQ,KACpGvB,IACHA,GAAiB,EACjBE,GAAqB,GAInBF,IACFA,GAAiB,EACjBE,GAAqB,GAIrBA,IAAuBD,GACzBN,EAAQ4D,sBAGNtD,IACFA,GAAc,GAGhBC,GAAqB,IAGnBC,KACJR,EAAQoD,OAAO,cAAf,cAAAS,GAAA3I,EAAAkB,EAAAwD,EAAAC,KAA8B,QAAAiE,GAAO3E,EAAO2C,GAAd,GAAAiC,GAAA7D,EAAAxG,CAAA,OAAA0C,GAAAwD,EAAAa,KAAA,SAAAuD,GAAA,cAAAA,EAAArD,KAAAqD,EAAApD,MAAA,WAExBJ,EAAWrB,GAFa,CAAA6E,EAAApD,KAAA,cAAAoD,GAAApD,KAAA,EAIpBJ,EAAWrB,EAJS,cAK1BqB,GAAWrB,GAAS,KALM6E,EAAAlB,OAAA,oBASxBiB,EAAY5E,EACde,EAAQF,EAAQE,MACD,aAAb4B,EAAK7H,EAAE0H,EAXiB,CAAAqC,EAAApD,KAAA,eAYtBlH,GAAI,GAAIuK,OAEZzD,EAAWrB,GAAS,GAAI5D,SAAQ,SAACC,GAC/B9B,EAAE6F,IAAMuC,EAAKvC,IACb7F,EAAEwK,OAAS,WAGTpC,EAAK7H,EAAE0H,EAAIG,EAAKlI,EAAE+H,EAAIjI,EAAEkI,MAExBE,EAAK7H,EAAEkK,EAAIrC,EAAKlI,EAAEuK,EAAIzK,EAAE0K,OACxB5I,OAtBsBwI,EAAApD,KAAA,GAyBpBJ,EAAWrB,EAzBS,SA0BtB2C,EAAK7E,GAAGiC,aAAa,UACvB4C,EAAKvC,IAAMuC,EAAK7H,EAAEsF,IAClBuC,EAAKH,EAAIG,EAAK7H,EAAE0H,EAChBG,EAAKqC,EAAIrC,EAAK7H,EAAEkK,IAEhBrC,EAAKvC,IAAMuC,EAAKlI,EAAE2F,IAClBuC,EAAKH,EAAIG,EAAKlI,EAAE+H,EAChBG,EAAKqC,EAAIrC,EAAKlI,EAAEuK,GAKlB3D,EAAWrB,GAAS,IAtCM,yBAAA6E,GAAAK,SAAAP,EAAAnE,KAA9B,iBAAA2E,EAAAC,GAAA,MAAAV,GAAAxI,MAAAjC,KAAAkC,gBAyCA0E,EAAQoD,OAAO,oBAAqB,SAACjE,EAAOqF,GAC1C7E,EAAK7B,mBAAoB,IAE3BkC,EAAQoD,OAAO7F,EAAWC,GAC1BwC,EAAQyE,OACRhI,EAASa,IAAIoH,UAAYjI,EAASa,IAAIoH,UAAY,qBA/JmB,yBAAAhE,GAAA2D,SAAAvE,EAAAH,SAiKvEkB,uBA5MO,SA4MgBhC,GACrB,MAAO,IAAItD,SAAQ,SAAAC,GACjB,GACEyB,GAEA6E,EAHE5B,EAAQ,GAAIyE,OAAM9F,EAAcT,OAIpC0D,KAEA,KAAK,GADD8C,GAAQ,EACHnL,EAAI,EAAGA,EAAIoF,EAAcT,OAAQ3E,IAAK,CAC7CwD,EAAK4B,EAAcpF,GAGC,IAAhBwD,EAAG4H,UAOP,SAAkB1F,GAChB,OAA8B,KAAnBlC,EAAG6H,aAA6B,CACzC,GAAIrL,GAAI,GAAIwK,MACZxK,GAAE8F,IAAMtC,EAAGsC,GACX,IAAIwF,GAAKtL,EAAEmI,MACPoD,EAAKvL,EAAE2K,WAGX,IAAIW,GAAK9H,EAAG6H,aACRE,EAAK/H,EAAGgI,aAEd,IAAIvL,KACJA,GAAE6F,IAAMtC,EAAGiC,aAAa,SAAWjC,EAAGiC,aAAa,SAAWjC,EAAGiC,aAAa,OAC9ExF,EAAEwL,KAAOjI,EAAGiC,aAAa,gBACzBxF,EAAEyL,OAASlI,EAAGiC,aAAa,eAE3B4C,GACEG,MAAOvI,EAAEwL,KACTjI,GAAI4B,EAAcM,GAClBI,IAAK7F,EAAE6F,IACPoC,EAAGoD,EACHZ,EAAGa,EACHD,KACAC,KACAG,OAAQzL,EAAEyL,OACVlL,GACEsF,IAAK7F,EAAE6F,IACPoC,EAAG,WACHwC,EAAG,YAELvK,GACE2F,IAAK7F,EAAE6F,IACPoC,EAAG,WACHwC,EAAG,aAGPjE,EAAMf,GAAS2C,IACf8C,IACc/F,EAAcT,QAC1B5C,EAAQ0E,IAzCHzG,OAiDfsD,OA9QO,SA8QAqI,EAAIC,GACT,IAAK,GAAIC,KAAQD,GACfD,EAAGE,GAAQD,EAAGC,EAEhB,OAAOF,IAETG,YApRO,SAoRKC,GACVpM,KAAKyE,gBAAkBX,SAASiB,iBAAiBqH,EACjD,KAAK,GAAI/L,GAAI,EAAGC,EAAIN,KAAKyE,gBAAgBO,OAAQ3E,EAAIC,EAAGD,IACtDL,KAAKyE,gBAAgBpE,GAAG4E,aAAa,gBAAiB5E,EAAI,GAC1DL,KAAKyE,gBAAgBpE,GAAG6E,QAAUlF,KAAKmF,oBAK7CkH,QAAS,WACPrM,KAAKmM,YAAY,oBAQV7I,aAEO,mBAAX+B,SAA2BA,OAAO/B,kBAC3C+B,OAAO/B,gBAAkBA,IJoQrB,SAAU1D,EAAQD,EAASO,GKhkBjC,GAAAoM,GAAA,WAAqB,MAAAtM,UAAcuM,SAAA,iBAInCC,EAAAF,EAAAG,oBACA3L,OAAA4L,oBAAAJ,GAAAK,QAAA,yBAGAC,EAAAJ,GAAAF,EAAAG,kBAOA,IAJAH,EAAAG,uBAAAI,GAEAjN,EAAAD,QAAiBO,EAAQ,GAEzBsM,EAEAF,EAAAG,mBAAAG,MAGA,WACAN,GAAAG,mBACG,MAAArH,GACHkH,EAAAG,uBAAAI,KLklBM,SAAUjN,EAAQD,IM3mBxB,SAAAmN,GACA,YA2BA,SAAAzF,GAAA0F,EAAAC,EAAAjN,EAAAkN,GAEA,GAAAC,GAAAF,KAAAzL,oBAAA4L,GAAAH,EAAAG,EACAC,EAAAtM,OAAAuM,OAAAH,EAAA3L,WACA+L,EAAA,GAAAC,GAAAN,MAMA,OAFAG,GAAAI,QAAAC,EAAAV,EAAAhN,EAAAuN,GAEAF,EAcA,QAAAM,GAAA3L,EAAA4L,EAAAnL,GACA,IACA,OAAcoL,KAAA,SAAApL,IAAAT,EAAAxB,KAAAoN,EAAAnL,IACT,MAAAM,GACL,OAAc8K,KAAA,QAAApL,IAAAM,IAiBd,QAAAqK,MACA,QAAAU,MACA,QAAAC,MA4BA,QAAAC,GAAAxM,IACA,yBAAAyM,QAAA,SAAAC,GACA1M,EAAA0M,GAAA,SAAAzL,GACA,MAAAxC,MAAAwN,QAAAS,EAAAzL,MAoCA,QAAA0L,GAAAd,GACA,QAAAe,GAAAF,EAAAzL,EAAAJ,EAAAC,GACA,GAAA+L,GAAAV,EAAAN,EAAAa,GAAAb,EAAA5K,EACA,cAAA4L,EAAAR,KAEO,CACP,GAAAS,GAAAD,EAAA5L,IACAE,EAAA2L,EAAA3L,KACA,OAAAA,IACA,gBAAAA,IACA4L,EAAA/N,KAAAmC,EAAA,WACAP,QAAAC,QAAAM,EAAA6L,SAAA1L,KAAA,SAAAH,GACAyL,EAAA,OAAAzL,EAAAN,EAAAC,IACW,SAAAS,GACXqL,EAAA,QAAArL,EAAAV,EAAAC,KAIAF,QAAAC,QAAAM,GAAAG,KAAA,SAAA2L,GAgBAH,EAAA3L,MAAA8L,EACApM,EAAAiM,IACShM,GAhCTA,EAAA+L,EAAA5L,KAsCA,QAAAiM,GAAAR,EAAAzL,GACA,QAAAkM,KACA,UAAAvM,SAAA,SAAAC,EAAAC,GACA8L,EAAAF,EAAAzL,EAAAJ,EAAAC,KAIA,MAAAsM,GAaAA,IAAA9L,KACA6L,EAGAA,GACAA,IA3BA,GAAAC,EAgCA3O,MAAAwN,QAAAiB,EAwBA,QAAAhB,GAAAV,EAAAhN,EAAAuN,GACA,GAAAsB,GAAAC,CAEA,iBAAAZ,EAAAzL,GACA,GAAAoM,IAAAE,EACA,SAAAC,OAAA,+BAGA,IAAAH,IAAAI,EAAA,CACA,aAAAf,EACA,KAAAzL,EAKA,OAAAyM,KAMA,IAHA3B,EAAAW,SACAX,EAAA9K,QAEA,CACA,GAAA0M,GAAA5B,EAAA4B,QACA,IAAAA,EAAA,CACA,GAAAC,GAAAC,EAAAF,EAAA5B,EACA,IAAA6B,EAAA,CACA,GAAAA,IAAAE,EAAA,QACA,OAAAF,IAIA,YAAA7B,EAAAW,OAGAX,EAAA5F,KAAA4F,EAAAgC,MAAAhC,EAAA9K,QAES,cAAA8K,EAAAW,OAAA,CACT,GAAAW,IAAAC,EAEA,KADAD,GAAAI,EACA1B,EAAA9K,GAGA8K,GAAAiC,kBAAAjC,EAAA9K,SAES,WAAA8K,EAAAW,QACTX,EAAA5D,OAAA,SAAA4D,EAAA9K,IAGAoM,GAAAE,CAEA,IAAAV,GAAAV,EAAAX,EAAAhN,EAAAuN,EACA,eAAAc,EAAAR,KAAA,CAOA,GAJAgB,EAAAtB,EAAA1K,KACAoM,EACAQ,EAEApB,EAAA5L,MAAA6M,EACA,QAGA,QACA3M,MAAA0L,EAAA5L,IACAI,KAAA0K,EAAA1K,MAGS,UAAAwL,EAAAR,OACTgB,EAAAI,EAGA1B,EAAAW,OAAA,QACAX,EAAA9K,IAAA4L,EAAA5L,OAUA,QAAA4M,GAAAF,EAAA5B,GACA,GAAAW,GAAAiB,EAAAO,SAAAnC,EAAAW,OACA,IAAAA,IAAApB,EAAA,CAKA,GAFAS,EAAA4B,SAAA,KAEA,UAAA5B,EAAAW,OAAA,CACA,GAAAiB,EAAAO,SAAAC,SAGApC,EAAAW,OAAA,SACAX,EAAA9K,IAAAqK,EACAuC,EAAAF,EAAA5B,GAEA,UAAAA,EAAAW,QAGA,MAAAoB,EAIA/B,GAAAW,OAAA,QACAX,EAAA9K,IAAA,GAAAmN,WACA,kDAGA,MAAAN,GAGA,GAAAjB,GAAAV,EAAAO,EAAAiB,EAAAO,SAAAnC,EAAA9K,IAEA,cAAA4L,EAAAR,KAIA,MAHAN,GAAAW,OAAA,QACAX,EAAA9K,IAAA4L,EAAA5L,IACA8K,EAAA4B,SAAA,KACAG,CAGA,IAAA5M,GAAA2L,EAAA5L,GAEA,OAAAC,GAOAA,EAAAG,MAGA0K,EAAA4B,EAAAU,YAAAnN,EAAAC,MAGA4K,EAAA9F,KAAA0H,EAAAW,QAQA,WAAAvC,EAAAW,SACAX,EAAAW,OAAA,OACAX,EAAA9K,IAAAqK,GAUAS,EAAA4B,SAAA,KACAG,GANA5M,GA3BA6K,EAAAW,OAAA,QACAX,EAAA9K,IAAA,GAAAmN,WAAA,oCACArC,EAAA4B,SAAA,KACAG,GAoDA,QAAAS,GAAAC,GACA,GAAAC,IAAiBC,OAAAF,EAAA,GAEjB,KAAAA,KACAC,EAAAE,SAAAH,EAAA,IAGA,IAAAA,KACAC,EAAAG,WAAAJ,EAAA,GACAC,EAAAI,SAAAL,EAAA,IAGA/P,KAAAqQ,WAAAC,KAAAN,GAGA,QAAAO,GAAAP,GACA,GAAA5B,GAAA4B,EAAAQ,cACApC,GAAAR,KAAA,eACAQ,GAAA5L,IACAwN,EAAAQ,WAAApC,EAGA,QAAAb,GAAAN,GAIAjN,KAAAqQ,aAAwBJ,OAAA,SACxBhD,EAAAe,QAAA8B,EAAA9P,MACAA,KAAAyQ,OAAA,GA8BA,QAAAC,GAAAC,GACA,GAAAA,EAAA,CACA,GAAAC,GAAAD,EAAAE,EACA,IAAAD,EACA,MAAAA,GAAArQ,KAAAoQ,EAGA,sBAAAA,GAAAnJ,KACA,MAAAmJ,EAGA,KAAA/G,MAAA+G,EAAA3L,QAAA,CACA,GAAA3E,IAAA,EAAAmH,EAAA,QAAAA,KACA,OAAAnH,EAAAsQ,EAAA3L,QACA,GAAAsJ,EAAA/N,KAAAoQ,EAAAtQ,GAGA,MAFAmH,GAAA9E,MAAAiO,EAAAtQ,GACAmH,EAAA5E,MAAA,EACA4E,CAOA,OAHAA,GAAA9E,MAAAmK,EACArF,EAAA5E,MAAA,EAEA4E,EAGA,OAAAA,WAKA,OAAYA,KAAAyH,GAIZ,QAAAA,KACA,OAAYvM,MAAAmK,EAAAjK,MAAA,GA7fZ,GAEAiK,GAFAiE,EAAAhQ,OAAAS,UACA+M,EAAAwC,EAAAtP,eAEAuP,EAAA,kBAAAC,kBACAH,EAAAE,EAAAtB,UAAA,aACAwB,EAAAF,EAAAG,eAAA,kBACAC,EAAAJ,EAAAK,aAAA,gBAEAC,EAAA,gBAAAzR,GACA0R,EAAAxE,EAAAL,kBACA,IAAA6E,EAQA,YAPAD,IAGAzR,EAAAD,QAAA2R,GASAA,GAAAxE,EAAAL,mBAAA4E,EAAAzR,EAAAD,WAcA2R,EAAAjK,MAoBA,IAAAwH,GAAA,iBACAW,EAAA,iBACAV,EAAA,YACAE,EAAA,YAIAK,KAYAkC,IACAA,GAAAV,GAAA,WACA,MAAA7Q,MAGA,IAAAwR,GAAA1Q,OAAA2Q,eACAC,EAAAF,OAAAd,OACAgB,IACAA,IAAAZ,GACAxC,EAAA/N,KAAAmR,EAAAb,KAGAU,EAAAG,EAGA,IAAAC,GAAA7D,EAAAvM,UACA4L,EAAA5L,UAAAT,OAAAuM,OAAAkE,EACA1D,GAAAtM,UAAAoQ,EAAAC,YAAA9D,EACAA,EAAA8D,YAAA/D,EACAC,EAAAqD,GACAtD,EAAAgE,YAAA,oBAYAP,EAAAQ,oBAAA,SAAAC,GACA,GAAAC,GAAA,kBAAAD,MAAAH,WACA,SAAAI,IACAA,IAAAnE,GAGA,uBAAAmE,EAAAH,aAAAG,EAAArR,QAIA2Q,EAAA7K,KAAA,SAAAsL,GAUA,MATAjR,QAAAmR,eACAnR,OAAAmR,eAAAF,EAAAjE,IAEAiE,EAAAG,UAAApE,EACAqD,IAAAY,KACAA,EAAAZ,GAAA,sBAGAY,EAAAxQ,UAAAT,OAAAuM,OAAAsE,GACAI,GAOAT,EAAAa,MAAA,SAAA3P,GACA,OAAY+L,QAAA/L,IA8EZuL,EAAAG,EAAA3M,WACA2M,EAAA3M,UAAA0P,GAAA,WACA,MAAAjR,OAEAsR,EAAApD,gBAKAoD,EAAAc,MAAA,SAAArF,EAAAC,EAAAjN,EAAAkN,GACA,GAAAoF,GAAA,GAAAnE,GACA7G,EAAA0F,EAAAC,EAAAjN,EAAAkN,GAGA,OAAAqE,GAAAQ,oBAAA9E,GACAqF,EACAA,EAAA7K,OAAA3E,KAAA,SAAAwL,GACA,MAAAA,GAAAzL,KAAAyL,EAAA3L,MAAA2P,EAAA7K,UAsKAuG,EAAA4D,GAEAA,EAAAR,GAAA,YAOAQ,EAAAd,GAAA,WACA,MAAA7Q,OAGA2R,EAAAW,SAAA,WACA,4BAkCAhB,EAAAiB,KAAA,SAAAlR,GACA,GAAAkR,KACA,QAAAhQ,KAAAlB,GACAkR,EAAAjC,KAAA/N,EAMA,OAJAgQ,GAAAC,UAIA,QAAAhL,KACA,KAAA+K,EAAAvN,QAAA,CACA,GAAAzC,GAAAgQ,EAAAE,KACA,IAAAlQ,IAAAlB,GAGA,MAFAmG,GAAA9E,MAAAH,EACAiF,EAAA5E,MAAA,EACA4E,EAQA,MADAA,GAAA5E,MAAA,EACA4E,IAsCA8J,EAAAZ,SAMAnD,EAAAhM,WACAqQ,YAAArE,EAEAkD,MAAA,SAAAiC,GAcA,GAbA1S,KAAAuH,KAAA,EACAvH,KAAAwH,KAAA,EAGAxH,KAAA0H,KAAA1H,KAAAsP,MAAAzC,EACA7M,KAAA4C,MAAA,EACA5C,KAAAkP,SAAA,KAEAlP,KAAAiO,OAAA,OACAjO,KAAAwC,IAAAqK,EAEA7M,KAAAqQ,WAAArC,QAAAuC,IAEAmC,EACA,OAAA/R,KAAAX,MAEA,MAAAW,EAAAgS,OAAA,IACArE,EAAA/N,KAAAP,KAAAW,KACAiJ,OAAAjJ,EAAAiS,MAAA,MACA5S,KAAAW,GAAAkM,IAMA5B,KAAA,WACAjL,KAAA4C,MAAA,CAEA,IAAAiQ,GAAA7S,KAAAqQ,WAAA,GACAyC,EAAAD,EAAArC,UACA,cAAAsC,EAAAlF,KACA,KAAAkF,GAAAtQ,GAGA,OAAAxC,MAAA+S,MAGAxD,kBAAA,SAAAyD,GAMA,QAAAC,GAAAC,EAAAC,GAYA,MAXA/E,GAAAR,KAAA,QACAQ,EAAA5L,IAAAwQ,EACA1F,EAAA9F,KAAA0L,EAEAC,IAGA7F,EAAAW,OAAA,OACAX,EAAA9K,IAAAqK,KAGAsG,EAjBA,GAAAnT,KAAA4C,KACA,KAAAoQ,EAmBA,QAhBA1F,GAAAtN,KAgBAK,EAAAL,KAAAqQ,WAAArL,OAAA,EAA8C3E,GAAA,IAAQA,EAAA,CACtD,GAAA2P,GAAAhQ,KAAAqQ,WAAAhQ,GACA+N,EAAA4B,EAAAQ,UAEA,aAAAR,EAAAC,OAIA,MAAAgD,GAAA,MAGA,IAAAjD,EAAAC,QAAAjQ,KAAAuH,KAAA,CACA,GAAA6L,GAAA9E,EAAA/N,KAAAyP,EAAA,YACAqD,EAAA/E,EAAA/N,KAAAyP,EAAA,aAEA,IAAAoD,GAAAC,EAAA,CACA,GAAArT,KAAAuH,KAAAyI,EAAAE,SACA,MAAA+C,GAAAjD,EAAAE,UAAA,EACa,IAAAlQ,KAAAuH,KAAAyI,EAAAG,WACb,MAAA8C,GAAAjD,EAAAG,gBAGW,IAAAiD,GACX,GAAApT,KAAAuH,KAAAyI,EAAAE,SACA,MAAA+C,GAAAjD,EAAAE,UAAA,OAGW,KAAAmD,EAMX,SAAAtE,OAAA,yCALA,IAAA/O,KAAAuH,KAAAyI,EAAAG,WACA,MAAA8C,GAAAjD,EAAAG,gBAUAzG,OAAA,SAAAkE,EAAApL,GACA,OAAAnC,GAAAL,KAAAqQ,WAAArL,OAAA,EAA8C3E,GAAA,IAAQA,EAAA,CACtD,GAAA2P,GAAAhQ,KAAAqQ,WAAAhQ,EACA,IAAA2P,EAAAC,QAAAjQ,KAAAuH,MACA+G,EAAA/N,KAAAyP,EAAA,eACAhQ,KAAAuH,KAAAyI,EAAAG,WAAA,CACA,GAAAmD,GAAAtD,CACA,QAIAsD,IACA,UAAA1F,GACA,aAAAA,IACA0F,EAAArD,QAAAzN,GACAA,GAAA8Q,EAAAnD,aAGAmD,EAAA,KAGA,IAAAlF,GAAAkF,IAAA9C,aAIA,OAHApC,GAAAR,OACAQ,EAAA5L,MAEA8Q,GACAtT,KAAAiO,OAAA,OACAjO,KAAAwH,KAAA8L,EAAAnD,WACAd,GAGArP,KAAAuT,SAAAnF,IAGAmF,SAAA,SAAAnF,EAAAgC,GACA,aAAAhC,EAAAR,KACA,KAAAQ,GAAA5L,GAcA,OAXA,UAAA4L,EAAAR,MACA,aAAAQ,EAAAR,KACA5N,KAAAwH,KAAA4G,EAAA5L,IACO,WAAA4L,EAAAR,MACP5N,KAAA+S,KAAA/S,KAAAwC,IAAA4L,EAAA5L,IACAxC,KAAAiO,OAAA,SACAjO,KAAAwH,KAAA,OACO,WAAA4G,EAAAR,MAAAwC,IACPpQ,KAAAwH,KAAA4I,GAGAf,GAGAmE,OAAA,SAAArD,GACA,OAAA9P,GAAAL,KAAAqQ,WAAArL,OAAA,EAA8C3E,GAAA,IAAQA,EAAA,CACtD,GAAA2P,GAAAhQ,KAAAqQ,WAAAhQ,EACA,IAAA2P,EAAAG,eAGA,MAFAnQ,MAAAuT,SAAAvD,EAAAQ,WAAAR,EAAAI,UACAG,EAAAP,GACAX,IAKAoE,MAAA,SAAAxD,GACA,OAAA5P,GAAAL,KAAAqQ,WAAArL,OAAA,EAA8C3E,GAAA,IAAQA,EAAA,CACtD,GAAA2P,GAAAhQ,KAAAqQ,WAAAhQ,EACA,IAAA2P,EAAAC,WAAA,CACA,GAAA7B,GAAA4B,EAAAQ,UACA,cAAApC,EAAAR,KAAA,CACA,GAAA8F,GAAAtF,EAAA5L,GACA+N,GAAAP,GAEA,MAAA0D,IAMA,SAAA3E,OAAA,0BAGA4E,cAAA,SAAAhD,EAAAf,EAAAC,GAaA,MAZA7P,MAAAkP,UACAO,SAAAiB,EAAAC,GACAf,aACAC,WAGA,SAAA7P,KAAAiO,SAGAjO,KAAAwC,IAAAqK,GAGAwC,KAOA,WAAe,MAAArP,UAAcuM,SAAA,mBN0nBvB,SAAU3M,EAAQ+B,EAAqBzB,GAE7C,YOj1CA,IAAA0T,GAAA1T,EAAA,GAAA2T,EAAA3T,EAAA,GAAA4T,EAAyB5T,EAAQ,GAcjC6T,EAAAD,EACEF,EAAA,EACAC,EAAA,GATF,EAEA,KAEA,KAEA,KAUelS,GAAA,EAAAoS,EAAiB,SP01C1B,SAAUnU,EAAQD,GQ32CxBC,EAAAD,QAAA,SACAqU,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,GAAAC,GACAC,EAAAP,QAGApG,QAAAoG,GAAAQ,OACA,YAAA5G,GAAA,aAAAA,IACA0G,EAAAN,EACAO,EAAAP,EAAAQ,QAIA,IAAA3N,GAAA,kBAAA0N,GACAA,EAAA1N,QACA0N,CAGAN,KACApN,EAAA4N,OAAAR,EAAAQ,OACA5N,EAAA6N,gBAAAT,EAAAS,gBACA7N,EAAA8N,WAAA,GAIAT,IACArN,EAAA+N,YAAA,GAIAR,IACAvN,EAAAgO,SAAAT,EAGA,IAAAU,EA4BA,IA3BAT,GACAS,EAAA,SAAAxH,GAEAA,EACAA,GACAtN,KAAA+U,QAAA/U,KAAA+U,OAAAC,YACAhV,KAAAiV,QAAAjV,KAAAiV,OAAAF,QAAA/U,KAAAiV,OAAAF,OAAAC,WAEA1H,GAAA,mBAAA4H,uBACA5H,EAAA4H,qBAGAf,GACAA,EAAA5T,KAAAP,KAAAsN,GAGAA,KAAA6H,uBACA7H,EAAA6H,sBAAAC,IAAAf,IAKAxN,EAAAwO,aAAAP,GACGX,IACHW,EAAAX,GAGAW,EAAA,CACA,GAAAF,GAAA/N,EAAA+N,WACAU,EAAAV,EACA/N,EAAA4N,OACA5N,EAAA0O,YAEAX,IAQA/N,EAAA2O,cAAAV,EAEAjO,EAAA4N,OAAA,SAAA1J,EAAAuC,GAEA,MADAwH,GAAAvU,KAAA+M,GACAgI,EAAAvK,EAAAuC,KAVAzG,EAAA0O,aAAAD,KACAG,OAAAH,EAAAR,IACAA,GAaA,OACAR,WACA3U,QAAA4U,EACA1N,aR03CM,SAAUjH,EAAQD,KAMlB,SAAUC,EAAQD,KAMlB,SAAUC,EAAQ+B,EAAqBzB,GAE7C,YS5+CA,IAAAuU,GAAA,WAA0B,GAAAiB,GAAA1V,KAAa2V,EAAAD,EAAAE,cAA0BF,GAAAG,MAAAC,EAAwB,OAAAJ,GAAAK,GAAA,IACzFrB,GAAA,WAAoC,GAAAgB,GAAA1V,KAAa2V,EAAAD,EAAAE,eAA0BE,EAAAJ,EAAAG,MAAAC,IAAAH,CAAwB,OAAAG,GAAA,OAAiBE,YAAA,OAAAC,OAA0BC,SAAA,KAAAC,KAAA,SAAAC,cAAA,UAAsDN,EAAA,OAAYE,YAAA,aAAuBN,EAAAW,GAAA,KAAAP,EAAA,OAAwBE,YAAA,sBAAgCF,EAAA,OAAYE,YAAA,oBAA8BF,EAAA,OAAYE,YAAA,eAAyBN,EAAAW,GAAA,KAAAP,EAAA,OAAwBE,YAAA,eAAyBN,EAAAW,GAAA,KAAAP,EAAA,OAAwBE,YAAA,iBAAyBN,EAAAW,GAAA,KAAAP,EAAA,OAA0BE,YAAA,8BAAwCF,EAAA,OAAYE,YAAA,kBAA4BF,EAAA,OAAYE,YAAA,kBAA4BN,EAAAW,GAAA,KAAAP,EAAA,UAA2BE,YAAA,mCAAAC,OAAsDpN,MAAA,iBAAuB6M,EAAAW,GAAA,KAAAP,EAAA,UAA2BE,YAAA,mCAAAC,OAAsDpN,MAAA,WAAiB6M,EAAAW,GAAA,KAAAP,EAAA,UAA2BE,YAAA,gCAAAC,OAAmDpN,MAAA,uBAA6B6M,EAAAW,GAAA,KAAAP,EAAA,UAA2BE,YAAA,kCAAAC,OAAqDpN,MAAA,iBAAuB6M,EAAAW,GAAA,KAAAP,EAAA,OAAwBE,YAAA,oBAA8BF,EAAA,OAAYE,YAAA,yBAAmCF,EAAA,OAAYE,YAAA,yBAAmCF,EAAA,OAAYE,YAAA,mCAAqCN,EAAAW,GAAA,KAAAP,EAAA,OAAgCE,YAAA,iEAA2EF,EAAA,OAAYE,YAAA,0BAAkCN,EAAAW,GAAA,KAAAP,EAAA,UAA6BE,YAAA,yCAAAC,OAA4DpN,MAAA,2BAAiC6M,EAAAW,GAAA,KAAAP,EAAA,UAA2BE,YAAA,0CAAAC,OAA6DpN,MAAA,wBAA8B6M,EAAAW,GAAA,KAAAP,EAAA,OAAwBE,YAAA,kBAA4BF,EAAA,OAAYE,YAAA,oCAC5oDM,GAAiB7B,SAAAC,kBACF/S,GAAA,KTi/CT,SAAU/B,EAAQ+B,EAAqBzB,GAE7C,YASA,SAAS4B,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAMjC,KAAMkC,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAUE,EAAQD,EAAKC,MAAS,MAAOC,GAAwB,WAAfN,GAAOM,GAAkB,IAAIF,EAAKG,KAAiC,MAAOT,SAAQC,QAAQM,GAAOG,KAAK,SAAUH,GAASJ,EAAK,OAAQI,IAAW,SAAUI,GAAOR,EAAK,QAASQ,IAAtIV,GAAQM,GAA4I,MAAOJ,GAAK,WU//Czb,GAAAS,GAAA7C,EAAA,GAAA8C,EAAA9C,EAAAiB,EAAA4B,GV6/CIwT,EAA4B,kBAAXvF,SAAoD,gBAApBA,QAAOvB,SAAwB,SAAU9B,GAAO,aAAcA,IAAS,SAAUA,GAAO,MAAOA,IAAyB,kBAAXqD,SAAyBrD,EAAIiE,cAAgBZ,QAAUrD,IAAQqD,OAAOzP,UAAY,eAAkBoM,IU5/ClQ7D,EAAa,SAAU0M,EAAUC,EAAS3P,EAAOD,GAUnD,GAAI6P,IACFC,SAAU,KACVC,KAAM,SAAUjR,EAAQiI,EAAMiJ,EAAUC,GACtC,GAAIC,IAAcD,EAAS,SAAW,OAAS,eAC/ClJ,GAAOA,EAAKoJ,MAAM,IAClB,KAAK,GAAI3W,GAAI,EAAGA,EAAIuN,EAAK5I,OAAQ3E,IAC3BuN,EAAKvN,IACPsF,EAAOoR,GAAYnJ,EAAKvN,GAAIwW,GAAU,IAI5CI,QAAS,SAAUtJ,GACjB,MAAQA,aAAepC,QAEzB2L,SAAU,SAAUC,EAASC,GAC3B,GAAIvT,GAAKC,SAASC,cAAcqT,GAAO,MAIvC,OAHID,KACFtT,EAAGwT,UAAYF,GAEVtT,GAETyT,WAAY,WACV,GAAIC,GAAUlS,OAAOyC,WACrB,YAAmB+E,KAAZ0K,EAAwBA,EAAUzT,SAASiE,gBAAgBC,WAEpE8O,OAAQ,SAAUnR,EAAQiI,EAAMiJ,GAC9BH,EAAUE,KAAKjR,EAAQiI,EAAMiJ,GAAU,IAEzCW,YAAa,SAAU3T,EAAIwT,GACzB,GAAII,GAAM,GAAIC,QAAO,UAAYL,EAAY,UAC7CxT,GAAGwT,UAAYxT,EAAGwT,UAAUM,QAAQF,EAAK,KAAKE,QAAQ,SAAU,IAAIA,QAAQ,SAAU,KAExFC,SAAU,SAAU/T,EAAIwT,GACjBX,EAAUmB,SAAShU,EAAIwT,KAC1BxT,EAAGwT,YAAcxT,EAAGwT,UAAY,IAAM,IAAMA,IAGhDQ,SAAU,SAAUhU,EAAIwT,GACtB,MAAOxT,GAAGwT,WAAa,GAAIK,QAAO,UAAYL,EAAY,WAAWS,KAAKjU,EAAGwT,YAE/EU,gBAAiB,SAAUC,EAAUC,GAEnC,IADA,GAAIC,GAAOF,EAASG,WACbD,GAAM,CACX,GAAIxB,EAAUmB,SAASK,EAAMD,GAC3B,MAAOC,EAETA,GAAOA,EAAKE,cAGhBC,YAAa,SAAUC,EAAO5V,EAAOH,GAEnC,IADA,GAAIlC,GAAIiY,EAAMtT,OACP3E,KACL,GAAIiY,EAAMjY,GAAGkC,KAASG,EACpB,MAAOrC,EAGX,QAAQ,GAEVsD,OAAQ,SAAUqI,EAAIC,EAAIsM,GACxB,IAAK,GAAIrM,KAAQD,GACf,GAAIA,EAAGzK,eAAe0K,GAAO,CAC3B,GAAIqM,GAAoBvM,EAAGxK,eAAe0K,GACxC,QAEFF,GAAGE,GAAQD,EAAGC,KAIpBsM,QACEC,MACEC,IAAK,SAAUC,GACb,MAAOxO,MAAKyO,IAAID,GAAKxO,KAAK0O,GAAK,KAEjCC,MAAO,SAAUH,GACf,QAASxO,KAAK4O,IAAI5O,KAAK0O,GAAKF,GAAK,GAAK,IAG1CK,OACEN,IAAK,SAAUC,GACb,QAASA,EAAIA,EAAIA,EAAI,KAqC3BM,eAAgB,WACd,GAAIvC,EAAUC,SACZ,MAAOD,GAAUC,QAEnB,IAAIuC,GAAWxC,EAAUQ,WACvBiC,EAAcD,EAASE,MACvBC,EAAS,GACT1C,IAiBF,IAdAA,EAAS2C,MAAQxV,SAASyV,MAAQzV,SAAS0V,iBAE3C7C,EAAS8C,MAAQ,gBAAkBpU,QAE/BA,OAAOqU,wBACT/C,EAASgD,IAAMtU,OAAOqU,sBACtB/C,EAASiD,IAAMvU,OAAOwU,sBAGxBlD,EAASmD,eAAkBzU,OAAO0U,cAAiBC,UAAUC,kBAKxDtD,EAASmD,aAAc,CAE1B,GAAII,GAAKF,UAAUG,SASnB,IAAI,cAAcrC,KAAKkC,UAAUI,UAAW,CAC1C,GAAIC,GAAKL,UAAUM,WAAYC,MAAM,yBACjCF,IAAKA,EAAErV,OAAS,IAClBqV,EAAI1Q,SAAS0Q,EAAE,GAAI,MACV,GAAKA,EAAI,IAChB1D,EAAS6D,eAAgB,GAS/B,GAAID,GAAQL,EAAGK,MAAM,uBACjBE,EAAiBF,EAAQA,EAAM,GAAK,CACxCE,GAAiBC,WAAWD,GACxBA,GAAkB,IAChBA,EAAiB,MACnB9D,EAASgE,cAAe,GAE1BhE,EAASiE,eAAiBH,GAE5B9D,EAASkE,cAAgB,yBAAyB/C,KAAKoC,GAUzD,IAAK,GAHHY,GACAC,EAHEC,GAAe,YAAa,cAAe,iBAC7CC,GAAW,GAAI,SAAU,MAAO,KAAM,KAI/B5a,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1BgZ,EAAS4B,EAAQ5a,EAEjB,KAAK,GAAImG,GAAI,EAAGA,EAAI,EAAGA,IACrBsU,EAAiBE,EAAYxU,GAG7BuU,EAAY1B,GAAUA,EACpByB,EAAenI,OAAO,GAAGuI,cAAgBJ,EAAelI,MAAM,GAC9DkI,IAEGnE,EAASmE,IAAmBC,IAAa5B,KAC5CxC,EAASmE,GAAkBC,EAI3B1B,KAAW1C,EAASgD,MACtBN,EAASA,EAAO8B,cAChBxE,EAASgD,IAAMtU,OAAOgU,EAAS,yBAC3B1C,EAASgD,MACXhD,EAASiD,IAAMvU,OAAOgU,EAAS,yBAC7BhU,OAAOgU,EAAS,iCAKxB,IAAK1C,EAASgD,IAAK,CACjB,GAAIyB,GAAW,CACfzE,GAASgD,IAAM,SAAU5X,GACvB,GAAIsZ,IAAW,GAAIC,OAAOC,UACtBC,EAAarR,KAAKsR,IAAI,EAAG,IAAMJ,EAAWD,IAC1CM,EAAKrW,OAAOP,WAAW,WACzB/C,EAAGsZ,EAAWG,IACbA,EAEH,OADAJ,GAAWC,EAAWG,EACfE,GAET/E,EAASiD,IAAM,SAAU8B,GACvBC,aAAaD,IAUjB,MALA/E,GAASiF,MAAQ9X,SAAS+X,mBACtB/X,SAAS+X,gBAAgB,6BAA8B,OAAOC,cAElEpF,EAAUC,SAAWA,EAEdA,GAIXD,GAAUuC,iBAGNvC,EAAUC,SAAS2C,QAErB5C,EAAUE,KAAO,SAAUjR,EAAQiI,EAAMiJ,EAAUC,GAEjDlJ,EAAOA,EAAKoJ,MAAM,IAQlB,KAAK,GALH+E,GADEhF,GAAcD,EAAS,SAAW,UAAY,QAEhDkF,EAAY,WACVnF,EAASoF,YAAY1b,KAAKsW,IAGrBxW,EAAI,EAAGA,EAAIuN,EAAK5I,OAAQ3E,IAE/B,GADA0b,EAASnO,EAAKvN,GAGZ,GAAwB,gBAApB,KAAOwW,EAAP,YAAAN,EAAOM,KAAyBA,EAASoF,YAAa,CACxD,GAAKnF,GAGH,IAAKD,EAAS,QAAUkF,GACtB,OAAO,MAHTlF,GAAS,QAAUkF,GAAUC,CAO/BrW,GAAOoR,GAAY,KAAOgF,EAAQlF,EAAS,QAAUkF,QAErDpW,GAAOoR,GAAY,KAAOgF,EAAQlF,IAc5C,IAAI9W,GAAOC,KAWPkc,GACFC,gBAAgB,EAChBC,QAAS,IACTC,UAAW,EACXC,WAAW,EACXC,MAAM,EACNC,cAAc,EACdC,eAAe,EACfC,qBAAqB,EACrBC,kBAAmB,IACnBC,sBAAuB,IACvB/S,sBAAuB,IACvBZ,iBAAiB,EACjB4T,OAAO,EACPC,QAAQ,EACRC,WAAW,EACXC,sBAAuB,IACvBC,eAAgB,IAChBC,mBAAoB,SAAUrZ,GAC5B,MAAsB,MAAfA,EAAGsZ,SAEZ9T,iBAAkB,SAAUC,EAAcZ,GACxC,MAAIY,GACK,EAEAZ,EAAKa,iBAAmB,GAAM,EAAI,MAG7CH,cAAe,KACfgU,OAAO,EAGPC,UAAW,MAEb3G,GAAU/S,OAAOuY,EAAUrV,EAO3B,IAIIyW,GACFC,EACAC,EACAC,EACAC,EACAC,EAIAC,EACAC,EACAC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAIAC,EACAC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEAC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAGAC,EAwhCEC,EACFC,EAUAC,EAIAC,EACAC,EACAC,EAIAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GACAC,GACAC,GACAC,GACAC,GAEAC,GACAC,GAGAC,GACAC,GACAC,GACAC,GACAC,GAqFAC,GArsCEC,GAAiB,WACnB,OAAQ5Y,EAAG,EAAGE,EAAG,IASjB2Y,GAAeD,KACfE,GAAkBF,KAClBG,GAAaH,KAIbI,MAOAC,GAAqB,EACrBC,MACAC,GAAaP,KAGbQ,GAAa,EAObC,IAAmB,EAEnBC,MAQAC,MACAC,IAAuB,EAKvBC,GAAkB,SAAUjhB,EAAMf,GAChC8W,EAAU/S,OAAO5D,EAAMH,EAAOiiB,eAC9BJ,GAASnR,KAAK3P,IAGhBmhB,GAAe,SAAU/b,GACvB,GAAIgc,GAAYC,IAChB,OAAIjc,GAAQgc,EAAY,EACfhc,EAAQgc,EACNhc,EAAQ,EACVgc,EAAYhc,EAEdA,GAITkc,MACAC,GAAU,SAAUvhB,EAAMoB,GAIxB,MAHKkgB,IAAWthB,KACdshB,GAAWthB,OAENshB,GAAWthB,GAAM2P,KAAKvO,IAE/BogB,GAAS,SAAUxhB,GACjB,GAAIyhB,GAAYH,GAAWthB,EAE3B,IAAIyhB,EAAW,CACb,GAAIC,GAAO9W,MAAMhK,UAAUqR,MAAMrS,KAAK2B,UACtCmgB,GAAKC,OAEL,KAAK,GAAIjiB,GAAI,EAAGA,EAAI+hB,EAAUpd,OAAQ3E,IACpC+hB,EAAU/hB,GAAG4B,MAAMlC,EAAMsiB,KAI/BE,cAAA,GAAA9X,GAAA3I,EAAAkB,EAAAwD,EAAAC,KAAc,QAAAiE,GAAgB/J,GAAhB,GAAAyhB,GAAAC,EAAAG,EAAAniB,EAAAoiB,EAAAvgB,SAAA,OAAAc,GAAAwD,EAAAa,KAAA,SAAAuD,GAAA,cAAAA,EAAArD,KAAAqD,EAAApD,MAAA,YACR4a,EAAYH,GAAWthB,IADf,CAAAiK,EAAApD,KAAA,QAOV,IAHI6a,EAAO9W,MAAMhK,UAAUqR,MAAMrS,KAAtBkiB,GACXJ,EAAKC,QACC7gB,KACGpB,EAAI,EAAGA,EAAI+hB,EAAUpd,OAAQ3E,IACpCoB,EAAE6O,KAAK8R,EAAU/hB,GAAG4B,MAAMlC,EAAMsiB,GARxB,OAAAzX,GAAAlB,OAAA,SAUHvH,QAAQoX,IAAI9X,GAVT,wBAAAmJ,GAAAK,SAAAP,EAAA1K,QAAd,iBAAAkL,GAAA,MAAAT,GAAAxI,MAAAjC,KAAAkC,eAcAwgB,GAAkB,WAChB,OAAO,GAAIpH,OAAOC,WAEpBoH,GAAkB,SAAUC,GAC1BhC,GAAagC,EACb7iB,EAAK8iB,GAAGzJ,MAAMwJ,QAAUA,EAAU1G,EAASG,WAG7CyG,GAAsB,SAAUC,EAAU5a,EAAGE,EAAG2a,EAAMta,KAC/CiZ,IAAyBjZ,GAAQA,IAAS3I,EAAKkjB,YAClDD,GAAeta,EAAOA,EAAKwa,SAAWnjB,EAAKkjB,SAASC,UAGtDH,EAASpE,GAAiBV,EAAmB9V,EAAI,OAASE,EAAI,KAAO6V,EAAkB,UAAY8E,EAAO,KAE5GG,GAAuB,SAAUC,GAC3B7C,KAEE6C,IACErF,EAAiBhe,EAAKkjB,SAASC,SAC5BvB,KACH0B,GAActjB,EAAKkjB,UAAU,GAAO,GACpCtB,IAAuB,GAGrBA,KACF0B,GAActjB,EAAKkjB,UACnBtB,IAAuB,IAM7BmB,GAAoBvC,GAAuBW,GAAW/Y,EAAG+Y,GAAW7Y,EAAG0V,KAG3EuF,GAAsB,SAAU5a,GAC1BA,EAAK6a,WAEPT,GAAoBpa,EAAK6a,UAAUnK,MACjC1Q,EAAK8a,gBAAgBrb,EACrBO,EAAK8a,gBAAgBnb,EACrBK,EAAKa,iBACLb,IAGN+a,GAAiB,SAAUtb,EAAGub,GAC5BA,EAAQ/E,GAAiBV,EAAmB9V,EAAI,UAAY+V,GAE9DyF,GAAkB,SAAUxb,EAAGyb,GAE7B,IAAK1H,EAASK,MAAQqH,EAAU,CAC9B,GAAIC,GAAsBpG,GAAqB6D,GAAWnZ,EAAIiZ,GAAqBjZ,GAAKmZ,GAAWnZ,EACjG2b,EAAQ3Z,KAAK4Z,MAAM5b,EAAI6b,GAAe7b,IAEnC0b,EAAsB,GAAKC,EAAQ,GACrCD,GAAuB7B,KAAiB,GAAK8B,EAAQ,KACtD3b,EAAI6b,GAAe7b,EAAI2b,EAAQ5H,EAASc,uBAI5CgH,GAAe7b,EAAIA,EACnBsb,GAAetb,EAAGuV,IAEpBuG,GAAsB,SAAUC,EAAMC,GACpC,GAAI3jB,GAAI4jB,GAAcF,GAAQ7C,GAAQ6C,EACtC,OAAOjD,IAAgBiD,GAAQlD,GAAakD,GAAQ1jB,EAAIA,GAAK2jB,EAAYnG,IAG3EqG,GAAkB,SAAUC,EAAIC,GAC9BD,EAAGnc,EAAIoc,EAAGpc,EACVmc,EAAGjc,EAAIkc,EAAGlc,EACNkc,EAAG7I,KACL4I,EAAG5I,GAAK6I,EAAG7I,KAGf8I,GAAc,SAAU/iB,GACtBA,EAAE0G,EAAIgC,KAAK4Z,MAAMtiB,EAAE0G,GACnB1G,EAAE4G,EAAI8B,KAAK4Z,MAAMtiB,EAAE4G,IAGrBoc,GAAoB,KACpBC,GAAoB,QAApBA,KAGMD,KACF/N,EAAUI,OAAOhT,SAAU,YAAa4gB,GACxChO,EAAUkB,SAASpB,EAAU,mBAC7B0F,EAASI,WAAY,EACrB6F,GAAO,cAETsC,GAAoB3f,WAAW,WAC7B2f,GAAoB,MACnB,MAGLE,GAAc,WACZjO,EAAUE,KAAK9S,SAAU,UAAW/D,GAEhCqf,EAAUwF,WAEZlO,EAAUE,KAAK7W,EAAK8kB,WAAY,QAAS9kB,GAItCmc,EAASI,WACZ5F,EAAUE,KAAK9S,SAAU,YAAa4gB,IAGxChO,EAAUE,KAAKvR,OAAQ,kCAAmCtF,GAE1DoiB,GAAO,eAGT2C,GAAgB,WACdpO,EAAUI,OAAOzR,OAAQ,kCAAmCtF,GAC5D2W,EAAUI,OAAOzR,OAAQ,SAAUyY,EAAqBiH,QACxDrO,EAAUI,OAAOhT,SAAU,UAAW/D,GACtC2W,EAAUI,OAAOhT,SAAU,YAAa4gB,IAEpCtF,EAAUwF,WACZlO,EAAUI,OAAO/W,EAAK8kB,WAAY,QAAS9kB,GAGzC6f,GACFlJ,EAAUI,OAAOzR,OAAQuY,EAAe7d,GAG1C4b,aAAa0D,GAEb8C,GAAO,iBAGT6C,GAAsB,SAAUb,EAAWc,GACzC,GAAIC,GAASC,GAAmBplB,EAAKkjB,SAAU9B,GAAegD,EAI9D,OAHIc,KACF3E,GAAiB4E,GAEZA,GAGTE,GAAmB,SAAU1c,GAI3B,MAHKA,KACHA,EAAO3I,EAAKkjB,UAEPva,EAAKa,kBAEd8b,GAAmB,SAAU3c,GAI3B,MAHKA,KACHA,EAAO3I,EAAKkjB,UAEPva,EAAKH,EAAI,EAAI2T,EAAS9S,cAAgB,GAI/Ckc,GAAuB,SAAUpB,EAAMqB,EAAeC,EAAeC,GACnE,MAAIA,KAAkB1lB,EAAKkjB,SAAS1Z,kBAClCic,EAActB,GAAQnkB,EAAKkjB,SAASO,gBAAgBU,IAC7C,IAEPsB,EAActB,GAAQD,GAAoBC,EAAMuB,GAE5CD,EAActB,GAAQqB,EAAcnb,IAAI8Z,IAC1CsB,EAActB,GAAQqB,EAAcnb,IAAI8Z,IACjC,GACEsB,EAActB,GAAQqB,EAAc9J,IAAIyI,KACjDsB,EAActB,GAAQqB,EAAc9J,IAAIyI,IACjC,KAMbwB,GAAmB,WAEjB,GAAI/G,EAAe,CAEjB,GAAIgH,GAAmBvG,EAAUwG,cAAgB/G,CAGjD,OAFAZ,GAAmB,aAAe0H,EAAmB,MAAQ,UAC7DzH,EAAkBkB,EAAUwG,YAAc,SAAW,KAOvDjH,EAAgB,OAChBjI,EAAUkB,SAASpB,EAAU,YAE7BiN,GAAiB,SAAUtb,EAAGub,GAC5BA,EAAQtb,KAAOD,EAAI,MAErBmb,GAAsB,SAAU5a,GAE9B,GAAImd,GAAYnd,EAAKwa,SAAW,EAAI,EAAIxa,EAAKwa,SAC3CxhB,EAAIgH,EAAK6a,UAAUnK,MACnB7Q,EAAIsd,EAAYnd,EAAKH,EACrBwC,EAAI8a,EAAYnd,EAAKqC,CAEvBrJ,GAAE8G,MAAQD,EAAI,KACd7G,EAAEsJ,OAASD,EAAI,KACfrJ,EAAE0G,KAAOM,EAAK8a,gBAAgBrb,EAAI,KAClCzG,EAAE4G,IAAMI,EAAK8a,gBAAgBnb,EAAI,MAGnC8a,GAAuB,WACrB,GAAI5C,GAAuB,CAEzB,GAAI7e,GAAI6e,GACN7X,EAAO3I,EAAKkjB,SACZ4C,EAAYnd,EAAKwa,SAAW,EAAI,EAAIxa,EAAKwa,SACzC3a,EAAIsd,EAAYnd,EAAKH,EACrBwC,EAAI8a,EAAYnd,EAAKqC,CAEvBrJ,GAAE8G,MAAQD,EAAI,KACd7G,EAAEsJ,OAASD,EAAI,KAGfrJ,EAAE0G,KAAO8Y,GAAW/Y,EAAI,KACxBzG,EAAE4G,IAAM4Y,GAAW7Y,EAAI,QAM7Byd,GAAa,SAAU1gB,GACrB,GAAI2gB,GAAgB,EAChB7J,GAASY,QAAwB,KAAd1X,EAAE4gB,QACvBD,EAAgB,QACP7J,EAASa,YACA,KAAd3X,EAAE4gB,QACJD,EAAgB,OACO,KAAd3gB,EAAE4gB,UACXD,EAAgB,SAIhBA,IAGG3gB,EAAE6gB,SAAY7gB,EAAE8gB,QAAW9gB,EAAE+gB,UAAa/gB,EAAEghB,UAC3ChhB,EAAEG,eACJH,EAAEG,iBAEFH,EAAEI,aAAc,EAElBzF,EAAKgmB,QAKXM,GAAiB,SAAUjhB,GACpBA,IAKD2a,GAAUD,GAAgBU,IAAwBd,KACpDta,EAAEG,iBACFH,EAAEkhB,oBAINC,GAA0B,WACxBxmB,EAAKymB,gBAAgB,EAAG9P,EAAUY,eAKlCmP,MACFC,GAAiB,EACjBC,GAAiB,SAAUhmB,GACrB8lB,GAAY9lB,KACV8lB,GAAY9lB,GAAMgZ,KACpBoF,EAAU0H,GAAY9lB,GAAMgZ,KAE9B+M,WACOD,IAAY9lB,KAGvBimB,GAA0B,SAAUjmB,GAC9B8lB,GAAY9lB,IACdgmB,GAAehmB,GAEZ8lB,GAAY9lB,KACf+lB,KACAD,GAAY9lB,QAGhBkmB,GAAqB,WACnB,IAAK,GAAI3a,KAAQua,IAEXA,GAAYjlB,eAAe0K,IAC7Bya,GAAeza,IAKrB4a,GAAe,SAAUnmB,EAAMomB,EAAGC,EAAStmB,EAAGumB,EAAUC,EAAUC,GAChE,GAAuCC,GAAnCC,EAAgB3E,IACpBkE,IAAwBjmB,IAET,QAAX2mB,KACF,GAAIb,GAAY9lB,GAAO,CAMrB,IAJAymB,EAAI1E,KAAoB2E,IAIf3mB,EAMP,MALAimB,IAAehmB,GACfumB,EAASF,QACLG,GACFA,IAIJD,IAAUF,EAAUD,GAAKE,EAASG,EAAI1mB,GAAKqmB,GAE3CN,GAAY9lB,GAAMgZ,IAAMmF,EAAWwI,QAKzCC,cAAA,GAAAC,GAAA1lB,EAAAkB,EAAAwD,EAAAC,KAAoB,QAAAghB,GAAgB9mB,EAAMomB,EAAGC,EAAStmB,EAAGumB,EAAUC,EAAUC,GAAzD,GAAAE,GAAAD,EAAAE,CAAA,OAAAtkB,GAAAwD,EAAAa,KAAA,SAAAqgB,GAAA,cAAAA,EAAAngB,KAAAmgB,EAAAlgB,MAAA,aACd6f,GAAgB3E,KACpBkE,GAAwBjmB,GAEpB2mB,EAJc,cAAAK,GAAA7lB,EAAAkB,EAAAwD,EAAAC,KAIH,QAAAC,KAAA,MAAA1D,GAAAwD,EAAAa,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,WACTif,GAAY9lB,GADH,CAAA2G,EAAAE,KAAA,eAGX4f,EAAI1E,KAAoB2E,IAIf3mB,GAPE,CAAA4G,EAAAE,KAAA,eAQTmf,IAAehmB,GARN2G,EAAAE,KAAA,EASH0f,EAASF,EATN,YAULG,EAVK,CAAA7f,EAAAE,KAAA,cAAAF,GAAAE,KAAA,EAWD2f,GAXC,cAAA7f,GAAAoC,OAAA,wBAAApC,GAAAE,KAAA,GAeL0f,GAAUF,EAAUD,GAAKE,EAASG,EAAI1mB,GAAKqmB,EAftC,SAiBXN,GAAY9lB,GAAMgZ,IAAMmF,EAAWwI,EAjBxB,yBAAAhgB,GAAA2D,SAAAvE,EAAA1G,QAJG,yBAAA2nB,GAAA1lB,MAAAjC,KAAAkC,eAAAwlB,EAAAlgB,KAAA,EAwBZ8f,GAxBY,wBAAAI,GAAAzc,SAAAwc,EAAAznB,QAApB,iBAAAmL,EAAAyc,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,MAAAT,GAAAvlB,MAAAjC,KAAAkC,eA4BE2f,IAGFqG,MAAO/F,GACPnY,OAAQkY,GACR7X,aAAc8W,GACdta,QAASqV,EAETiM,sBAAuB,WACrB,MAAO3H,KAET4H,aAAc,WACZ,MAAOrK,IAETsK,gBAAiB,WACf,MAAO5K,IAET6K,WAAY,WACV,MAAO1I,IAET2I,UAAW,WACT,MAAOpI,KAETqG,gBAAiB,SAAUre,EAAGE,GAC5BgZ,GAAQlZ,EAAIA,EACZgX,EAAwBkC,GAAQhZ,EAAIA,EACpC8Z,GAAO,qBAAsBd,KAE/BmH,aAAc,SAAUrE,EAAWsE,EAAMC,EAAMtF,GAC7ClC,GAAW/Y,EAAIsgB,EACfvH,GAAW7Y,EAAIqgB,EACf3K,EAAiBoG,EACjBhB,GAAqBC,IAGvB/X,KAAM,WAEJ,IAAIiS,IAAWC,EAAf,CAIA,GAAIld,EAEJN,GAAK2W,UAAYA,EACjB3W,EAAKyW,SAAWA,EAChBzW,EAAK8iB,GAAKnM,EAAUqB,gBAAgBvB,EAAU,YAE9CwI,EAAmBxI,EAASa,UAC5BiG,GAAU,EAEV8B,EAAY1I,EAAUuC,iBACtB6F,EAAaM,EAAUzF,IACvBoF,EAAYK,EAAUxF,IACtB+E,EAAgBS,EAAUwF,UAC1B1F,EAASE,EAAU9F,MAEnBvZ,EAAK8kB,WAAanO,EAAUqB,gBAAgBvB,EAAU,qBACtDzW,EAAKwjB,UAAY7M,EAAUqB,gBAAgBhY,EAAK8kB,WAAY,mBAE5DnH,EAAkB3d,EAAKwjB,UAAUnK,MAGjCrZ,EAAK4oB,YAActK,IAChBxa,GAAI9D,EAAKwjB,UAAUza,SAAS,GAAIzB,KAAM,EAAGtB,OAAQ,IACjDlC,GAAI9D,EAAKwjB,UAAUza,SAAS,GAAIzB,KAAM,EAAGtB,OAAQ,IACjDlC,GAAI9D,EAAKwjB,UAAUza,SAAS,GAAIzB,KAAM,EAAGtB,OAAQ,IAIpDsY,EAAa,GAAGxa,GAAGuV,MAAMwP,QAAUvK,EAAa,GAAGxa,GAAGuV,MAAMwP,QAAU,OAEtElD,KAGA5H,GACE+K,OAAQ9oB,EAAK+oB,WAKbC,kBAAmB,WACjBpN,aAAa0D,GACbA,EAA4Bva,WAAW,WACjCqc,GAAchZ,IAAMpI,EAAK8kB,WAAWmE,aACtCjpB,EAAK+oB,cAEN,MAEL/D,OAAQwB,GACR0C,QAASnD,GACToD,MAAO7C,GAKT,IAAI8C,GAAW/J,EAAU5E,eAAiB4E,EAAUzE,cAAgByE,EAAUvE,aAM9E,KALKuE,EAAUgK,eAAkBhK,EAAUwF,YAAauE,IACtDjN,EAASrS,sBAAwBqS,EAASU,sBAAwB,GAI/Dvc,EAAI,EAAGA,EAAIohB,GAASzc,OAAQ3E,IAC/BN,EAAK,OAAS0hB,GAASphB,KAIzB,IAAIoW,EAAS,EACF1W,EAAKspB,GAAK,GAAI5S,GAAQ1W,EAAM2W,IAClCrL,OAGL8W,GAAO,eACP1E,EAAoBA,GAAqBvB,EAASnW,OAAS,GAEvD6D,MAAM6T,IAAsBA,EAAoB,GAAKA,GAAqBuE,QAC5EvE,EAAoB,GAEtB1d,EAAKkjB,SAAWqG,GAAW7L,IAGvB2B,EAAU5E,eAAiB4E,EAAUzE,gBACvC6G,IAAmB,GAGrBhL,EAASvR,aAAa,cAAe,SACjCiX,EAASkB,QACNoE,GAIHhL,EAAS4C,MAAMmQ,SAAW,SAH1B/S,EAAS4C,MAAMmQ,SAAW,WAC1B/S,EAAS4C,MAAM9Q,IAAMoO,EAAUY,aAAe,WAMpBzK,KAA1BsS,IACFgD,GAAO,iBACPhD,EAAwBF,EAAuBvI,EAAUY,aAI3D,IAAIkS,GAAc,aAiBlB,KAhBItN,EAASuN,YACXD,GAAetN,EAASuN,UAAY,KAElCvN,EAASjT,kBACXugB,GAAe,0BAEjBA,GAAe3K,EAAqB,cAAgB,gBACpD2K,GAAepK,EAAUgK,cAAgB,uBAAyB,GAClEI,GAAepK,EAAUxD,IAAM,aAAe,GAC9ClF,EAAUkB,SAASpB,EAAUgT,GAE7BzpB,EAAK+oB,aAGLnL,GAAwB,EACxB4D,GAAa,KACRlhB,EAAI,EAAGA,EA/oBA,EA+oBiBA,IAC3BojB,IAAgBpjB,EAAIsd,GAAwB2D,GAAWnZ,EAAGkW,EAAahe,GAAGwD,GAAGuV,MAG1E8F,IACHxI,EAAUE,KAAK7W,EAAK8kB,WAAYhH,EAAa9d,GAG/CmiB,GAAQ,mBAARpgB,EAAAkB,EAAAwD,EAAAC,KAA4B,QAAAijB,KAAA,MAAA1mB,GAAAwD,EAAAa,KAAA,SAAAsiB,GAAA,cAAAA,EAAApiB,KAAAoiB,EAAAniB,MAAA,aAAAmiB,GAAAniB,KAAA,EACpBzH,EAAK6pB,gBAAgBvL,EAAa,GAAIZ,EAAoB,EADtC,cAAAkM,GAAAniB,KAAA,EAEpBzH,EAAK6pB,gBAAgBvL,EAAa,GAAIZ,EAAoB,EAFtC,QAI1BY,EAAa,GAAGxa,GAAGuV,MAAMwP,QAAUvK,EAAa,GAAGxa,GAAGuV,MAAMwP,QAAU,QAElE1M,EAASW,OAIXrG,EAASqG,QAIX8H,IAd0B,wBAAAgF,GAAA1e,SAAAye,EAAA1pB,UAkB5BD,EAAK8pB,WAAWxL,EAAa,GAAIZ,GACjC1d,EAAK+pB,iBAEL3H,GAAO,aAEFX,KAWHrD,EAAsB4L,YAAY,WAC3BrD,IAAmB9G,GAAgBO,IAAepC,IAAmBhe,EAAKkjB,SAAS1Z,kBACtFxJ,EAAK+oB,cAEN,MAGLpS,EAAUkB,SAASpB,EAAU,mBAI/BwT,MAAO,WACA1M,IAILA,GAAU,EACVC,GAAgB,EAChB4E,GAAO,SACP2C,KAEAmF,GAAYlqB,EAAKkjB,SAAU,MAAM,EAAMljB,EAAKmqB,WAI9CA,QAAS,WACP/H,GAAO,WAEHgI,IACFxO,aAAawO,IAGf3T,EAASvR,aAAa,cAAe,QACrCuR,EAASa,UAAY2H,EAEjBb,GACFiM,cAAcjM,GAGhBzH,EAAUI,OAAO/W,EAAK8kB,WAAYhH,EAAa9d,GAG/C2W,EAAUI,OAAOzR,OAAQ,SAAUtF,GAEnCsqB,KAEAxD,KAEA5E,GAAa,MASfqI,MAAO,SAAUniB,EAAGE,EAAGkiB,GAChBA,IACCpiB,EAAImY,GAAelW,IAAIjC,EACzBA,EAAImY,GAAelW,IAAIjC,EACdA,EAAImY,GAAe7E,IAAItT,IAChCA,EAAImY,GAAe7E,IAAItT,GAGrBE,EAAIiY,GAAelW,IAAI/B,EACzBA,EAAIiY,GAAelW,IAAI/B,EACdA,EAAIiY,GAAe7E,IAAIpT,IAChCA,EAAIiY,GAAe7E,IAAIpT,IAI3B6Y,GAAW/Y,EAAIA,EACf+Y,GAAW7Y,EAAIA,EACf8a,MAGFlH,YAAa,SAAU7W,GACrBA,EAAIA,GAAKC,OAAOC,MACZwY,EAAqB1Y,EAAEwI,OACzBkQ,EAAqB1Y,EAAEwI,MAAMxI,IAKjColB,KAAM,SAAUzkB,GACdA,EAAQ+b,GAAa/b,EAErB,IAAI0kB,GAAO1kB,EAAQ0X,CACnB8D,IAAakJ,EAEbhN,EAAoB1X,EACpBhG,EAAKkjB,SAAWqG,GAAW7L,GAC3B2D,IAAsBqJ,EAEtB9G,GAAgBrC,GAAWnZ,EAAIiZ,IAG/ByF,KACArG,IAAuB,EAEvBzgB,EAAK+pB,kBAEPtiB,KAAM,WACJzH,EAAKyqB,KAAK/M,EAAoB,IAEhClW,KAAM,WACJxH,EAAKyqB,KAAK/M,EAAoB,IAIhCiN,mBAAoB,SAAUC,GAM5B,GALIA,GACFxI,GAAO,eAAgB,GAIrB9D,EAAa,GAAGxa,GAAGiF,SAAS9D,OAAQ,CACtC,GAAI4lB,GAAcvM,EAAa,GAAGxa,GAAGiF,SAAS,EAE5CyX,IADE7J,EAAUmB,SAAS+S,EAAa,mBACVA,EAAYxR,MAEZ,SAG1BmH,IAAwB,IAG1BD,IAAiBvgB,EAAKkjB,SAASiC,OAC/BlH,EAAkBD,EAAiBhe,EAAKkjB,SAAS1Z,iBAEjD2X,GAAW/Y,EAAImY,GAAeuK,OAAO1iB,EACrC+Y,GAAW7Y,EAAIiY,GAAeuK,OAAOxiB,EAEjCsiB,GACFxI,GAAO,gBAKX3X,oBAAqB,WACnB4T,GAAmB,CACnB,KAAK,GAAI/d,GAAI,EAAGA,EAv0BJ,EAu0BqBA,IAC3Bge,EAAahe,GAAGqI,OAClB2V,EAAahe,GAAGqI,KAAKoiB,aAAc,IAKzChB,eAAgB,SAAUiB,GAExB,GAAmB,IAAfxJ,GAAJ,CAIA,GACEyJ,GADEC,EAAU9gB,KAAK+gB,IAAI3J,GAGvB,MAAIwJ,GAAmBE,EAAU,GAAjC,CAKAlrB,EAAKkjB,SAAWqG,GAAW7L,GAC3BkE,IAAuB,EAEvBQ,GAAO,eAAgBZ,IAEnB0J,GAj2BQ,IAk2BVtN,GAAwB4D,IAAcA,GAAa,GAl2BzC,KAm2BV0J,EAn2BU,EAq2BZ,KAAK,GAAI5qB,GAAI,EAAGA,EAAI4qB,EAAS5qB,IACvBkhB,GAAa,GACfyJ,EAAa3M,EAAaiE,QAC1BjE,EAAa8M,GAAmBH,EAEhCrN,IACA8F,IAAgB9F,EAAuB,GAAK2D,GAAWnZ,EAAG6iB,EAAWnnB,GAAGuV,OACxErZ,EAAK8pB,WAAWmB,EAAYvN,EAAoBwN,EAAU5qB,EAAI,EAAI,KAElE2qB,EAAa3M,EAAa5L,MAC1B4L,EAAa+M,QAAQJ,GAErBrN,IACA8F,GAAe9F,EAAuB2D,GAAWnZ,EAAG6iB,EAAWnnB,GAAGuV,OAClErZ,EAAK8pB,WAAWmB,EAAYvN,EAAoBwN,EAAU5qB,EAAI,EAAI,GAMtE,IAAIkgB,IAAkD,IAAzBpW,KAAK+gB,IAAI3J,IAAmB,CAEvD,GAAI8J,GAAW/B,GAAWhL,EACtB+M,GAAS9hB,mBAAqBwU,IAChCoH,GAAmBkG,EAAUlK,IAC7BkC,GAAcgI,GACd/H,GAAoB+H,IAMxB9J,GAAa,EAEbxhB,EAAK2qB,qBAELpM,EAAiBb,EAEjB0E,GAAO,kBAGTmJ,+BAAA,QAAAA,GAAAC,GAAA,MAAAC,GAAAvpB,MAAAjC,KAAAkC,WAAA,GAAAspB,GAAA1pB,EAAAkB,EAAAwD,EAAAC,KAAqB,QAAAglB,GAAgBV,GAAhB,GAAAE,GAAAD,EAAA3qB,EAAAgrB,CAAA,OAAAroB,GAAAwD,EAAAa,KAAA,SAAAqkB,GAAA,cAAAA,EAAAnkB,KAAAmkB,EAAAlkB,MAAA,UAEA,IAAf+Z,GAFe,CAAAmK,EAAAlkB,KAAA,cAAAkkB,GAAAhiB,OAAA,oBAMfuhB,EAAU9gB,KAAK+gB,IAAI3J,MAGnBwJ,GAAmBE,EAAU,GATd,CAAAS,EAAAlkB,KAAA,cAAAkkB,GAAAhiB,OAAA,iBAcnB3J,EAAKkjB,SAAWqG,GAAW7L,GAC3BkE,IAAuB,EAEvBQ,GAAO,eAAgBZ,IAEnB0J,GAj6BQ,IAk6BVtN,GAAwB4D,IAAcA,GAAa,GAl6BzC,KAm6BV0J,EAn6BU,GAq6BH5qB,EAAI,CAvBM,cAuBHA,EAAI4qB,GAvBD,CAAAS,EAAAlkB,KAAA,cAwBb+Z,GAAa,GAxBA,CAAAmK,EAAAlkB,KAAA,eAyBfwjB,GAAa3M,EAAaiE,QAC1BjE,EAAa8M,GAAmBH,EAEhCrN,IACA8F,IAAgB9F,EAAuB,GAAK2D,GAAWnZ,EAAG6iB,EAAWnnB,GAAGuV,OA7BzDsS,EAAAlkB,KAAA,GA8BTzH,EAAK6pB,gBAAgBoB,EAAYvN,EAAoBwN,EAAU5qB,EAAI,EAAI,EA9B9D,SAAAqrB,EAAAlkB,KAAA,uBAgCfwjB,GAAa3M,EAAa5L,MAC1B4L,EAAa+M,QAAQJ,GAErBrN,IACA8F,GAAe9F,EAAuB2D,GAAWnZ,EAAG6iB,EAAWnnB,GAAGuV,OApCnDsS,EAAAlkB,KAAA,GAqCTzH,EAAK6pB,gBAAgBoB,EAAYvN,EAAoBwN,EAAU5qB,EAAI,EAAI,EArC9D,SAuBUA,IAvBVqrB,EAAAlkB,KAAA,iBA2Cf+Y,IAAkD,IAAzBpW,KAAK+gB,IAAI3J,MAEhC8J,EAAW/B,GAAWhL,GACtB+M,EAAS9hB,mBAAqBwU,IAChCoH,GAAmBkG,EAAUlK,IAC7BkC,GAAcgI,GACd/H,GAAoB+H,KAMxB9J,GAAa,EAEbxhB,EAAK2qB,qBAELpM,EAAiBb,EAEjB0E,GAAO,cA7DY,yBAAAuJ,GAAAzgB,SAAAwgB,EAAAzrB,QAArB,OAAAsrB,MAiEAxC,WAAY,SAAUyB,GAEpB,IAAK/I,IAAoBtF,EAASkB,MAAO,CACvC,GAAIuO,GAAgBjV,EAAUY,YAK9B,IAJI6H,IAA0BwM,IAC5BnV,EAAS4C,MAAM9Q,IAAMqjB,EAAgB,KACrCxM,EAAwBwM,IAErBpB,GAAS7I,GAAmBvZ,IAAM9C,OAAOumB,YAAclK,GAAmBrZ,IAAMhD,OAAOwmB,YAC1F,MAEFnK,IAAmBvZ,EAAI9C,OAAOumB,WAC9BlK,GAAmBrZ,EAAIhD,OAAOwmB,YAG9BrV,EAAS4C,MAAMpO,OAAS0W,GAAmBrZ,EAAI,KAkBjD,GAdA8Y,GAAchZ,EAAIpI,EAAK8kB,WAAWmE,YAClC7H,GAAc9Y,EAAItI,EAAK8kB,WAAWiH,aAElCvF,KAEAjF,GAAWnZ,EAAIgZ,GAAchZ,EAAIgC,KAAK4Z,MAAM5C,GAAchZ,EAAI+T,EAASE,SACvEkF,GAAWjZ,EAAI8Y,GAAc9Y,EAE7Bsb,GAAgBrC,GAAWnZ,EAAIiZ,IAE/Be,GAAO,oBAIsBtV,KAAzB8Q,EAAoC,CAMtC,IAAK,GAJDoO,GACFrjB,EACAsjB,EAEO3rB,EAAI,EAAGA,EAt/BN,EAs/BuBA,IAC/B0rB,EAAS1N,EAAahe,GACtBojB,IAAgBpjB,EAAIsd,GAAwB2D,GAAWnZ,EAAG4jB,EAAOloB,GAAGuV,OAEpE4S,EAASvO,EAAoBpd,EAAI,EAE7B6b,EAASK,MAAQyF,KAAiB,IACpCgK,EAASlK,GAAakK,IAIxBtjB,EAAO4gB,GAAW0C,GAIdtjB,IAAS0V,GAAoB1V,EAAKoiB,cAAgBpiB,EAAKwc,SAEzDnlB,EAAKksB,WAAWvjB,GAEhB3I,EAAK8pB,WAAWkC,EAAQC,GAGd,IAAN3rB,IACFN,EAAKkjB,SAAWva,EAChB3I,EAAK2qB,oBAAmB,IAG1BhiB,EAAKoiB,aAAc,IAEQ,IAAlBiB,EAAOhmB,OAAgBimB,GAAU,GAE1CjsB,EAAK8pB,WAAWkC,EAAQC,GAEtBtjB,GAAQA,EAAK6a,YACf4B,GAAmBzc,EAAMyY,IACzBkC,GAAc3a,GACd4a,GAAoB5a,GAIxB0V,IAAmB,EAGrBJ,EAAkBD,EAAiBhe,EAAKkjB,SAAS1Z,iBACjD+W,GAAiBvgB,EAAKkjB,SAASiC,OAE3B5E,KACFY,GAAW/Y,EAAImY,GAAeuK,OAAO1iB,EACrC+Y,GAAW7Y,EAAIiY,GAAeuK,OAAOxiB,EACrC8a,IAAqB,IAGvBhB,GAAO,WAIT+J,OAAQ,SAAUzG,EAAe0G,EAAaC,EAAOnF,EAAUoF,GASzDF,IACFnO,EAAkBD,EAClBqG,GAAcjc,EAAIgC,KAAK+gB,IAAIiB,EAAYhkB,GAAK+Y,GAAW/Y,EACvDic,GAAc/b,EAAI8B,KAAK+gB,IAAIiB,EAAY9jB,GAAK6Y,GAAW7Y,EACvDgc,GAAgBpD,GAAiBC,IAGnC,IAAIqE,GAAgBP,GAAoBS,GAAe,GACrDD,IAEFF,IAAqB,IAAKC,EAAeC,EAAeC,GACxDH,GAAqB,IAAKC,EAAeC,EAAeC,EAExD,IAAIlc,GAAmBwU,EACnBuO,GACFnkB,EAAG+Y,GAAW/Y,EACdE,EAAG6Y,GAAW7Y,EAGhBmc,IAAYgB,EAEZ,IAAI0B,GAAW,SAAUqF,GACX,IAARA,GACFxO,EAAiB0H,EACjBvE,GAAW/Y,EAAIqd,EAAcrd,EAC7B+Y,GAAW7Y,EAAImd,EAAcnd,IAE7B0V,GAAkB0H,EAAgBlc,GAAoBgjB,EAAMhjB,EAC5D2X,GAAW/Y,GAAKqd,EAAcrd,EAAImkB,EAAiBnkB,GAAKokB,EAAMD,EAAiBnkB,EAC/E+Y,GAAW7Y,GAAKmd,EAAcnd,EAAIikB,EAAiBjkB,GAAKkkB,EAAMD,EAAiBjkB,GAG7EgkB,GACFA,EAASE,GAGXpJ,GAA6B,IAARoJ,GAGnBH,GACFtF,GAAa,eAAgB,EAAG,EAAGsF,EAAOnF,GAAYvQ,EAAU8B,OAAOC,KAAKK,MAAOoO,GAEnFA,EAAS,KAwBbzlB,MACA8iB,MACAT,MACA0I,MACAC,MACAC,MACAC,MAEAC,MACAC,MAKAC,GAAuB,EACvBC,GAAehM,KACfiM,GAAmB,EAYnBhJ,GAAiBjD,KAGjBqD,GAAgBrD,KAChBkM,GAAmBlM,KAOnBmM,GAAiB,SAAU5I,EAAIC,GAC7B,MAAOD,GAAGnc,IAAMoc,EAAGpc,GAAKmc,EAAGjc,IAAMkc,EAAGlc,GAEtC8kB,GAAkB,SAAUC,EAAQC,GAClC,MAAOljB,MAAK+gB,IAAIkC,EAAOjlB,EAAIklB,EAAOllB,GArqCd,IAqqCwCgC,KAAK+gB,IAAIkC,EAAO/kB,EAAIglB,EAAOhlB,GArqCnE,IAuqCtBilB,GAA2B,SAAUhJ,EAAIC,GAGvC,MAFAsI,IAAW1kB,EAAIgC,KAAK+gB,IAAI5G,EAAGnc,EAAIoc,EAAGpc,GAClC0kB,GAAWxkB,EAAI8B,KAAK+gB,IAAI5G,EAAGjc,EAAIkc,EAAGlc,GAC3B8B,KAAKojB,KAAKV,GAAW1kB,EAAI0kB,GAAW1kB,EAAI0kB,GAAWxkB,EAAIwkB,GAAWxkB,IAE3EgiB,GAAsB,WAChBrK,IACFjB,EAAUiB,GACVA,EAAiB,OAGrBwN,GAAkB,QAAlBA,KACM5N,IACFI,EAAiBlB,EAAW0O,GAC5BC,OAGJC,GAAU,WACR,QAAgC,QAAvBxR,EAASmB,WAAuBU,IAAmBhe,EAAKkjB,SAAS1Z,mBAI5EokB,GAAkB,QAAlBA,GAA4B9pB,EAAI9B,GAC9B,SAAK8B,GAAMA,IAAOC,cAKdD,EAAGiC,aAAa,UAAYjC,EAAGiC,aAAa,SAAS6G,QAAQ,sBAAwB,KAIrF5K,EAAG8B,GACEA,EAGF8pB,EAAgB9pB,EAAG+pB,WAAY7rB,MAGxC8rB,MACAC,GAAgC,SAAU1oB,EAAG2oB,GAI3C,MAHAF,IAAYG,SAAWL,GAAgBvoB,EAAEO,OAAQuW,EAASgB,oBAE1DiF,GAAO,mBAAoB/c,EAAG2oB,EAAQF,IAC/BA,GAAYG,SAGrBC,GAAuB,SAAUxU,EAAOhY,GAItC,MAHAA,GAAE0G,EAAIsR,EAAMyU,MACZzsB,EAAE4G,EAAIoR,EAAM0U,MACZ1sB,EAAEia,GAAKjC,EAAM2U,WACN3sB,GAET4sB,GAAsB,SAAU/J,EAAIC,EAAI+J,GACtCA,EAAQnmB,EAAoB,IAAfmc,EAAGnc,EAAIoc,EAAGpc,GACvBmmB,EAAQjmB,EAAoB,IAAfic,EAAGjc,EAAIkc,EAAGlc,IAEzBkmB,GAAgB,SAAUC,EAAMrmB,EAAGE,GACjC,GAAImmB,EAAOjP,EAAyB,GAAI,CACtC,GAAI1e,GAAI+rB,GAAW5nB,OAAS,EAAI4nB,GAAWtK,UAC3CzhB,GAAEsH,EAAIA,EACNtH,EAAEwH,EAAIA,EACNukB,GAAWtc,KAAKzP,GAChB0e,EAAyBiP,IAI7BC,GAAqC,WACnC,GAAIlX,GAAU2J,GAAW7Y,EAAItI,EAAKkjB,SAASO,gBAAgBnb,CAC3D,OAAO,GAAI8B,KAAK+gB,IAAI3T,GAAW4J,GAAc9Y,EAAI,KAKnDqmB,MACAC,MACAC,MAEAC,GAAkB,SAAUzpB,GAE1B,KAAOwpB,GAAe5pB,OAAS,GAC7B4pB,GAAenc,KAgCjB,OA7BKmM,IAiBHkC,GAAe,EAEf4L,GAAc1e,QAAQ,SAAUvM,GACT,IAAjBqf,GACF8N,GAAe,GAAKntB,EACM,IAAjBqf,KACT8N,GAAe,GAAKntB,GAEtBqf,QAxBE1b,EAAEwI,KAAKjB,QAAQ,UAAY,EAEzBvH,EAAE0pB,SAAW1pB,EAAE0pB,QAAQ9pB,OAAS,IAClC4pB,GAAe,GAAKX,GAAqB7oB,EAAE0pB,QAAQ,GAAIJ,IACnDtpB,EAAE0pB,QAAQ9pB,OAAS,IACrB4pB,GAAe,GAAKX,GAAqB7oB,EAAE0pB,QAAQ,GAAIH,OAK3DD,GAASvmB,EAAI/C,EAAE8oB,MACfQ,GAASrmB,EAAIjD,EAAE+oB,MACfO,GAAShT,GAAK,GACdkT,GAAe,GAAKF,IAejBE,IAGTG,GAAuB,SAAU7K,EAAMJ,GAErC,GAAIkL,GAGFC,EAIAC,EACAC,EANAC,EAAYlO,GAAWgD,GAAQJ,EAAMI,GAErCmL,EAAMvL,EAAMI,GAAQ,EACpBoL,EAAwBtL,GAAe7b,EAAI2b,EAAM3b,EACjDonB,EAAiBvL,GAAe7b,EAAIwkB,GAAoBxkB,CAiB1D,IAXE6mB,EADEI,EAAY9O,GAAelW,IAAI8Z,IAASkL,EAAY9O,GAAe7E,IAAIyI,GAC3DhI,EAASe,eAKT,EAGhBmS,EAAYlO,GAAWgD,GAAQJ,EAAMI,GAAQ8K,GAGzC9S,EAASC,gBAAkB4B,IAAmBhe,EAAKkjB,SAAS1Z,oBAGzDgX,GAIqB,MAAfE,IAA+B,MAATyD,GAAiBpE,IAE5CuP,GACED,EAAY9O,GAAelW,IAAI8Z,KACjC8K,EAAc9S,EAASe,eACZqD,GAAelW,IAAI8Z,GAAQkL,EACtCH,EAAgB3O,GAAelW,IAAI8Z,GAAQjD,GAAgBiD,KAIxD+K,GAAiB,GAAKM,EAAiB,IAAMvN,KAAiB,GACjEmN,EAAmBG,EACfC,EAAiB,GAAKD,EAAwB3C,GAAoBxkB,IACpEgnB,EAAmBxC,GAAoBxkB,IAGrCmY,GAAelW,IAAIjC,IAAMmY,GAAe7E,IAAItT,IAC9C+mB,EAAYE,KAOZA,EAAY9O,GAAe7E,IAAIyI,KACjC8K,EAAc9S,EAASe,eACZmS,EAAY9O,GAAe7E,IAAIyI,GAC1C+K,EAAgBhO,GAAgBiD,GAAQ5D,GAAe7E,IAAIyI,KAGxD+K,GAAiB,GAAKM,EAAiB,IAAMvN,KAAiB,GACjEmN,EAAmBG,EAEfC,EAAiB,GAAKD,EAAwB3C,GAAoBxkB,IACpEgnB,EAAmBxC,GAAoBxkB,IAIrCmY,GAAelW,IAAIjC,IAAMmY,GAAe7E,IAAItT,IAC9C+mB,EAAYE,KAzClBD,EAAmBG,EAmDR,MAATpL,GAmBF,WAjByBrX,KAArBsiB,IACFxL,GAAgBwL,GAAkB,GAEhClP,EADEkP,IAAqBxC,GAAoBxkB,GAO3CmY,GAAelW,IAAIjC,IAAMmY,GAAe7E,IAAItT,QAC5B0E,KAAdqiB,EACFhO,GAAW/Y,EAAI+mB,EACLjP,IACViB,GAAW/Y,GAAK2b,EAAM3b,EAAI6mB,QAIFniB,KAArBsiB,CAKN3O,KAEEP,GACClC,EAAiBhe,EAAKkjB,SAASC,WACjChC,GAAWgD,IAASJ,EAAMI,GAAQ8K,IAW1CQ,GAAe,SAAUpqB,GAOvB,KAAe,cAAXA,EAAEwI,MAAwBxI,EAAEqqB,OAAS,GAAzC,CAIA,GAAIC,GAEF,WADAtqB,GAAEG,gBAIJ,KAAIoa,GAAyC,cAAXva,EAAEwI,KAApC,CAWA,GAPIkgB,GAA8B1oB,GAAG,IACnCA,EAAEG,iBAIJ4c,GAAO,eAEHvD,EAAsB,CACxB,GAAI+Q,GAAejZ,EAAU2B,YAAYqU,GAAetnB,EAAEwqB,UAAW,KACjED,GAAe,IACjBA,EAAejD,GAAc1nB,QAE/B0nB,GAAciD,IAAiBxnB,EAAG/C,EAAE8oB,MAAO7lB,EAAGjD,EAAE+oB,MAAOzS,GAAItW,EAAEwqB,WAI/D,GAAIC,GAAkBhB,GAAgBzpB,GACpC0qB,EAAYD,EAAgB7qB,MAE9Bkb,IAAiB,KAEjB2G,KAGKjH,GAA6B,IAAdkQ,IAGlBlQ,EAAcc,IAAe,EAC7BhK,EAAUE,KAAKvR,OAAQuY,EAAe7d,GAEtC0f,EACEoB,GACEF,GACEjB,EACEO,EACEF,EACEF,EACEC,GAAe,EAE7BW,GAAa,KAEb0B,GAAO,kBAAmB0N,GAE1BxL,GAAgBpD,GAAiBC,IAEjCF,GAAa7Y,EAAI6Y,GAAa3Y,EAAI,EAClCgc,GAAgBmI,GAAYqD,EAAgB,IAC5CxL,GAAgBoI,GAAaD,IAG7BG,GAAoBxkB,EAAImZ,GAAWnZ,EAAIiZ,GAEvCwL,KACEzkB,EAAGqkB,GAAWrkB,EACdE,EAAGmkB,GAAWnkB,IAGhBkX,EAAyBD,EAAoBoD,KAG7CsC,GAAoBjH,GAAgB,GAGpCsM,KACAmD,OAKGrN,IAAc2P,EAAY,IAAMtP,KAAyBP,IAC5DjC,EAAkBD,EAClB+B,GAAe,EAEfK,GAAaN,GAAgB,EAC7BmB,GAAa3Y,EAAI2Y,GAAa7Y,EAAI,EAElCkc,GAAgBpD,GAAiBC,IAEjCmD,GAAgB5iB,GAAGouB,EAAgB,IACnCxL,GAAgBE,GAAIsL,EAAgB,IAEpCxB,GAAoB5sB,GAAG8iB,GAAI0I,IAE3B7I,GAAcjc,EAAIgC,KAAK+gB,IAAI+B,GAAiB9kB,GAAK+Y,GAAW/Y,EAC5Dic,GAAc/b,EAAI8B,KAAK+gB,IAAI+B,GAAiB5kB,GAAK6Y,GAAW7Y,EAC5D+X,GAAsBC,GAAuBiN,GAAyB7rB,GAAG8iB,QAO7EwL,GAAc,SAAU3qB,GAItB,GAFAA,EAAEG,iBAEEqZ,EAAsB,CACxB,GAAI+Q,GAAejZ,EAAU2B,YAAYqU,GAAetnB,EAAEwqB,UAAW,KACrE,IAAID,GAAgB,EAAG,CACrB,GAAIluB,GAAIirB,GAAciD,EACtBluB,GAAE0G,EAAI/C,EAAE8oB,MACRzsB,EAAE4G,EAAIjD,EAAE+oB,OAIZ,GAAIvO,EAAa,CACf,GAAIoQ,GAAcnB,GAAgBzpB,EAClC,IAAKqb,IAAeV,GAAWI,GAe7BD,GAAiB8P,MAbjB,IAAIhM,GAAe7b,IAAMmZ,GAAWnZ,EAAIiZ,GAEtCX,GAAa,QACR,CACL,GAAIgK,GAAOtgB,KAAK+gB,IAAI8E,EAAY,GAAG7nB,EAAIqkB,GAAWrkB,GAAKgC,KAAK+gB,IAAI8E,EAAY,GAAG3nB,EAAImkB,GAAWnkB,EAE1F8B,MAAK+gB,IAAIT,IAtaI,KAuafhK,GAAagK,EAAO,EAAI,IAAM,IAC9BvK,GAAiB8P,MAU3BvC,GAAkB,WAEhB,GAAKvN,GAAL,CAIA,GAAI4P,GAAY5P,GAAelb,MAE/B,IAAkB,IAAd8qB,EASJ,GALAzL,GAAgB5iB,GAAGye,GAAe,IAElC4D,GAAM3b,EAAI1G,GAAE0G,EAAIqkB,GAAWrkB,EAC3B2b,GAAMzb,EAAI5G,GAAE4G,EAAImkB,GAAWnkB,EAEvB8X,IAAc2P,EAAY,EAAG,CAO/B,GAJAtD,GAAWrkB,EAAI1G,GAAE0G,EACjBqkB,GAAWnkB,EAAI5G,GAAE4G,GAGZyb,GAAM3b,IAAM2b,GAAMzb,GAAK6kB,GAAehN,GAAe,GAAIqE,IAC5D,MAGFF,IAAgBE,GAAIrE,GAAe,IAG9BJ,IACHA,GAAe,EACfqC,GAAO,sBAIT,IAAI8N,GAAiB3C,GAAyB7rB,GAAG8iB,IAE7CJ,EAAY+L,GAAoBD,EAGhC9L,GAAYpkB,EAAKkjB,SAAS1Z,iBAAmBxJ,EAAKkjB,SAAS1Z,iBAAmB,KAChFsX,IAAsB,EAIxB,IAAIsP,GAAe,EACjBC,EAAehL,KACfiL,EAAehL,IAEjB,IAAIlB,EAAYiM,EAEd,GAAIlU,EAASM,eAAiBqE,IAAuB7C,GAAmBje,EAAKkjB,SAAS1Z,iBAAkB,CAEtG,GAAI+mB,GAAYF,EAAejM,EAC3BoM,EAAU,EAAID,GAAaF,EAAe,IAE9CzN,IAAgB4N,GAChBpO,GAAO,eAAgBoO,GACvB5P,IAAkB,MAElBwP,IAAgBC,EAAejM,GAAaiM,EACxCD,EAAe,IACjBA,EAAe,GAEjBhM,EAAYiM,EAAeD,GAAgBC,EAAe,OAGnDjM,GAAYkM,IAErBF,GAAgBhM,EAAYkM,IAAgC,EAAfD,GACzCD,EAAe,IACjBA,EAAe,GAEjBhM,EAAYkM,EAAeF,EAAeC,EAGxCD,GAAe,IACjBA,EAAe,GAIjB/P,GAAsB6P,EAGtB5B,GAAoB5sB,GAAG8iB,GAAIwI,IAG3B/L,GAAa7Y,GAAK4kB,GAAa5kB,EAAI8kB,GAAiB9kB,EACpD6Y,GAAa3Y,GAAK0kB,GAAa1kB,EAAI4kB,GAAiB5kB,EACpDgc,GAAgB4I,GAAkBF,IAElC7L,GAAW/Y,EAAI8b,GAAoB,IAAKE,GACxCjD,GAAW7Y,EAAI4b,GAAoB,IAAKE,GAExC1E,EAAe0E,EAAYpG,EAC3BA,EAAiBoG,EACjBhB,SAEK,CAIL,IAAK1C,GACH,MAqBF,IAlBIC,KACFA,IAAe,EAIXvW,KAAK+gB,IAAIpH,GAAM3b,IAniBA,KAoiBjB2b,GAAM3b,GAAK+X,GAAe,GAAG/X,EAAIskB,GAAYtkB,GAG3CgC,KAAK+gB,IAAIpH,GAAMzb,IAviBA,KAwiBjByb,GAAMzb,GAAK6X,GAAe,GAAG7X,EAAIokB,GAAYpkB,IAIjDmkB,GAAWrkB,EAAI1G,GAAE0G,EACjBqkB,GAAWnkB,EAAI5G,GAAE4G,EAGD,IAAZyb,GAAM3b,GAAuB,IAAZ2b,GAAMzb,EACzB,MAGF,IAAmB,MAAfoY,IAAsBvE,EAASQ,sBAC5BgR,KAAW,CACd1M,GAAa3Y,GAAKyb,GAAMzb,EACxB6Y,GAAW7Y,GAAKyb,GAAMzb,CAEtB,IAAImoB,GAAe/B,IAOnB,OALA/O,IAAyB,EACzByC,GAAO,iBAAkBqO,GAEzB7N,GAAgB6N,OAChBrN,MAKJoL,GAAc7L,KAAmBjhB,GAAE0G,EAAG1G,GAAE4G,GAExC0X,GAAS,EACTO,GAAiBvgB,EAAKkjB,SAASiC,MAE/B,IAAIuL,GAAoB1B,GAAqB,IAAKjL,GAC7C2M,KACH1B,GAAqB,IAAKjL,IAE1BU,GAAYtD,IACZiC,SAQNuN,cAAA,GAAAC,GAAA7uB,EAAAkB,EAAAwD,EAAAC,KAAiB,QAAAmqB,GAAgBxrB,GAAhB,GAAAyrB,GAAAlB,EAAAmB,EAAAC,EAAAC,EAAAlB,EAAAmB,EAAAT,EAAAU,EAAAC,EAAAC,CAAA,OAAApuB,GAAAwD,EAAAa,KAAA,SAAAgqB,GAAA,cAAAA,EAAA9pB,KAAA8pB,EAAA7pB,MAAA,WAEX4X,EAAUzE,aAFC,CAAA0W,EAAA7pB,KAAA,YAITmY,GAAyC,YAAXva,EAAEwI,KAJvB,CAAAyjB,EAAA7pB,KAAA,cAAA6pB,GAAA3nB,OAAA,iBAYTtE,EAAEwI,KAAKjB,QAAQ,UAAY,IAC7BgP,aAAagE,GACbA,EAA6B7a,WAAW,WACtC6a,EAA6B,GAC5B,KAhBQ,WAqBfwC,GAAO,aAEH2L,GAA8B1oB,GAAG,IACnCA,EAAEG,iBAKAqZ,IACE+Q,EAAejZ,EAAU2B,YAAYqU,GAAetnB,EAAEwqB,UAAW,QAEjD,IAClBiB,EAAenE,GAAc4E,OAAO3B,EAAc,GAAG,GAEjD3V,UAAUC,kBACR6W,GACFS,EAAG,QACHC,EAAG,QACHC,EAAG,OAELZ,EAAajjB,KAAOkjB,EAAgB1rB,EAAEssB,aAEjCb,EAAajjB,OAChBijB,EAAajjB,KAAOxI,EAAEssB,aAAe,UAGvCb,EAAajjB,KAAOxI,EAAEssB,aAAe,SAMvCX,EAAYlC,GAAgBzpB,GAE9B0qB,EAAYiB,EAAU/rB,OAET,YAAXI,EAAEwI,OACJkiB,EAAY,GAII,IAAdA,EA9DW,CAAAuB,EAAA7pB,KAAA,eA+Db0Y,IAAiB,KA/DJmR,EAAA3nB,OAAA,UAgEN,EAhEM,YAoEG,IAAdomB,GACFzL,GAAgBoI,GAAasE,EAAU,IAKvB,IAAdjB,GAAoBrP,IAAeD,KAChCqQ,IACY,YAAXzrB,EAAEwI,KACJijB,GAAgB1oB,EAAG/C,EAAE8oB,MAAO7lB,EAAGjD,EAAE+oB,MAAOvgB,KAAM,SACrCxI,EAAEusB,gBAAkBvsB,EAAEusB,eAAe,KAC9Cd,GAAgB1oB,EAAG/C,EAAEusB,eAAe,GAAGzD,MAAO7lB,EAAGjD,EAAEusB,eAAe,GAAGxD,MAAOvgB,KAAM,WAItFuU,GAAO,eAAgB/c,EAAGyrB,IAIxBI,GAAmB,EAGL,IAAdnB,IACFlQ,GAAc,EACdlJ,EAAUI,OAAOzR,OAAQuY,EAAe7d,GAExCsqB,KAEIlK,GAEF8Q,EAAkB,GACa,IAAtBjE,KACTiE,EAAkBvO,KAAoBsK,KAG1CA,GAAiC,IAAd8C,EAAkBpN,MAAqB,EAGxDsO,GADuB,IAArBC,GAA0BA,EAAkB,IAChC,OAEA,QAGZ9Q,IAAc2P,EAAY,IAC5B3P,IAAa,EAGK,IAAd2P,IACFkB,EAAc,iBAEhB7O,GAAO,qBAGTjC,GAAiB,KACZH,GAAWD,GAAiBU,IAAyBd,EA1H3C,CAAA2R,EAAA7pB,KAAA,eAAA6pB,GAAA3nB,OAAA,qBA+Hfmd,KAGKrH,IACHA,EAAmBoS,MAGrBpS,EAAiBqS,oBAAoB,MAGjCnS,EAzIW,CAAA2R,EAAA7pB,KAAA,eA2ITgpB,GAAe/B,KAEf+B,EAAetU,EAASS,kBAC1B5c,EAAKiqB,SAEDkH,EAAahQ,GAAW7Y,EAC1B8oB,EAAmBvQ,GAErBkG,GAAa,eAAgB,EAAG,EAAG,IAAKpQ,EAAU8B,OAAOQ,MAAMN,IAAK,SAAU6T,GAE5ErL,GAAW7Y,GAAKtI,EAAKkjB,SAASO,gBAAgBnb,EAAI6oB,GAAc3E,EAAM2E,EAEtEvO,IAAiB,EAAIwO,GAAoB5E,EAAM4E,GAC/ChO,OAGFhB,GAAO,iBAAkB,IA3JdkP,EAAA3nB,OAAA,sBAmKVuW,IAAsBO,IAAuC,IAAdsP,EAnKrC,CAAAuB,EAAA7pB,KAAA,eAAA6pB,GAAA7pB,KAAA,GAoKWsqB,GAA8Bd,EAAaxR,EApKtD,cAoKT4R,EApKSC,EAAA3pB,MAAA,CAAA2pB,EAAA7pB,KAAA,eAAA6pB,GAAA3nB,OAAA,kBAwKbsnB,EAAc,eAxKD,aA4KXxQ,GA5KW,CAAA6Q,EAAA7pB,KAAA,eAAA6pB,GAAA3nB,OAAA,qBAiLK,UAAhBsnB,EAjLW,CAAAK,EAAA7pB,KAAA,eAkLbuqB,MAlLaV,EAAA3nB,OAAA,mBAuLVuW,GAAsBlC,EAAiBhe,EAAKkjB,SAASC,UACxD8O,GAAoBxS,EAxLP,yBAAA6R,GAAApmB,SAAA2lB,EAAA5wB,QAAjB,iBAAAiyB,GAAA,MAAAtB,GAAA1uB,MAAAjC,KAAAkC,eA+LA0vB,GAAgC,WAE9B,GAAIM,GACFC,EAGEzwB,GACF0wB,mBACAC,iBACAC,kBACAC,iBACAC,wBACAC,0BACAC,6BACAC,kBACAC,uBACAC,mBACAhB,oBAAqB,SAAU3N,GAGzB0I,GAAW5nB,OAAS,GACtBktB,EAAoBxP,KAAoBnD,EAAyB,GACjE4S,EAAiBvF,GAAWA,GAAW5nB,OAAS,GAAGkf,KAEnDgO,EAAoBxP,KAAoBpD,EACxC6S,EAAiB1F,GAAYvI,IAE/BxiB,EAAE0wB,gBAAgBlO,GAAQsI,GAAWtI,GAAQiO,EAC7CzwB,EAAE2wB,cAAcnO,GAAQ/Z,KAAK+gB,IAAIxpB,EAAE0wB,gBAAgBlO,IAC/CxiB,EAAE2wB,cAAcnO,GAAQ,GAC1BxiB,EAAE4wB,eAAepO,GAAQxiB,EAAE0wB,gBAAgBlO,GAAQgO,EAEnDxwB,EAAE4wB,eAAepO,GAAQ,EAEvB/Z,KAAK+gB,IAAIxpB,EAAE4wB,eAAepO,IAAS,KACrCxiB,EAAE4wB,eAAepO,GAAQ,GAG3BxiB,EAAE6wB,cAAcrO,GAAQ,IACxBxiB,EAAE8wB,qBAAqBtO,GAAQ,EAAIxiB,EAAE6wB,cAAcrO,GACnDxiB,EAAE+wB,uBAAuBvO,GAAQ,GAGnC4O,8BAA+B,SAAU5O,EAAMkI,GACxC1qB,EAAEmxB,gBAAgB3O,KAEjBhD,GAAWgD,GAAQ5D,GAAelW,IAAI8Z,GACxCxiB,EAAEkxB,oBAAoB1O,GAAQ5D,GAAelW,IAAI8Z,GAExChD,GAAWgD,GAAQ5D,GAAe7E,IAAIyI,KAC/CxiB,EAAEkxB,oBAAoB1O,GAAQ5D,GAAe7E,IAAIyI,QAGfrX,KAAhCnL,EAAEkxB,oBAAoB1O,KACxBxiB,EAAE6wB,cAAcrO,GAAQ,GACxBxiB,EAAE8wB,qBAAqBtO,GAAQ,EAAIxiB,EAAE6wB,cAAcrO,GAC/CxiB,EAAEgxB,0BAA0BxO,GAAQ,MAEtCxiB,EAAE4wB,eAAepO,GAAQ,EACzBxiB,EAAEmxB,gBAAgB3O,IAAQ,EAE1B4C,GAAa,gBAAkB5C,EAAMhD,GAAWgD,GAC9CxiB,EAAEkxB,oBAAoB1O,GACtBkI,GAAS,IACT1V,EAAU8B,OAAOC,KAAKC,IACtB,SAAUqa,GACR7R,GAAWgD,GAAQ6O,EACnB5P,WAUZ6P,oBAAqB,SAAU9O,GACxBxiB,EAAEmxB,gBAAgB3O,KACrBxiB,EAAE+wB,uBAAuBvO,GAAQxiB,EAAE+wB,uBAAuBvO,IAASxiB,EAAE6wB,cAAcrO,GACjFxiB,EAAE8wB,qBAAqBtO,GACvBxiB,EAAE8wB,qBAAqBtO,GAAQxiB,EAAEuxB,SAAW,IAE9CvxB,EAAEgxB,0BAA0BxO,GAAQ/Z,KAAK+gB,IAAIxpB,EAAE4wB,eAAepO,GAAQxiB,EAAE+wB,uBAAuBvO,IAC/FxiB,EAAEixB,eAAezO,GAAQxiB,EAAE4wB,eAAepO,GAAQxiB,EAAE+wB,uBAAuBvO,GAAQxiB,EAAEuxB,SACrF/R,GAAWgD,IAASxiB,EAAEixB,eAAezO,KAKzCgP,YAAa,WACX,GAAIzM,GAAY0M,UACd1M,GAAY0M,QAAQxZ,IAAMmF,EAAWpd,EAAEwxB,aAEvCxxB,EAAE6qB,IAAM7J,KACRhhB,EAAEuxB,SAAWvxB,EAAE6qB,IAAM7qB,EAAE0xB,QACvB1xB,EAAE0xB,QAAU1xB,EAAE6qB,IAEd7qB,EAAEsxB,oBAAoB,KACtBtxB,EAAEsxB,oBAAoB,KAEtB7P,KAEAzhB,EAAEoxB,8BAA8B,KAChCpxB,EAAEoxB,8BAA8B,KAG5BpxB,EAAEgxB,0BAA0BvqB,EAAI,KAAQzG,EAAEgxB,0BAA0BrqB,EAAI,KAQ1E,MALA6Y,IAAW/Y,EAAIgC,KAAK4Z,MAAM7C,GAAW/Y,GACrC+Y,GAAW7Y,EAAI8B,KAAK4Z,MAAM7C,GAAW7Y,GACrC8a,SAEAwD,IAAe,YAOvB,OAAOjlB,IAGTswB,GAAsB,SAAUqB,GAU9B,GARAA,EAASxB,oBAAoB,KAE7BvR,GAAiBvgB,EAAKkjB,SAASiC,OAE/BmO,EAAST,uBACTS,EAASR,mBAGL1oB,KAAK+gB,IAAImI,EAASf,eAAenqB,IAAM,KAAQgC,KAAK+gB,IAAImI,EAASf,eAAejqB,IAAM,IAMxF,MALAgrB,GAASX,0BAA0BvqB,EAAIkrB,EAASX,0BAA0BrqB,EAAI,EAG9EgrB,EAASP,8BAA8B,KACvCO,EAASP,8BAA8B,MAChC,CAITlM,IAAwB,WACxByM,EAASD,QAAU1Q,KACnB2Q,EAASH,eAIXpB,cAAA,GAAAwB,GAAAxxB,EAAAkB,EAAAwD,EAAAC,KAAgC,QAAA8sB,GAAgBvC,EAAaxR,GAA7B,GAAA4R,GAAAoC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,CAAA,OAAA9wB,GAAAwD,EAAAa,KAAA,SAAA0sB,GAAA,cAAAA,EAAAxsB,KAAAwsB,EAAAvsB,MAAA,aAEzBgZ,MACHsM,GAAuBrP,GAML,UAAhBuT,IACEyC,EAAiBjH,GAAWrkB,EAAIskB,GAAYtkB,EAC9CurB,EAAkBlU,EAAiB6S,cAAclqB,EAAI,GAInDsrB,EA37Be,KA47BhBC,GAAmBlU,EAAiB4S,gBAAgBjqB,EAAI,IAEzDqrB,GAAa,EACJC,GA/7BQ,KAg8BhBC,GAAmBlU,EAAiB4S,gBAAgBjqB,GAAK,MAE1DqrB,EAAY,IAMZA,IAEF/V,GAAqB+V,EAEjB/V,EAAoB,GACtBA,EAAoBvB,EAASK,KAAOyF,KAAiB,EAAI,EACzD2R,GAAa,GACJlW,GAAqBuE,OAC9BvE,EAAoBvB,EAASK,KAAO,EAAIyF,KAAiB,EACzD2R,GAAa,GAGVA,IAAczX,EAASK,OAC1BgF,IAAciS,EACdpS,IAAsBoS,EACtBpC,GAAc,IAMdwC,EAAatS,GAAWnZ,EAAIiZ,GAC5ByS,EAAgB1pB,KAAK+gB,IAAI0I,EAAa5P,GAAe7b,GAIpDipB,GAAewC,EAAa5P,GAAe7b,GAAMqX,EAAiB8S,eAAenqB,EAAI,GAIxF2rB,EAAqB3pB,KAAK+gB,IAAI1L,EAAiB8S,eAAenqB,GAAK,EACjE0rB,EAAgB1pB,KAAK+gB,IAAI1L,EAAiB8S,eAAenqB,GACzD,IAEF2rB,EAAqB3pB,KAAKC,IAAI0pB,EAAoB,KAClDA,EAAqB3pB,KAAKsR,IAAIqY,EAAoB,MAPlDA,EAAqB,IAUnBhH,KAAyBrP,IAC3B2T,GAAc,GAGhB5Q,IAAuB,EAEvB2B,GAAO,uBAxEuB4R,EAAAvsB,KAAA,GA0ExB+f,GAAkB,aAAcvD,GAAe7b,EAAGyrB,EAAYE,EAAoBpd,EAAU8B,OAAOQ,MAAMN,IAC7GiL,GADI7hB,EAAAkB,EAAAwD,EAAAC,KAEJ,QAAAutB,KAAA,MAAAhxB,GAAAwD,EAAAa,KAAA,SAAA4sB,GAAA,cAAAA,EAAA1sB,KAAA0sB,EAAAzsB,MAAA,UACEqf,KACArG,IAAuB,EACvBsM,IAAwB,GAEpBsE,GAAetE,KAAyBrP,EAL9C,CAAAwW,EAAAzsB,KAAA,cAAAysB,GAAAzsB,KAAA,EAMUzH,EAAKurB,qBANf,QASEnJ,GAAO,yBATT,wBAAA8R,GAAAhpB,SAAA+oB,EAAAh0B,SA5E4B,aAyF1BoxB,EAzF0B,CAAA2C,EAAAvsB,KAAA,eAAAusB,GAAAvsB,KAAA,GA0FtBzH,EAAKurB,qBAAoB,EA1FH,eAAAyI,GAAArqB,OAAA,SA6FvB0nB,EA7FuB,yBAAA2C,GAAA9oB,SAAAsoB,EAAAvzB,QAAhC,iBAAAk0B,EAAAC,GAAA,MAAAb,GAAArxB,MAAAjC,KAAAkC,eAgGAguB,GAAsB,SAAUkE,GAC9B,MAAO,GAAI/T,GAAuB+T,EAAkBpW,GAItD+T,GAAuB,WACrB,GAAItM,GAAgB1H,EAClBqS,EAAehL,KACfiL,EAAehL,IAEbtH,GAAiBqS,EACnB3K,EAAgB2K,EACPrS,EAAiBsS,IAC1B5K,EAAgB4K,EAGlB,IACEnJ,GACAmN,EAAiBzT,EAEnB,OAAID,MAAoBlB,IAAiBoB,IAAuB9C,EAAiBqS,GAE/ErwB,EAAKiqB,SACE,IAGLrJ,KACFuG,EAAW,SAAUqF,GACnB5J,IAZc,EAYiB0R,GAAkB9H,EAAM8H,KAI3Dt0B,EAAKmsB,OAAOzG,EAAe,EAAG,IAAK/O,EAAU8B,OAAOQ,MAAMN,IAAKwO,IACxD,GAIXtF,IAAgB,YACdC,eAEEyS,aAAc,WAGZ,GAAIC,GAAgB,SAAUC,EAAMC,EAAMC,EAAMC,EAAIC,GAClDrW,EAAkBiW,EAAOC,EACzBjW,EAAiBgW,EAAOE,EACxBjW,EAAgB+V,EAAOG,EAErBjW,EADEkW,EACiBJ,EAAOI,EAEP,GAIvBhW,GAAuBQ,EAAUtF,aAC7B8E,GAAwBQ,EAAU3F,QAEpC2F,EAAU3F,OAAQ,GAGhBmF,EACE5E,UAAUC,iBAEZsa,EAAc,YAAa,OAAQ,OAAQ,KAAM,UAEjDA,EAAc,UAAW,OAAQ,OAAQ,KAAM,UAExCnV,EAAU3F,OACnB8a,EAAc,QAAS,QAAS,OAAQ,MAAO,UAC/C1V,GAAqB,GAErB0V,EAAc,QAAS,OAAQ,OAAQ,MAGzC3W,EAAgBY,EAAiB,IAAMC,EAAgB,IAAMC,EAC7Db,EAAcU,EAEVK,IAAyBC,IAC3BA,EAAsB7E,UAAU6a,eAAiB,GAAO7a,UAAU8a,iBAAmB,GAGvF/0B,EAAKuK,kBAAoBuU,EAEzBf,EAAqBS,GAAmBiR,GACxC1R,EAAqBU,GAAkBuR,GACvCjS,EAAqBW,GAAiBiS,GAElChS,IACFZ,EAAqBY,GAAoBZ,EAAqBW,IAI5DW,EAAU3F,QACZoE,GAAe,aACfD,GAAiB,qBACjBE,EAAqBiX,UAAYjX,EAAqBS,GACtDT,EAAqBkX,UAAYlX,EAAqBU,GACtDV,EAAqBmX,QAAUnX,EAAqBW,IAGjDI,IAEH3C,EAASC,gBAAiB,MAuBlC,IAAIgO,IAmLA+K,GAGFC,GACAzF,GAYEpG,GACFtH,GACAoT,GApMAnL,GAAc,SAAUvhB,EAAM2sB,EAAK3c,EAAK4c,GAElCnL,IACFxO,aAAawO,IAGfuF,IAAsB,EACtByF,IAAqB,CAIrB,IAAII,EACA7sB,GAAK8sB,eACPD,EAAc7sB,EAAK8sB,cACnB9sB,EAAK8sB,cAAgB,MAErBD,EAAcrZ,EAASvU,kBAAoBuU,EAASvU,iBAAiB8V,EAGvE,IAAIgY,GAAW/c,EAAMwD,EAASU,sBAAwBV,EAASrS,sBAE3Dsd,EAAa,WACfR,GAAe,eACVjO,GAQH3Y,EAAKyW,SAASkf,gBAAgB,SAC9B31B,EAAK8iB,GAAG6S,gBAAgB,WARxB/S,GAAgB,GACZ0S,IACFA,EAAIjc,MAAMwP,QAAU,SAEtBlS,EAAUkB,SAASpB,EAAU,qBAC7B2L,GAAO,eAAiBzJ,EAAM,SAAW,WAMvC4c,GACFA,IAEF5F,IAAsB,EAIxB,KAAK+F,IAAaF,OAAiC1oB,KAAlB0oB,EAAYptB,EAmB3C,MAjBAga,IAAO,eAAiBzJ,EAAM,MAAQ,OAEtCqF,EAAiBrV,EAAKa,iBACtB8a,GAAgBnD,GAAYxY,EAAK8a,iBACjCL,KAEA3M,EAAS4C,MAAMwJ,QAAUlK,EAAM,EAAI,EACnCiK,GAAgB,QAEZ8S,EACF3wB,WAAW,WACTqiB,KACCsO,GAEHtO,MAMiB,WACnB,GAAIwO,GAAenY,EACjBoY,GAAkB71B,EAAKkjB,SAAS9c,KAAOpG,EAAKkjB,SAAS4S,WAAa3Z,EAASjT,eAGzEP,GAAKotB,UACPptB,EAAKotB,QAAQ1c,MAAM2c,yBAA2B,UAG3Crd,IACHqF,EAAiBwX,EAAYhtB,EAAIG,EAAKH,EACtC2Y,GAAW/Y,EAAIotB,EAAYptB,EAC3B+Y,GAAW7Y,EAAIktB,EAAYltB,EAAI4W,EAE/Blf,EAAK61B,EAAiB,WAAa,MAAMxc,MAAMwJ,QAAU,KACzDO,MAGFyD,GAAwB,eAEpBlO,IAAQid,GACVjf,EAAUc,YAAYhB,EAAU,qBAG9Bof,IACEld,EACFhC,GAAWif,EAAe,SAAW,OAAS,SAASnf,EAAU,yBAEjE1R,WAAW,WACT4R,EAAUkB,SAASpB,EAAU,0BAC5B,KAIP2T,GAAqBrlB,WAAW,WAK9B,GAHAqd,GAAO,eAAiBzJ,EAAM,MAAQ,OAGjCA,EAmBE,CAGL,GAAI+M,GAAgB8P,EAAYhtB,EAAIG,EAAKH,EACvC+jB,GACEnkB,EAAG+Y,GAAW/Y,EACdE,EAAG6Y,GAAW7Y,GAEhBkB,EAAmBwU,EACnBiY,EAAkBpV,GAClBsG,EAAW,SAAUqF,GAEP,IAARA,GACFxO,EAAiB0H,EACjBvE,GAAW/Y,EAAIotB,EAAYptB,EAC3B+Y,GAAW7Y,EAAIktB,EAAYltB,EAAI8W,IAE/BpB,GAAkB0H,EAAgBlc,GAAoBgjB,EAAMhjB,EAC5D2X,GAAW/Y,GAAKotB,EAAYptB,EAAImkB,EAAiBnkB,GAAKokB,EAAMD,EAAiBnkB,EAC7E+Y,GAAW7Y,GAAKktB,EAAYltB,EAAI8W,EAAwBmN,EAAiBjkB,GAAKkkB,EAAMD,EAAiBjkB,GAGvG8a,KACIyS,EACFpf,EAAS4C,MAAMwJ,QAAU,EAAI2J,EAE7B5J,GAAgBqT,EAAkBzJ,EAAMyJ,GAI1CL,GACF7O,GAAa,cAAe,EAAG,EAAG2O,EAAU/e,EAAU8B,OAAOQ,MAAMN,IAAKwO,EAAUC,IAElFD,EAAS,GACTiD,GAAqBrlB,WAAWqiB,EAAYsO,EAAW,SA9CzD1X,GAAiBrV,EAAKa,iBACtB8a,GAAgBnD,GAAYxY,EAAK8a,iBACjCL,KACAR,GAAgB,GAEZiT,EACFpf,EAAS4C,MAAMwJ,QAAU,EAEzBD,GAAgB,GAGlBwH,GAAqBrlB,WAAWqiB,EAAYsO,EAAW,KAuCxD/c,EAAM,GAAK,QAmBlBud,MACAC,MAGAC,IACEpwB,MAAO,EACPqwB,SAAU,wGACVC,yBAAyB,EACzBC,SAAU,EAAG,GACbC,cAAe,WACb,MAAOrB,IAAOlwB,SAQlBwxB,GAAiB,WACf,OACE3L,QAAS1iB,EAAG,EAAGE,EAAG,GAClBoT,KAAMtT,EAAG,EAAGE,EAAG,GACf+B,KAAMjC,EAAG,EAAGE,EAAG,KAGnBouB,GAAgC,SAAU/tB,EAAMguB,EAAiBC,GAC/D,GAAIzR,GAASxc,EAAKwc,MAGlBA,GAAO2F,OAAO1iB,EAAIgC,KAAK4Z,OAAOkS,GAAiB9tB,EAAIuuB,GAAmB,GACtExR,EAAO2F,OAAOxiB,EAAI8B,KAAK4Z,OAAOkS,GAAiB5tB,EAAIsuB,GAAmB,GAAKjuB,EAAKkuB,KAAKtuB,IAGrF4c,EAAOzJ,IAAItT,EAAKuuB,EAAkBT,GAAiB9tB,EACjDgC,KAAK4Z,MAAMkS,GAAiB9tB,EAAIuuB,GAChCxR,EAAO2F,OAAO1iB,EAEhB+c,EAAOzJ,IAAIpT,EAAKsuB,EAAkBV,GAAiB5tB,EACjD8B,KAAK4Z,MAAMkS,GAAiB5tB,EAAIsuB,GAAmBjuB,EAAKkuB,KAAKtuB,IAC7D4c,EAAO2F,OAAOxiB,EAGhB6c,EAAO9a,IAAIjC,EAAKuuB,EAAkBT,GAAiB9tB,EAAK,EAAI+c,EAAO2F,OAAO1iB,EAC1E+c,EAAO9a,IAAI/B,EAAKsuB,EAAkBV,GAAiB5tB,EAAKK,EAAKkuB,KAAKtuB,IAAM4c,EAAO2F,OAAOxiB,GAExF8c,GAAqB,SAAUzc,EAAM2B,EAAc8Z,GAEjD,GAAIzb,EAAKvC,MAAQuC,EAAKmtB,UAAW,CAC/B,GAAIgB,IAAa1S,CAcjB,IAZI0S,IACGnuB,EAAKkuB,OACRluB,EAAKkuB,MAAQtuB,IAAK,EAAGwuB,OAAQ,IAG/B3U,GAAO,sBAAuBzZ,IAIhCutB,GAAiB9tB,EAAIkC,EAAalC,EAClC8tB,GAAiB5tB,EAAIgC,EAAahC,EAAIK,EAAKkuB,KAAKtuB,IAAMI,EAAKkuB,KAAKE,OAE5DD,EAAW,CACb,GAAIE,GAASd,GAAiB9tB,EAAIO,EAAKH,EACnCyuB,EAASf,GAAiB5tB,EAAIK,EAAKqC,CAEvCrC,GAAKwa,SAAW6T,EAASC,EAASD,EAASC,CAG3C,IAAI3Z,GAAYnB,EAASmB,SAEP,UAAdA,EACF8G,EAAY,EACW,QAAd9G,IACT8G,EAAYzb,EAAKwa,UAGfiB,EAAY,IACdA,EAAY,GAGdzb,EAAKa,iBAAmB4a,EAEnBzb,EAAKwc,SAERxc,EAAKwc,OAASsR,MAIlB,IAAKrS,EACH,MASF,OANAsS,IAA8B/tB,EAAMA,EAAKH,EAAI4b,EAAWzb,EAAKqC,EAAIoZ,GAE7D0S,GAAa1S,IAAczb,EAAKa,mBAClCb,EAAK8a,gBAAkB9a,EAAKwc,OAAO2F,QAG9BniB,EAAKwc,OAQZ,MANAxc,GAAKH,EAAIG,EAAKqC,EAAI,EAClBrC,EAAKa,iBAAmBb,EAAKwa,SAAW,EACxCxa,EAAKwc,OAASsR,KACd9tB,EAAK8a,gBAAkB9a,EAAKwc,OAAO2F,OAG5BniB,EAAKwc,QAMhB+R,GAAe,SAAUlxB,EAAO2C,EAAMwuB,EAAS7B,EAAK8B,EAAkBC,GAGhE1uB,EAAKmtB,WAILR,IAEF3sB,EAAK2uB,eAAgB,EACrBhU,GAAc3a,EAAM2sB,EAAM3sB,IAAS3I,EAAKkjB,UAAYtB,IAEpDuV,EAAQjzB,YAAYoxB,GAEhB+B,GACFtyB,WAAW,WACL4D,GAAQA,EAAK4uB,QAAU5uB,EAAK6uB,cAC9B7uB,EAAK6uB,YAAYne,MAAMwP,QAAU,OACjClgB,EAAK6uB,YAAc,OAEpB,OAMTC,GAAgB,SAAU9uB,GACxBA,EAAK+uB,SAAU,EACf/uB,EAAK4uB,QAAS,CACd,IAAIjC,GAAM3sB,EAAK2sB,IAAM3e,EAAUQ,SAAS,YAAa,OACjDiQ,EAAa,WACfze,EAAK+uB,SAAU,EACf/uB,EAAK4uB,QAAS,EAEV5uB,EAAKgvB,aACPhvB,EAAKgvB,aAAahvB,GAElBA,EAAK2sB,IAAM,KAEbA,EAAIvqB,OAASuqB,EAAIsC,QAAU,KAC3BtC,EAAM,KAUR,OARAA,GAAIvqB,OAASqc,EACbkO,EAAIsC,QAAU,WACZjvB,EAAKmtB,WAAY,EACjB1O,KAGFkO,EAAIlvB,IAAMuC,EAAKvC,IAERkvB,GAETuC,GAAiB,SAAUlvB,EAAMmvB,GAC/B,GAAInvB,EAAKvC,KAAOuC,EAAKmtB,WAAantB,EAAK6a,UAOrC,MALIsU,KACFnvB,EAAK6a,UAAUxa,UAAY,IAG7BL,EAAK6a,UAAUxa,UAAYmT,EAASka,SAASze,QAAQ,QAASjP,EAAKvC,MAC5D,GAIXkd,GAAgB,SAAU3a,EAAM2sB,EAAKyC,GACnC,GAAKpvB,EAAKvC,IAAV,CAIKkvB,IACHA,EAAM3sB,EAAK6a,UAAUwU,UAGvB,IAAIxvB,GAAIuvB,EAASpvB,EAAKH,EAAI4B,KAAK4Z,MAAMrb,EAAKH,EAAIG,EAAKwa,UACjDnY,EAAI+sB,EAASpvB,EAAKqC,EAAIZ,KAAK4Z,MAAMrb,EAAKqC,EAAIrC,EAAKwa,SAE7Cxa,GAAK6uB,cAAgB7uB,EAAK4uB,SAC5B5uB,EAAK6uB,YAAYne,MAAM5Q,MAAQD,EAAI,KACnCG,EAAK6uB,YAAYne,MAAMpO,OAASD,EAAI,MAGtCsqB,EAAIjc,MAAM5Q,MAAQD,EAAI,KACtB8sB,EAAIjc,MAAMpO,OAASD,EAAI,OAEzBitB,GAAoB,WAElB,GAAI9B,GAAoBlxB,OAAQ,CAG9B,IAAK,GAFDizB,GAEK53B,EAAI,EAAGA,EAAI61B,GAAoBlxB,OAAQ3E,IAC9C43B,EAAW/B,GAAoB71B,GAC3B43B,EAASlM,OAAOhmB,QAAUkyB,EAASlyB,OACrCkxB,GAAagB,EAASlyB,MAAOkyB,EAASvvB,KAAMuvB,EAASf,QAASe,EAAS5C,IAAK,EAAO4C,EAASC,iBAGhGhC,QAKNtU,IAAgB,cAEdC,eAEEsW,aAAc,SAAUpyB,GACtBA,EAAQ+b,GAAa/b,EACrB,IAAI2C,GAAO4gB,GAAWvjB,EAEjB2C,MAAUA,EAAK4uB,SAAU5uB,EAAK+uB,SAAarZ,KAIhD+D,GAAO,cAAepc,EAAO2C,GACxBA,EAAKvC,KAIVqxB,GAAc9uB,KAEhB0vB,eAAgB,WACd1hB,EAAU/S,OAAOuY,EAAUia,IAA2B,GACtDp2B,EAAK+G,MAAQouB,GAASpuB,EACtBwiB,GAAavpB,EAAKs4B,UAClBrW,GAAe9F,EAASqa,cAGxBnB,GAAiBlZ,EAASK,KACtByF,KAAiB,IACnB9F,EAASK,MAAO,GAGlB2F,GAAQ,eAAgB,SAAUuI,GAEhC,GAIEpqB,GAJEoB,EAAIya,EAASoa,QACfgC,EAAkB,OAAT7N,GAAwBA,GAAQ,EACzC8N,EAAgBpuB,KAAKC,IAAI3I,EAAE,GAAIugB,MAC/BwW,EAAeruB,KAAKC,IAAI3I,EAAE,GAAIugB,KAIhC,KAAK3hB,EAAI,EAAGA,IAAMi4B,EAASE,EAAeD,GAAgBl4B,IACxDN,EAAKo4B,aAAa1a,EAAoBpd,EAExC,KAAKA,EAAI,EAAGA,IAAMi4B,EAASC,EAAgBC,GAAen4B,IACxDN,EAAKo4B,aAAa1a,EAAoBpd,KAI1C6hB,GAAQ,gBAAiB,WACvBniB,EAAKkjB,SAASuS,cAAgBtZ,EAASvU,kBAAoBuU,EAASvU,iBAAiB8V,KAGvFyE,GAAQ,yBAA0B8V,IAClC9V,GAAQ,mBAAoB8V,IAG5B9V,GAAQ,UAAW,WAEjB,IAAK,GADDxZ,GACKrI,EAAI,EAAGA,EAAI60B,GAAOlwB,OAAQ3E,IACjCqI,EAAOwsB,GAAO70B,GAEVqI,EAAK6a,YACP7a,EAAK6a,UAAY,MAEf7a,EAAK6uB,cACP7uB,EAAK6uB,YAAc,MAEjB7uB,EAAK2sB,MACP3sB,EAAK2sB,IAAM,MAET3sB,EAAK+vB,YACP/vB,EAAK+vB,UAAY,MAEf/vB,EAAKmtB,YACPntB,EAAK4uB,OAAS5uB,EAAKmtB,WAAY,EAGnCK,IAAsB,QAK1BmC,UAAW,SAAUtyB,GACnB,MAAIA,IAAS,QACc8G,KAAlBqoB,GAAOnvB,IAAuBmvB,GAAOnvB,KAKhD2yB,oBAAqB,WAWnB,MAAOxc,GAASma,0BAA4BxX,GAAsB3C,EAASI,WAAa/R,OAAO/B,MAAQ,MAIzGqhB,WAAY,SAAUkC,EAAQhmB,GAExBmW,EAASK,OACXxW,EAAQ+b,GAAa/b,GAGvB,IAAIslB,GAAWtrB,EAAKs4B,UAAUtM,EAAOhmB,MACjCslB,KACFA,EAAS9H,UAAY,KAGvB,IACE8R,GADE3sB,EAAO3I,EAAKs4B,UAAUtyB,EAG1B,KAAK2C,EAEH,YADAqjB,EAAOloB,GAAGkF,UAAY,GAKxBoZ,IAAO,cAAepc,EAAO2C,GAG7BqjB,EAAOhmB,MAAQA,EACfgmB,EAAOrjB,KAAOA,CAGd,IAAIwuB,GAAUxuB,EAAK6a,UAAY7M,EAAUQ,SAAS,kBAelD,KAZKxO,EAAKvC,KAAOuC,EAAKiwB,OAChBjwB,EAAKiwB,KAAKxb,QACZ+Z,EAAQjzB,YAAYyE,EAAKiwB,MAEzBzB,EAAQnuB,UAAYL,EAAKiwB,MAI7Bf,GAAelvB,GAEfyc,GAAmBzc,EAAMyY,KAErBzY,EAAKvC,KAAQuC,EAAKmtB,WAAcntB,EAAK4uB,OAwF9B5uB,EAAKvC,MAAQuC,EAAKmtB,YAE3BR,EAAM3e,EAAUQ,SAAS,YAAa,OACtCme,EAAIjc,MAAMwJ,QAAU,EACpByS,EAAIlvB,IAAMuC,EAAKvC,IACfkd,GAAc3a,EAAM2sB,GACpB4B,GAAalxB,EAAO2C,EAAMwuB,EAAS7B,QA9FY,CAkD/C,GAhDA3sB,EAAKgvB,aAAe,SAAUhvB,GAG5B,GAAK4U,EAAL,CAKA,GAAIyO,GAAUA,EAAOhmB,QAAUA,EAAO,CACpC,GAAI6xB,GAAelvB,GAAM,GASvB,MARAA,GAAKgvB,aAAehvB,EAAK2sB,IAAM,KAC/BlQ,GAAmBzc,EAAMyY,IACzBmC,GAAoB5a,QAEhBqjB,EAAOhmB,QAAU0X,GAEnB1d,EAAK2qB,qBAIJhiB,GAAK2uB,eAeH3H,IAAuBhnB,EAAK6uB,cAC/B7uB,EAAK6uB,YAAYne,MAAMwP,QAAU,OACjClgB,EAAK6uB,YAAc,MAhBjBnY,EAAUwF,YAAcpE,IAAwBkP,IAClDwG,GAAoB5lB,MAClB5H,KAAMA,EACNwuB,QAASA,EACT7B,IAAK3sB,EAAK2sB,IACVtvB,MAAOA,EACPgmB,OAAQA,EACRmM,kBAAkB,IAGpBjB,GAAalxB,EAAO2C,EAAMwuB,EAASxuB,EAAK2sB,IAAK7U,GAA6C,GAWhG9X,EAAKgvB,aAAe,KACpBhvB,EAAK2sB,IAAM,KAEXlT,GAAO,oBAAqBpc,EAAO2C,KAGjCgO,EAAUC,SAASiO,UAAW,CAEhC,GAAIgU,GAAuB,kCAC3BA,IAAyBlwB,EAAKmwB,KAAO,GAAK,gCAE1C,IAAItB,GAAc7gB,EAAUQ,SAAS0hB,EAAsBlwB,EAAKmwB,KAAO,MAAQ,GAC3EnwB,GAAKmwB,OACPtB,EAAYpxB,IAAMuC,EAAKmwB,MAGzBxV,GAAc3a,EAAM6uB,GAEpBL,EAAQjzB,YAAYszB,GACpB7uB,EAAK6uB,YAAcA,EAKhB7uB,EAAK+uB,SACRD,GAAc9uB,GAIZ3I,EAAK24B,yBAEFvD,IAAsB/V,EAAUwF,UACnCsR,GAAoB5lB,MAClB5H,KAAMA,EACNwuB,QAASA,EACT7B,IAAK3sB,EAAK2sB,IACVtvB,MAAOA,EACPgmB,OAAQA,IAGVkL,GAAalxB,EAAO2C,EAAMwuB,EAASxuB,EAAK2sB,IAAK,GAAM,IAcpDF,IAAsBpvB,IAAU0X,EAInC6F,GAAoB5a,IAHpB6X,GAAwB2W,EAAQ9d,MAChC6Q,GAAYvhB,EAAO2sB,GAAO3sB,EAAK2sB,MAKjCtJ,EAAOloB,GAAGkF,UAAY,GACtBgjB,EAAOloB,GAAGI,YAAYizB,IAExBtN,2BAAA,QAAAA,GAAAkP,EAAAC,GAAA,MAAAC,GAAA/2B,MAAAjC,KAAAkC,WAAA,GAAA82B,GAAAl3B,EAAAkB,EAAAwD,EAAAC,KAAiB,QAAAwyB,GAAgBlN,EAAQhmB,GAAxB,GAAAslB,GAAA3iB,EAAA2sB,EAAA6B,EAAA0B,EAAArB,CAAA,OAAAv0B,GAAAwD,EAAAa,KAAA,SAAA6xB,GAAA,cAAAA,EAAA3xB,KAAA2xB,EAAA1xB,MAAA,UAEX0U,EAASK,OACXxW,EAAQ+b,GAAa/b,IAGnBslB,EAAWtrB,EAAKs4B,UAAUtM,EAAOhmB,OACjCslB,IACFA,EAAS9H,UAAY,MAGnB7a,EAAO3I,EAAKs4B,UAAUtyB,GAXX,CAAAmzB,EAAA1xB,KAAA,cAebukB,GAAOloB,GAAGkF,UAAY,GAfTmwB,EAAAxvB,OAAA,uBAAAwvB,GAAA1xB,KAAA,EAoBT+a,GAAY,cAAexc,EAAO2C,EApBzB,QAuBfqjB,EAAOhmB,MAAQA,EACfgmB,EAAOrjB,KAAOA,EAGVwuB,EAAUxuB,EAAK6a,UAAY7M,EAAUQ,SAAS,oBAG7CxO,EAAKvC,KAAOuC,EAAKiwB,OAChBjwB,EAAKiwB,KAAKxb,QACZ+Z,EAAQjzB,YAAYyE,EAAKiwB,MAEzBzB,EAAQnuB,UAAYL,EAAKiwB,MAI7Bf,GAAelvB,GAEfyc,GAAmBzc,EAAMyY,KAErBzY,EAAKvC,KAAQuC,EAAKmtB,WAAcntB,EAAK4uB,OAwF9B5uB,EAAKvC,MAAQuC,EAAKmtB,YAE3BR,EAAM3e,EAAUQ,SAAS,YAAa,OACtCme,EAAIjc,MAAMwJ,QAAU,EACpByS,EAAIlvB,IAAMuC,EAAKvC,IACfkd,GAAc3a,EAAM2sB,GACpB4B,GAAalxB,EAAO2C,EAAMwuB,EAAS7B,KA5FnC3sB,EAAKgvB,aAAe,SAAUhvB,GAG5B,GAAK4U,EAAL,CAKA,GAAIyO,GAAUA,EAAOhmB,QAAUA,EAAO,CACpC,GAAI6xB,GAAelvB,GAAM,GASvB,MARAA,GAAKgvB,aAAehvB,EAAK2sB,IAAM,KAC/BlQ,GAAmBzc,EAAMyY,IACzBmC,GAAoB5a,QAEhBqjB,EAAOhmB,QAAU0X,GAEnB1d,EAAK2qB,qBAIJhiB,GAAK2uB,eAeH3H,IAAuBhnB,EAAK6uB,cAC/B7uB,EAAK6uB,YAAYne,MAAMwP,QAAU,OACjClgB,EAAK6uB,YAAc,MAhBjBnY,EAAUwF,YAAcpE,IAAwBkP,IAClDwG,GAAoB5lB,MAClB5H,KAAMA,EACNwuB,QAASA,EACT7B,IAAK3sB,EAAK2sB,IACVtvB,MAAOA,EACPgmB,OAAQA,EACRmM,kBAAkB,IAGpBjB,GAAalxB,EAAO2C,EAAMwuB,EAASxuB,EAAK2sB,IAAK7U,GAA6C,GAWhG9X,EAAKgvB,aAAe,KACpBhvB,EAAK2sB,IAAM,KAEXlT,GAAO,oBAAqBpc,EAAO2C,KAGjCgO,EAAUC,SAASiO,YAEjBgU,EAAuB,mCAC3BA,GAAyBlwB,EAAKmwB,KAAO,GAAK,iCAEtCtB,EAAc7gB,EAAUQ,SAAS0hB,EAAsBlwB,EAAKmwB,KAAO,MAAQ,IAC3EnwB,EAAKmwB,OACPtB,EAAYpxB,IAAMuC,EAAKmwB,MAGzBxV,GAAc3a,EAAM6uB,GAEpBL,EAAQjzB,YAAYszB,GACpB7uB,EAAK6uB,YAAcA,GAKhB7uB,EAAK+uB,SACRD,GAAc9uB,GAIZ3I,EAAK24B,yBAEFvD,IAAsB/V,EAAUwF,UACnCsR,GAAoB5lB,MAClB5H,KAAMA,EACNwuB,QAASA,EACT7B,IAAK3sB,EAAK2sB,IACVtvB,MAAOA,EACPgmB,OAAQA,IAGVkL,GAAalxB,EAAO2C,EAAMwuB,EAASxuB,EAAK2sB,IAAK,GAAM,KAcpDF,IAAsBpvB,IAAU0X,EAInC6F,GAAoB5a,IAHpB6X,GAAwB2W,EAAQ9d,MAChC6Q,GAAYvhB,EAAO2sB,GAAO3sB,EAAK2sB,MAKjCtJ,EAAOloB,GAAGkF,UAAY,GACtBgjB,EAAOloB,GAAGI,YAAYizB,EApJP,yBAAAgC,GAAAjuB,SAAAguB,EAAAj5B,QAAjB,OAAA4pB,MAsJAqC,WAAY,SAAUvjB,GAChBA,EAAK2sB,MACP3sB,EAAK2sB,IAAIvqB,OAASpC,EAAK2sB,IAAIsC,QAAU,MAEvCjvB,EAAK4uB,OAAS5uB,EAAK+uB,QAAU/uB,EAAK2sB,IAAM3sB,EAAK2uB,eAAgB,KAgBnE,IAAI8B,IACFC,MACAC,GAAoB,SAAUC,EAAWzI,EAAca,GACrD,GAAItsB,GAAItB,SAASy1B,YAAY,eAC3BC,GACEF,UAAWA,EACX3zB,OAAQ2zB,EAAU3zB,OAClBkrB,aAAcA,EACda,YAAaA,GAAe,QAGhCtsB,GAAEq0B,gBAAgB,WAAW,GAAM,EAAMD,GACzCF,EAAU3zB,OAAO+zB,cAAct0B,GAGnCwc,IAAgB,OACdC,eACE8X,QAAS,WACPzX,GAAQ,kBAAmBniB,EAAK65B,YAChC1X,GAAQ,eAAgBniB,EAAK85B,cAC7B3X,GAAQ,UAAW,WACjBkX,MACAD,GAAW,QAGfS,WAAY,SAAU7I,GAChBA,EAAU/rB,OAAS,IACrB2W,aAAawd,IACbA,GAAW,OAGfU,aAAc,SAAUz0B,EAAGyrB,GACzB,GAAKA,IAIA9Q,IAAWF,IAAkB6G,GAAgB,CAChD,GAAIoT,GAAKjJ,CACT,IAAIsI,KACFxd,aAAawd,IACbA,GAAW,KAGPhM,GAAgB2M,EAAIV,KAEtB,WADAjX,IAAO,YAAa2X,EAKxB,IAA0B,UAAtBjJ,EAAajjB,KAEf,WADAyrB,IAAkBj0B,EAAGyrB,EAAc,QAMrC,IAAuB,WAFFzrB,EAAEO,OAAOwX,QAAQjC,eAEHxE,EAAUmB,SAASzS,EAAEO,OAAQ,oBAE9D,WADA0zB,IAAkBj0B,EAAGyrB,EAIvBxM,IAAgB+U,GAAiBU,GAEjCX,GAAWr0B,WAAW,WACpBu0B,GAAkBj0B,EAAGyrB,GACrBsI,GAAW,MACV,SAoBX,IAAIY,GAEJnY,IAAgB,eAEdC,eAEEmY,gBAAiB,WAEX9a,IAKAL,EAGFqD,GAAQ,YAAa,WACnBniB,EAAKk6B,qBAGPl6B,EAAKk6B,kBAAiB,KAK1BA,iBAAkB,SAAUC,GAE1BH,KAEA,IAAII,GAAS,iCAEbjY,IAAQ,aAAc,WACpBxL,EAAUE,KAAKJ,EAAU2jB,EAAQp6B,EAAKq6B,oBAGxClY,GAAQ,eAAgB,WAClB6X,IACFrjB,EAAUI,OAAON,EAAU2jB,EAAQp6B,EAAKq6B,oBAI5Cr6B,EAAKs6B,eAAgB,CAErB,IAAIC,GACFC,EAAiB,WACXx6B,EAAKs6B,gBACP3jB,EAAUc,YAAYhB,EAAU,mBAChCzW,EAAKs6B,eAAgB,GAEnBtc,EAAiB,EACnBrH,EAAUkB,SAASpB,EAAU,sBAE7BE,EAAUc,YAAYhB,EAAU,sBAElCgkB,KAEFA,EAAsB,WAChBF,IACF5jB,EAAUc,YAAYhB,EAAU,kBAChC8jB,GAAmB,GAIzBpY,IAAQ,SAAUqY,GAClBrY,GAAQ,cAAeqY,GACvBrY,GAAQ,cAAe,WACjBniB,EAAKs6B,gBACPC,GAAmB,EACnB5jB,EAAUkB,SAASpB,EAAU,qBAGjC0L,GAAQ,YAAasY,GAEhBN,GACHK,KAKJH,iBAAkB,SAAUh1B,GAE1B,GAAI2Y,GAAkBhe,EAAKkjB,SAASC,SAalC,MAZIhH,GAASkB,SAENlB,EAASO,eAAiBiK,IAAkB9G,EAC/Cxa,EAAEG,iBACOoZ,GAAiBxU,KAAK+gB,IAAI9lB,EAAEq1B,QAAU,IAG/Cjd,GAAkB,EAClBzd,EAAKiqB,WAIF,CAST,IALA5kB,EAAEkhB,kBAGFyT,GAAY5xB,EAAI,EAEZ,UAAY/C,GACM,IAAhBA,EAAEs1B,WAEJX,GAAY5xB,EAAe,GAAX/C,EAAEu1B,OAClBZ,GAAY1xB,EAAe,GAAXjD,EAAEq1B,SAElBV,GAAY5xB,EAAI/C,EAAEu1B,OAClBZ,GAAY1xB,EAAIjD,EAAEq1B,YAEf,IAAI,cAAgBr1B,GACrBA,EAAEw1B,cACJb,GAAY5xB,GAAK,IAAO/C,EAAEw1B,aAExBx1B,EAAEy1B,YACJd,GAAY1xB,GAAK,IAAOjD,EAAEy1B,YAE1Bd,GAAY1xB,GAAK,IAAOjD,EAAE01B,eAEvB,MAAI,UAAY11B,IAGrB,MAFA20B,IAAY1xB,EAAIjD,EAAE21B,OAKpB/V,GAAoBjH,GAAgB,EAEpC,IAAIid,GAAU9Z,GAAW/Y,EAAI4xB,GAAY5xB,EACvC8yB,EAAU/Z,GAAW7Y,EAAI0xB,GAAY1xB,GAGnC6T,EAASkB,OAET4d,GAAW1a,GAAelW,IAAIjC,GAAK6yB,GAAW1a,GAAe7E,IAAItT,GACjE8yB,GAAW3a,GAAelW,IAAI/B,GAAK4yB,GAAW3a,GAAe7E,IAAIpT,IAEnEjD,EAAEG,iBAIJxF,EAAKuqB,MAAM0Q,EAASC,IAGtBC,kBAAmB,SAAU/O,GAC3BA,EAAcA,IACZhkB,EAAGgZ,GAAchZ,EAAI,EAAIkZ,GAAQlZ,EACjCE,EAAG8Y,GAAc9Y,EAAI,EAAIgZ,GAAQhZ,EAGnC,IAAI8yB,GAAqBjf,EAAS7S,kBAAiB,EAAMtJ,EAAKkjB,UAC1DmY,EAAUrd,IAAmBod,CAEjCp7B,GAAKs6B,eAAiBe,EAEtBr7B,EAAKmsB,OAAOkP,EAAUr7B,EAAKkjB,SAAS1Z,iBAAmB4xB,EAAoBhP,EAAa,KACxFzV,GAAY0kB,EAAkB,SAAR,OAAoB,SAAS5kB,EAAU,sBAwBnE,IAKI6kB,IACFC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GAEAC,GAjBEC,IACF/yB,SAAS,EACTgzB,WAAY,GAiBZC,GAAW,WACT,MAAOJ,IAAWK,KAAKC,UAAU,IAEnCC,GAAwB,WAElBjB,IACF1f,aAAa0f,IAGXE,IACF5f,aAAa4f,KAMjBgB,GAAyB,WACvB,GAAIH,GAAOD,KACTK,IAEF,IAAIJ,EAAKp3B,OAAS,EAChB,MAAOw3B,EAGT,IAAIn8B,GAAGo8B,EAAOL,EAAKplB,MAAM,IACzB,KAAK3W,EAAI,EAAGA,EAAIo8B,EAAKz3B,OAAQ3E,IAC3B,GAAKo8B,EAAKp8B,GAAV,CAGA,GAAIq8B,GAAOD,EAAKp8B,GAAG2W,MAAM,IACrB0lB,GAAK13B,OAAS,IAGlBw3B,EAAOE,EAAK,IAAMA,EAAK,IAEzB,GAAIxgB,EAAS1S,YAAa,CAExB,GAAImzB,GAAYH,EAAO/yB,GAEvB,KADA+yB,EAAO/yB,IAAM,EACRpJ,EAAI,EAAGA,EAAI60B,GAAOlwB,OAAQ3E,IAC7B,GAAI60B,GAAO70B,GAAGoJ,MAAQkzB,EAAW,CAC/BH,EAAO/yB,IAAMpJ,CACb,YAIJm8B,GAAO/yB,IAAME,SAAS6yB,EAAO/yB,IAAK,IAAM,CAK1C,OAHI+yB,GAAO/yB,IAAM,IACf+yB,EAAO/yB,IAAM,GAER+yB,GAETI,GAAc,QAAdA,KAOE,GALIrB,IACF5f,aAAa4f,IAIX7U,IAAkB9G,EAIpB,YADA2b,GAAwBz2B,WAAW83B,EAAa,KAI9CpB,IACF7f,aAAa2f,IAEbE,IAAuB,CAIzB,IAAI/xB,GAAOgU,EAAoB,EAC3B/U,EAAO4gB,GAAW7L,EAClB/U,GAAKlH,eAAe,SAEtBiI,EAAMf,EAAKe,IAEb,IAAIozB,GAAUlB,GAAe,QAAezf,EAASggB,WAAa,QAAezyB,CAE5EmyB,MACuC,IAAtCG,GAAWK,KAAKzvB,QAAQkwB,KAC1Bf,IAAkB,EAKtB,IAAIgB,GAASf,GAAWgB,KAAK/lB,MAAM,KAAK,GAAK,IAAM6lB,CAE/Cb,IAEE,IAAMa,IAAYx3B,OAAO23B,SAASZ,MACpClzB,QAAQ0yB,GAAkB,eAAiB,aAAa,GAAI93B,SAAS+E,MAAOi0B,GAI1ElB,GACFG,GAAWpkB,QAAQmlB,GAEnBf,GAAWK,KAAOS,EAKtBjB,IAAkB,EAClBN,GAAqBx2B,WAAW,WAC9B02B,IAAuB,GACtB,IAIP5Z,IAAgB,WAGdC,eACEob,YAAa,WAIX,GAFAvmB,EAAU/S,OAAOuY,EAAU+f,IAAwB,GAE9C/f,EAAShT,QAAd,CAKA6yB,GAAa12B,OAAO23B,SACpBlB,IAAkB,EAClBD,IAAiB,EACjBD,IAAkB,EAClBD,GAAeQ,KACfH,GAAsB,aAAe9yB,SAGjCyyB,GAAahvB,QAAQ,SAAW,IAClCgvB,GAAeA,GAAa3kB,MAAM,SAAS,GAC3C2kB,GAAeA,GAAa3kB,MAAM,SAAS,IAI7CkL,GAAQ,cAAeniB,EAAKm9B,WAC5Bhb,GAAQ,eAAgB,WACtBxL,EAAUI,OAAOzR,OAAQ,aAActF,EAAKo9B,eAI9C,IAAIC,GAAmB,WACrB1B,IAAe,EACVG,KAECC,GACF5yB,QAAQm0B,OAGJ1B,GACFI,GAAWK,KAAOT,GAEdK,GAGF9yB,QAAQo0B,UAAU,GAAIx5B,SAAS+E,MAAOkzB,GAAWwB,SAAWxB,GAAWyB,QAEvEzB,GAAWK,KAAO,IAO1BE,KAIFpa,IAAQ,eAAgB,WAClB1E,GAGF4f,MAGJlb,GAAQ,UAAW,WACZwZ,IACH0B,MAGJlb,GAAQ,cAAe,WACrBzE,EAAoB8e,KAAyB9yB,KAI/C,IAAI1D,GAAQ41B,GAAahvB,QAAQ,OAC7B5G,IAAS,IACX41B,GAAeA,GAAaU,UAAU,EAAGt2B,GACV,MAA3B41B,GAAa/oB,OAAO,KACtB+oB,GAAeA,GAAa/oB,MAAM,GAAI,KAK1C9N,WAAW,WACLwY,GACF5G,EAAUE,KAAKvR,OAAQ,aAActF,EAAKo9B,eAE3C,MAGLA,aAAc,WAEZ,GAAIhB,OAAeR,GAIjB,MAFAE,KAAiB,MACjB97B,GAAKiqB,OAGFwR,MAEHC,IAAwB,EACxB17B,EAAKyqB,KAAK+R,KAAyB9yB,KACnCgyB,IAAwB,IAI5ByB,UAAW,WAKTZ,KAGIb,KAICG,GAGHP,GAAwBv2B,WAAW83B,GAAa,KAFhDA,UAWRlmB,EAAU/S,OAAO5D,EAAM8hB,IAGV/X,QV4mDT,SAAUlK,EAAQD,EAASO,GAEjC,GAAIu9B,GAAgCC,CAA8D,mBAAX1sB,SAAgCA,OAAOvB;;;CWj9K9H,SAAWhQ,EAAMC,GAEbG,QAAAgN,MAAA6wB,EAAA,kBAAAD,KAAAl9B,KAAAZ,EAAAO,EAAAP,EAAAC,GAAA69B,KAAA79B,EAAAD,QAAA+9B,IAMD19B,EAAM,WAEP,YAs0BA,OAj0BE,UAAS29B,EAAMjnB,GAEb,GAGEknB,GACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEAC,EACAC,EACAlc,EAEAmc,EACAC,EACAC,EAEAC,EAEAtiB,EAoDAuiB,EACAC,EAkKAC,EACAC,EA7OEvV,EAAKrpB,KACL6+B,GAAoB,EACtBC,GAAmB,EAQnBC,GAAoB,EAYpBC,GACEC,UAAW32B,IAAI,GAAIwuB,OAAO,QAC1BoI,gBAAiB,OAAQ,UAAW,YAAa,KAAM,WACvDC,WAAY,IACZC,kBAAmB,IACnBC,sBAAuB,IAEvB52B,iBAAkB,SAASC,EAAMC,GAC/B,MAAID,GAAKG,OAITF,EAAUG,SAAS,GAAGC,UAAYL,EAAKG,OAChC,IAJLF,EAAUG,SAAS,GAAGC,UAAY,IAC3B,IAMXu2B,SAAQ,EACR32B,WAAW,EACX42B,cAAc,EACdC,QAAQ,EACRr2B,SAAS,EACTs2B,WAAW,EACXC,SAAS,EACTC,aAAa,EAEbC,YAAY,EACZC,qBAAqB,EAErBC,yBAAyB,EAEzBC,eACGrkB,GAAG,WAAYskB,MAAM,oBAAqBC,IAAI,yDAC9CvkB,GAAG,UAAWskB,MAAM,QAASC,IAAI,+DACjCvkB,GAAG,YAAaskB,MAAM,SAAUC,IAAI,qGAEpCvkB,GAAG,WAAYskB,MAAM,iBAAkBC,IAAI,oBAAqBC,UAAS,IAE5EC,oBAAqB,WACnB,MAAOxC,GAAK1a,SAAS9c,KAAO,IAE9Bi6B,mBAAoB,WAClB,MAAO/6B,QAAO23B,SAASD,MAEzBsD,gBAAiB,WACf,MAAO1C,GAAK1a,SAASpa,OAAS,IAGhCy3B,kBAAmB,MACnBC,iBAAkB,MAQlBC,EAAiB,SAASp7B,GAC1B,GAAGq5B,EACD,OAAO,CAITr5B,GAAIA,GAAKC,OAAOC,MAEb4W,EAASijB,YAAcjjB,EAASI,YAAc8hB,GAE/CqC,GASF,KAAI,GAJFC,GAEAC,EAHEh7B,EAASP,EAAEO,QAAUP,EAAEQ,WAEzBg7B,EAAej7B,EAAOG,aAAa,UAAY,GAGzCzF,EAAI,EAAGA,EAAIwgC,EAAY77B,OAAQ3E,IACrCqgC,EAAYG,EAAYxgC,GACrBqgC,EAAUI,OAASF,EAAaj0B,QAAQ,SAAW+zB,EAAU//B,OAAU,IACxE+/B,EAAUI,QACVH,GAAQ,EAKZ,IAAGA,EAAO,CACLv7B,EAAEkhB,iBACHlhB,EAAEkhB,kBAEJmY,GAAoB,CAQpB,IAAIsC,GAAWrqB,EAAUC,SAASgE,aAAe,IAAM,EACvD+jB,GAA2B55B,WAAW,WACpC25B,GAAoB,GACnBsC,KAIPC,EAAyB,WACvB,OAAQrD,EAAKrzB,mBAAqB4R,EAASI,WAAa/R,OAAO/B,MAAQ0T,EAASqkB,kBAElFU,EAAmB,SAASp9B,EAAIq9B,EAAO9rB,GACrCsB,GAAYtB,EAAM,MAAQ,UAAY,SAAUvR,EAAI,SAAWq9B,IAKjEC,EAAiB,WACf,GAAIC,GAA4C,IAA7BllB,EAASqa,eAEzB6K,KAAgB5C,IACjByC,EAAiBpD,EAAW,gBAAiBuD,GAC7C5C,EAAsB4C,IAG1BC,EAAyB,WACvBJ,EAAiB/C,EAAa,sBAAuBa,IAEvDuC,EAAoB,WAwBlB,MAtBAvC,IAAqBA,EAGjBA,GAQFroB,EAAUc,YAAY0mB,EAAa,8BACnCp5B,WAAW,WACNi6B,GACDsC,KAED,OAZHA,IACAv8B,WAAW,WACLi6B,GACFroB,EAAUkB,SAASsmB,EAAa,+BAEjC,KAUDa,GACFwC,KAEK,GAGTC,EAAmB,SAASp8B,GAC1BA,EAAIA,GAAKC,OAAOC,KAChB,IAAIK,GAASP,EAAEO,QAAUP,EAAEQ,UAI3B,OAFA+3B,GAAKzV,MAAM,iBAAkB9iB,EAAGO,KAE5BA,EAAOo3B,SAIPp3B,EAAO87B,aAAa,cAIxBp8B,OAAOq8B,KAAK/7B,EAAOo3B,KAAM,aAAc,2FAEpC13B,OAAOkF,OAASJ,KAAK4Z,MAAMxZ,OAAO/B,MAAQ,EAAI,KAAO,MAEpDu2B,GACFuC,KAGK,KAETC,EAAmB,WAQjB,IAAI,GANFI,GACAC,EACAC,EACAC,EACAC,EALEC,EAAiB,GAOb3hC,EAAI,EAAGA,EAAI6b,EAAS6jB,aAAa/6B,OAAQ3E,IAC/CshC,EAAkBzlB,EAAS6jB,aAAa1/B,GAExCwhC,EAAY3lB,EAASikB,oBAAoBwB,GACzCG,EAAW5lB,EAASkkB,mBAAmBuB,GACvCI,EAAa7lB,EAASmkB,gBAAgBsB,GAEtCC,EAAWD,EAAgB1B,IAAItoB,QAAQ,UAAWsqB,mBAAmBH,IAClEnqB,QAAQ,gBAAiBsqB,mBAAmBJ,IAC5ClqB,QAAQ,oBAAqBkqB,GAC7BlqB,QAAQ,WAAYsqB,mBAAmBF,IAE1CC,GAAkB,YAAcJ,EAAW,yCAChBD,EAAgBjmB,GAAK,KAC7CimB,EAAgBzB,SAAW,WAAa,IAAM,IAC/CyB,EAAgB3B,MAAQ,OAEvB9jB,EAASgmB,sBACVF,EAAiB9lB,EAASgmB,oBAAoBP,EAAiBK,GAGnE9D,GAAYp1B,SAAS,GAAGC,UAAYi5B,EACpC9D,EAAYp1B,SAAS,GAAG5D,QAAUs8B,GAGpCW,EAAiB,SAASx8B,GACxB,IAAI,GAAKtF,GAAI,EAAGA,EAAI6b,EAASgjB,eAAel6B,OAAQ3E,IAClD,GAAIqW,EAAUmB,SAASlS,EAAQ,SAAWuW,EAASgjB,eAAe7+B,IAChE,OAAO,GAMb+hC,EAAiB,EACjB3B,EAAmB,WACjB9kB,aAAaijB,GACbwD,EAAiB,EACdhE,GACD/U,EAAGgZ,SAAQ,IAGfC,EAAsB,SAASl9B,GAC7BA,EAAIA,GAAQC,OAAOC,KACnB,IAAIi9B,GAAOn9B,EAAEo9B,eAAiBp9B,EAAEq9B,SAC3BF,IAA0B,SAAlBA,EAAKG,WAChB/mB,aAAaijB,GACbA,EAAa95B,WAAW,WACtBukB,EAAGgZ,SAAQ,IACVnmB,EAASkjB,qBAGhBuD,EAAsB,WACjBzmB,EAASqjB,eAAiB7oB,EAAUC,SAASgE,eAC1CijB,IACFA,EAAgBvU,EAAGuZ,oBAElBhF,GACDlnB,EAAUE,KAAK9S,SAAU85B,EAAciF,OAAQxZ,EAAGyZ,kBAClDzZ,EAAGyZ,mBACHpsB,EAAUkB,SAAS+lB,EAAKnnB,SAAU,sBAElCE,EAAUc,YAAYmmB,EAAKnnB,SAAU,uBAI3CusB,EAAyB,WAEpB7mB,EAASyjB,cAEVqD,GAAwB,GAExB9gB,EAAQ,eAAgB,WAEtBvG,aAAa4iB,GAGbA,EAA2Bz5B,WAAW,WAEjC64B,EAAK1a,UAAY0a,EAAK1a,SAASwU,UAE3BkG,EAAKjF,uBAA0BiF,EAAK1a,SAASoS,MAAQsI,EAAK1a,SAASoS,IAAI3pB,eAG1Es3B,GAAwB,GAK1BA,GAAwB,IAGzB9mB,EAASmjB,yBAGdnd,EAAQ,oBAAqB,SAASnc,EAAO2C,GACxCi1B,EAAK1a,WAAava,GACnBs6B,GAAwB,OAMhCA,EAA0B,SAASC,GAC7B3E,IAA4B2E,IAC9BhC,EAAiB5C,EAAmB,qBAAsB4E,GAC1D3E,EAA0B2E,IAG9BC,EAAmB,SAASx6B,GAC1B,GAAIy6B,GAAMz6B,EAAKkuB,IAEf,IAAIoK,IAA2B,CAE7B,GAAIoC,GAAOlnB,EAAS+iB,QACpB,IAAG/iB,EAASvT,WAA6B,SAAhBy6B,EAAKtM,OAO5B,GANIiH,IACFA,EAAwBrnB,EAAUQ,SAAS,qCAC3C6mB,EAAsB95B,YAAayS,EAAUQ,SAAS,0BACtD2mB,EAAUwF,aAAatF,EAAuBD,GAC9CpnB,EAAUkB,SAASimB,EAAW,kBAE5B3hB,EAASzT,iBAAiBC,EAAMq1B,GAAuB,GAAQ,CAEjE,GAAIuF,GAAcvF,EAAsBjS,YACxCqX,GAAIrM,OAASntB,SAAS25B,EAAY,KAAO,OAEzCH,GAAIrM,OAASsM,EAAK96B,QAGpB66B,GAAIrM,OAAyB,SAAhBsM,EAAKtM,OAAoB,EAAIsM,EAAKtM,MAIjDqM,GAAI76B,IAAM86B,EAAK96B,QAEf66B,GAAI76B,IAAM66B,EAAIrM,OAAS,GAG3ByM,EAAa,WAERrnB,EAASijB,YACVjd,EAAQ,YAAa,WAEnBxL,EAAUE,KAAK9S,SAAU,YAAa28B,GACtC/pB,EAAUE,KAAK9S,SAAU,WAAYw+B,GAErC3D,EAAgB5U,YAAY,WAEJ,MADtBqY,GAEE/Y,EAAGgZ,SAAQ,IAEZnmB,EAASijB,WAAa,MAI/BqE,EAAqC,WAGnCthB,EAAQ,iBAAkB,SAASqK,GAC9BuS,GAAoBvS,EAAM,IAC3BlD,EAAGoa,gBACM3E,GAAoBvS,GAAO,KACpClD,EAAGqa,gBAKP,IAAIC,EACJzhB,GAAQ,eAAiB,SAASqK,GAC7BuS,GAAoBvS,EAAM,IAC3BlD,EAAGoa,eACHE,GAAsB,GACdA,IAAwB7E,GAAoBvS,EAAM,IAC1DlD,EAAGqa,iBAIPxhB,EAAQ,mBAAoB,YAC1ByhB,GAAsB,KACK7E,GACzBzV,EAAGqa,kBAQP7C,IAEAlgC,KAAM,UACNijC,OAAQ,YACR1J,OAAQ,SAASr2B,GACfi6B,EAAoBj6B,KAItBlD,KAAM,cACNijC,OAAQ,UACR1J,OAAQ,SAASr2B,GACfq6B,EAAcr6B,GAEhBi9B,MAAO,WACLQ,OAIF3gC,KAAM,gBACNijC,OAAQ,UACR1J,OAAQ,SAASr2B,GACfo6B,EAAep6B,GAEjBi9B,MAAO,WACLQ,OAIF3gC,KAAM,eACNijC,OAAQ,SACR9C,MAAOnD,EAAKzC,oBAGZv6B,KAAM,UACNijC,OAAQ,YACR1J,OAAQ,SAASr2B,GACfm6B,EAAkBn6B,KAIpBlD,KAAM,gBACNijC,OAAQ,UACR9C,MAAOnD,EAAK3T,QAGZrpB,KAAM,sBACNijC,OAAQ,UACR9C,MAAOnD,EAAKp2B,OAGZ5G,KAAM,uBACNijC,OAAQ,UACR9C,MAAOnD,EAAKn2B,OAGZ7G,KAAM,aACNijC,OAAQ,eACR9C,MAAO,WACFlD,EAAciG,eACfjG,EAAckG,OAEdlG,EAAcmG,WAKlBpjC,KAAM,YACNijC,OAAQ,cACR1J,OAAQ,SAASr2B,GACfw6B,EAAoBx6B,KAMtBmgC,EAAmB,WACrB,GAAIt7B,GACFu7B,EACAvD,EAEEwD,EAA2B,SAASC,GACtC,GAAIA,EAKJ,IAAI,GADA7jC,GAAI6jC,EAAUn/B,OACV3E,EAAI,EAAGA,EAAIC,EAAGD,IAAK,CACzBqI,EAAOy7B,EAAU9jC,GACjB4jC,EAAYv7B,EAAK2O,SAEjB,KAAI,GAAI7Q,GAAI,EAAGA,EAAIq6B,EAAY77B,OAAQwB,IACrCk6B,EAAYG,EAAYr6B,GAErBy9B,EAAUt3B,QAAQ,SAAW+zB,EAAU//B,OAAS,IAE7Cub,EAASwkB,EAAUkD,SAErBltB,EAAUc,YAAY9O,EAAM,2BACzBg4B,EAAUxG,QACXwG,EAAUxG,OAAOxxB,IAKnBgO,EAAUkB,SAASlP,EAAM,6BAOnCw7B,GAAyBrG,EAAU/0B,SAEnC,IAAIs7B,GAAU1tB,EAAUqB,gBAAgB8lB,EAAW,gBAChDuG,IACDF,EAA0BE,EAAOt7B,UAOrCugB,GAAGhe,KAAO,WAGRqL,EAAU/S,OAAOg6B,EAAK92B,QAASm4B,GAAmB,GAGlD9iB,EAAWyhB,EAAK92B,QAGhBg3B,EAAYnnB,EAAUqB,gBAAgB4lB,EAAK9Y,WAAY,YAGvD3C,EAAUyb,EAAK3zB,OAGfw5B,IAGAthB,EAAQ,eAAgBmH,EAAGpE,QAG3B/C,EAAQ,YAAa,SAASmiB,GAC5B,GAAI96B,GAAmBo0B,EAAK1a,SAAS1Z,gBAClCo0B,GAAKvV,iBAAmB7e,EACzBo0B,EAAKzR,OAAO3iB,EAAkB86B,EAAO,KAErC1G,EAAKzR,OAAOhQ,EAAS7S,kBAAiB,EAAOs0B,EAAK1a,UAAWohB,EAAO,OAKxEniB,EAAQ,mBAAoB,SAAS9c,EAAG2oB,EAAQuW,GAC9C,GAAIld,GAAIhiB,EAAEO,QAAUP,EAAEQ,UAEpBwhB,IACAA,EAAEthB,aAAa,UAAYV,EAAEwI,KAAKjB,QAAQ,UAAY,IACpDya,EAAEthB,aAAa,SAAS6G,QAAQ,aAAe,GAAM,qBAAsBmL,KAAKsP,EAAEjK,YAEpFmnB,EAAWtW,SAAU,KAKzB9L,EAAQ,aAAc,WACpBxL,EAAUE,KAAKinB,EAAW,gBAAiB2C,GAC3C9pB,EAAUE,KAAK+mB,EAAK9Y,WAAY,UAAWwE,EAAGkb,aAE1C5G,EAAKrzB,mBACPoM,EAAUE,KAAK+mB,EAAK9Y,WAAY,YAAawE,EAAGmb,eAKpDtiB,EAAQ,eAAgB,WAClB6c,GACFuC,IAGC3C,GACDvU,cAAcuU,GAEhBjoB,EAAUI,OAAOhT,SAAU,WAAYw+B,GACvC5rB,EAAUI,OAAOhT,SAAU,YAAa28B,GACxC/pB,EAAUI,OAAO+mB,EAAW,gBAAiB2C,GAC7C9pB,EAAUI,OAAO6mB,EAAK9Y,WAAY,UAAWwE,EAAGkb,aAChD7tB,EAAUI,OAAO6mB,EAAK9Y,WAAY,YAAawE,EAAGmb,aAE/C5G,IACDlnB,EAAUI,OAAOhT,SAAU85B,EAAciF,OAAQxZ,EAAGyZ,kBACjDlF,EAAciG,iBACf3nB,EAASU,sBAAwB,EACjCghB,EAAckG,QAEhBlG,EAAgB,QAMpB1b,EAAQ,UAAW,WACdhG,EAASvT,YACPo1B,GACDF,EAAU4G,YAAY1G,GAExBrnB,EAAUc,YAAYsmB,EAAmB,yBAGxCI,IACDA,EAAYp1B,SAAS,GAAG5D,QAAU,MAEpCwR,EAAUc,YAAYqmB,EAAW,wBACjCnnB,EAAUkB,SAAUimB,EAAW,oBAC/BxU,EAAGgZ,SAAQ,KAITnmB,EAASrS,uBACX6M,EAAUc,YAAaqmB,EAAW,oBAEpC3b,EAAQ,gBAAiB,WACpBhG,EAASrS,uBACV6M,EAAUc,YAAaqmB,EAAW,sBAGtC3b,EAAQ,iBAAkB,WACxBxL,EAAUkB,SAAUimB,EAAW,sBAGjC3b,EAAQ,sBAAuBghB,GAE/Bc,IAEG9nB,EAAS/S,SAAW80B,GAAgBC,IACrCa,GAAoB,GAGtBoC,IAEAoC,IAEAZ,IAEAI,KAGF1Z,EAAGgZ,QAAU,SAASqC,GACpBtG,EAAUsG,EACVzD,EAAiBpD,EAAW,WAAY6G,IAG1Crb,EAAGpE,OAAS,WAEP6Z,GAAoBnB,EAAK1a,UAE1BoG,EAAGsb,uBAEAzoB,EAASvT,YACVuT,EAASzT,iBAAiBk1B,EAAK1a,SAAU6a,GAEzCmD,EAAiBnD,EAAmB,kBAAmBH,EAAK1a,SAASpa,QAGvEg2B,GAAoB,GAGpBA,GAAoB,EAGlBE,GACFuC,IAGFH,KAGF9X,EAAGyZ,iBAAmB,SAAS19B,GAE1BA,GAGDN,WAAW,WACT64B,EAAKnX,gBAAiB,EAAG9P,EAAUY,eAClC,IAILZ,GAAYknB,EAAciG,eAAiB,MAAQ,UAAY,SAAUlG,EAAKnnB,SAAU,aAG1F6S,EAAGsb,qBAAuB,WACrBzoB,EAASujB,YACVzB,EAAgBj1B,UAAa40B,EAAKtV,kBAAkB,EAClDnM,EAASokB,kBACTpkB,EAASqa,kBAIflN,EAAGkb,YAAc,SAASn/B,GACxBA,EAAIA,GAAKC,OAAOC,KAChB,IAAIK,GAASP,EAAEO,QAAUP,EAAEQ,UAE3B,KAAG64B,EAIH,GAAGr5B,EAAE21B,QAAmC,UAAzB31B,EAAE21B,OAAOrJ,YAAyB,CAG/C,GAAGyQ,EAAex8B,GAEhB,WADAg4B,GAAK3T,OAIJtT,GAAUmB,SAASlS,EAAQ,eACD,IAAxBg4B,EAAKvV,gBAAwBuV,EAAKvV,gBAAkBuV,EAAK1a,SAASC,SAChEhH,EAAS4jB,yBACVnC,EAAK3T,QAGP2T,EAAKzC,kBAAkB91B,EAAE21B,OAAOlK,mBAgBpC,IATG3U,EAAS2jB,sBACPf,EACDzV,EAAGoa,eAEHpa,EAAGqa,gBAKJxnB,EAAS0jB,aAAelpB,EAAUmB,SAASlS,EAAQ,cAAgBw8B,EAAex8B,IAEnF,WADAg4B,GAAK3T,SAMXX,EAAGmb,YAAc,SAASp/B,GACxBA,EAAIA,GAAKC,OAAOC,KAChB,IAAIK,GAASP,EAAEO,QAAUP,EAAEQ,UAG3Bq7B,GAAiBpD,EAAW,iBAAkBsE,EAAex8B,KAG/D0jB,EAAGoa,aAAe,WAChB/sB,EAAUkB,SAASimB,EAAU,oBAC7BiB,GAAmB,GAGrBzV,EAAGqa,aAAe,WAChB5E,GAAmB,EACfD,GACFxV,EAAGpE,SAELvO,EAAUc,YAAYqmB,EAAU,qBAGlCxU,EAAGub,mBAAqB,WACtB,GAAIlkC,GAAIoD,QACR,UAAUpD,EAAEmkC,gBAAkBnkC,EAAEokC,qBAAuBpkC,EAAEqkC,sBAAwBrkC,EAAEskC,mBAGrF3b,EAAGuZ,iBAAmB,WACpB,GACEqC,GADEC,EAAKphC,SAASiE,gBAEhBo9B,EAAK,kBA0DP,OAxDID,GAAGE,kBACLH,GACEI,OAAQ,oBACRC,MAAO,iBACPC,SAAU,oBACV1C,OAAQsC,GAGFD,EAAGM,qBACXP,GACEI,OAAQ,uBACRC,MAAO,sBACPC,SAAU,uBACV1C,OAAQ,MAAQsC,GAKVD,EAAGO,wBACXR,GACEI,OAAQ,0BACRC,MAAO,uBACPC,SAAU,0BACV1C,OAAQ,SAAWsC,GAGbD,EAAGQ,sBACXT,GACEI,OAAQ,sBACRC,MAAO,mBACPC,SAAU,sBACV1C,OAAQ,uBAIToC,IACDA,EAAIlB,MAAQ,WAKV,GAHA5F,EAA4BjiB,EAASO,cACrCP,EAASO,eAAgB,EAEN,4BAAhBzc,KAAKqlC,OAGN,MAAO1H,GAAKnnB,SAASxW,KAAKqlC,SAF1B1H,GAAKnnB,SAASxW,KAAKqlC,QAASM,QAAQC,uBAKxCX,EAAInB,KAAO,WAGT,MAFA5nB,GAASO,cAAgB0hB,EAElBr6B,SAAS9D,KAAKslC,UAGvBL,EAAIpB,aAAe,WAAa,MAAO//B,UAAS9D,KAAKulC,YAGhDN","file":"vue-photo-preview.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vue-photo-preview\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vue-photo-preview\"] = factory();\n\telse\n\t\troot[\"vue-photo-preview\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vue-photo-preview\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vue-photo-preview\"] = factory();\n\telse\n\t\troot[\"vue-photo-preview\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(3);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__photoswipe_css__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__photoswipe_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__photoswipe_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__default_skin_default_skin_css__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__default_skin_default_skin_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__default_skin_default_skin_css__);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({});\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__preview_vue__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__photoswipe__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__photoswipe_ui_default__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__photoswipe_ui_default___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__photoswipe_ui_default__);\n\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n\n\n\n\nvar $preview = void 0;\nvar vuePhotoPreview = {\n  install: function install(Vue, opts) {\n    var Preview = Vue.extend(__WEBPACK_IMPORTED_MODULE_1__preview_vue__[\"a\" /* default */]);\n    var opts = opts || {};\n    if (!$preview) {\n      $preview = new Preview({ el: document.createElement('div') });\n      document.body.appendChild($preview.$el);\n    }\n    var eventName = void 0,\n        eventCallback = void 0;\n    Vue.prototype.$preview = {\n      self: null,\n      on: function on(name, callback) {\n        eventName = name;\n        eventCallback = callback;\n      }\n    };\n    Vue.mixin({\n      data: function data() {\n        return {\n          galleryElements: null,\n          galleryPicLoading: false\n        };\n      },\n\n      methods: {\n        $previewRefresh: function $previewRefresh() {\n          var _this = this;\n\n          setTimeout(function () {\n            _this.galleryElements = document.querySelectorAll('img[preview]');\n            for (var i = 0, l = _this.galleryElements.length; i < l; i++) {\n              _this.galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n              _this.galleryElements[i].onclick = _this.onThumbnailsClick;\n            }\n          }, 200);\n        },\n        onThumbnailsClick: function onThumbnailsClick(e) {\n          if (this.galleryPicLoading) return false;\n          this.galleryPicLoading = true;\n          e = e || window.event;\n          e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n          var eTarget = e.target || e.srcElement;\n\n          var thumbElements;\n          var group = eTarget.getAttribute('preview');\n          if (group) {\n            thumbElements = document.querySelectorAll('img[preview=\"' + group + '\"]');\n          } else {\n            thumbElements = document.querySelectorAll('img[preview]');\n          }\n          var clickedGallery = thumbElements;\n\n          var index;\n\n          for (var i = 0; i < clickedGallery.length; i++) {\n            if (clickedGallery[i] === eTarget) {\n              index = i;\n              break;\n            }\n          }\n          if (index >= 0) {\n            this.openPhotoSwipe(index, clickedGallery);\n            this.$emit('preview-open', e, eTarget.src);\n          }\n          return false;\n        },\n        openPhotoSwipe: function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n          var _this2 = this;\n\n          return _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2() {\n            var pswpElement, gallery, options, items, j, realViewportWidth, useLargeImages, firstResize, imageSrcWillChange, loadingTag;\n            return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    pswpElement = document.querySelectorAll('.pswp')[0];\n                    _context2.next = 3;\n                    return _this2.parseThumbnailElements(galleryElement);\n\n                  case 3:\n                    items = _context2.sent;\n\n                    options = {\n\n                      // galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n                      getThumbBoundsFn: function getThumbBoundsFn(index) {\n                        //在点开和关闭大图时调用，计算动画缩放效果需要的位置\n                        var thumbnail = items[index].el,\n                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n                            rect = thumbnail.getBoundingClientRect();\n                        return {\n                          x: rect.left,\n                          y: rect.top + pageYScroll,\n                          w: rect.width\n                        };\n                      },\n\n                      addCaptionHTMLFn: function addCaptionHTMLFn(item, captionEl, isFake) {\n                        if (!item.title) {\n                          captionEl.children[0].innerText = '';\n                          return false;\n                        }\n                        captionEl.children[0].innerHTML = item.title;\n                        return true;\n                      },\n                      showHideOpacity: true,\n                      history: false,\n                      shareEl: false,\n                      maxSpreadZoom: 3,\n                      getDoubleTapZoom: function getDoubleTapZoom(isMouseClick, item) {\n                        if (isMouseClick) {\n\n                          return 1.5;\n                        } else {\n                          return item.initialZoomLevel < 0.7 ? 1 : 1.5;\n                        }\n                      }\n\n                    };\n\n                    if (!fromURL) {\n                      _context2.next = 20;\n                      break;\n                    }\n\n                    if (!options.galleryPIDs) {\n                      _context2.next = 17;\n                      break;\n                    }\n\n                    j = 0;\n\n                  case 8:\n                    if (!(j < items.length)) {\n                      _context2.next = 15;\n                      break;\n                    }\n\n                    if (!(items[j].pid == index)) {\n                      _context2.next = 12;\n                      break;\n                    }\n\n                    options.index = j;\n                    return _context2.abrupt('break', 15);\n\n                  case 12:\n                    j++;\n                    _context2.next = 8;\n                    break;\n\n                  case 15:\n                    _context2.next = 18;\n                    break;\n\n                  case 17:\n                    options.index = parseInt(index, 10) - 1;\n\n                  case 18:\n                    _context2.next = 21;\n                    break;\n\n                  case 20:\n                    options.index = parseInt(index, 10);\n\n                  case 21:\n                    if (!isNaN(options.index)) {\n                      _context2.next = 23;\n                      break;\n                    }\n\n                    return _context2.abrupt('return');\n\n                  case 23:\n                    options = _this2.extend(options, opts);\n\n                    if (disableAnimation) {\n                      options.showAnimationDuration = 0;\n                    }\n\n                    // Pass data to PhotoSwipe and initialize it\n                    gallery = new __WEBPACK_IMPORTED_MODULE_2__photoswipe__[\"a\" /* default */](pswpElement, __WEBPACK_IMPORTED_MODULE_3__photoswipe_ui_default___default.a, items, options);\n                    Vue.prototype.$preview.self = gallery;\n                    // see: http://photoswipe.com/documentation/responsive-images.html\n                    useLargeImages = false, firstResize = true;\n\n\n                    gallery.listen('beforeResize', function () {\n\n                      var dpiRatio = window.devicePixelRatio ? window.devicePixelRatio : 1;\n                      dpiRatio = Math.min(dpiRatio, 2.5);\n                      realViewportWidth = gallery.viewportSize.x * dpiRatio;\n\n                      if (realViewportWidth >= 1200 || !gallery.likelyTouchDevice && realViewportWidth > 800 || screen.width > 1200) {\n                        if (!useLargeImages) {\n                          useLargeImages = true;\n                          imageSrcWillChange = true;\n                        }\n                      } else {\n                        if (useLargeImages) {\n                          useLargeImages = false;\n                          imageSrcWillChange = true;\n                        }\n                      }\n\n                      if (imageSrcWillChange && !firstResize) {\n                        gallery.invalidateCurrItems();\n                      }\n\n                      if (firstResize) {\n                        firstResize = false;\n                      }\n\n                      imageSrcWillChange = false;\n                    });\n                    loadingTag = {};\n\n                    gallery.listen('gettingData', function () {\n                      var _ref = _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(index, item) {\n                        var currIndex, items, l;\n                        return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n                          while (1) {\n                            switch (_context.prev = _context.next) {\n                              case 0:\n                                if (!loadingTag[index]) {\n                                  _context.next = 5;\n                                  break;\n                                }\n\n                                _context.next = 3;\n                                return loadingTag[index];\n\n                              case 3:\n                                loadingTag[index] = null;\n                                //console.log(\"多次调用，等待完毕.\");\n                                return _context.abrupt('return');\n\n                              case 5:\n                                currIndex = index, items = gallery.items;\n\n                                if (!(item.o.w === 0x3f3f3f3f)) {\n                                  _context.next = 13;\n                                  break;\n                                }\n\n                                l = new Image();\n                                //console.log(item.src);\n\n                                loadingTag[index] = new Promise(function (resolve) {\n                                  l.src = item.src;\n                                  l.onload = function () {\n                                    // let scale=l.height/l.width;\n                                    // item.o.w=item.m.w=item.w=Math.max(l.width,item.rw);\n                                    item.o.w = item.m.w = l.width;\n                                    // item.o.h=item.m.h=item.h=scale*item.w;\n                                    item.o.h = item.m.h = l.height;\n                                    resolve();\n                                  };\n                                });\n                                _context.next = 11;\n                                return loadingTag[index];\n\n                              case 11:\n                                if (item.el.getAttribute('large')) {\n                                  item.src = item.o.src;\n                                  item.w = item.o.w;\n                                  item.h = item.o.h;\n                                } else {\n                                  item.src = item.m.src;\n                                  item.w = item.m.w;\n                                  item.h = item.m.h;\n                                }\n                                // gallery.invalidateCurrItems();\n                                // gallery.updateSize(true);\n                                //console.log(\"after: \", index, [item.w, item.h]);\n                                loadingTag[index] = null;\n\n                              case 13:\n                              case 'end':\n                                return _context.stop();\n                            }\n                          }\n                        }, _callee, _this2);\n                      }));\n\n                      return function (_x, _x2) {\n                        return _ref.apply(this, arguments);\n                      };\n                    }());\n                    gallery.listen('imageLoadComplete', function (index, ITEM) {\n                      _this2.galleryPicLoading = false;\n                    });\n                    gallery.listen(eventName, eventCallback);\n                    gallery.init();\n                    $preview.$el.classList = $preview.$el.classList + ' pswp--zoom-allowed';\n\n                  case 35:\n                  case 'end':\n                    return _context2.stop();\n                }\n              }\n            }, _callee2, _this2);\n          }))();\n        },\n        parseThumbnailElements: function parseThumbnailElements(thumbElements) {\n          return new Promise(function (resolve) {\n            var items = new Array(thumbElements.length),\n                el,\n                load = 0,\n                item;\n            item = {};\n            var count = 0;\n            for (var i = 0; i < thumbElements.length; i++) {\n              var getImage = function getImage(index) {\n                if (typeof el.naturalWidth == \"undefined\") {\n                  // IE 6/7/8\n                  var _i = new Image();\n                  _i.src = el.src;\n                  var rw = _i.width;\n                  var rh = _i.height;\n                } else {\n                  // HTML5 browsers\n                  //使用缩略图的宽高作为实际宽高\n                  var rw = el.naturalWidth;\n                  var rh = el.naturalHeight;\n                }\n                var l = {};\n                l.src = el.getAttribute('large') ? el.getAttribute('large') : el.getAttribute('src');\n                l.text = el.getAttribute('preview-text');\n                l.author = el.getAttribute('data-author');\n\n                item = {\n                  title: l.text,\n                  el: thumbElements[index],\n                  src: l.src,\n                  w: rw,\n                  h: rh,\n                  rw: rw,\n                  rh: rh,\n                  author: l.author,\n                  o: {\n                    src: l.src,\n                    w: 0x3f3f3f3f,\n                    h: 0x3f3f3f3f\n                  },\n                  m: {\n                    src: l.src,\n                    w: 0x3f3f3f3f,\n                    h: 0x3f3f3f3f\n                  }\n                };\n                items[index] = item;\n                count++;\n                if (count === thumbElements.length) {\n                  resolve(items);\n                }\n              };\n\n              el = thumbElements[i];\n\n              // include only element nodes\n              if (el.nodeType !== 1) {\n                continue;\n              }\n\n              getImage(i);\n            }\n          });\n        },\n        extend: function extend(o1, o2) {\n          for (var prop in o2) {\n            o1[prop] = o2[prop];\n          }\n          return o1;\n        },\n        initPreview: function initPreview(gallerySelector) {\n          this.galleryElements = document.querySelectorAll(gallerySelector);\n          for (var i = 0, l = this.galleryElements.length; i < l; i++) {\n            this.galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n            this.galleryElements[i].onclick = this.onThumbnailsClick;\n          }\n        }\n      },\n      mounted: function mounted() {\n        this.initPreview('img[preview]');\n      }\n    });\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (vuePhotoPreview);\n\nif (typeof window !== 'undefined' && !window.vuePhotoPreview) {\n  window.vuePhotoPreview = vuePhotoPreview;\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() { return this })() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = __webpack_require__(4);\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() { return this })() || Function(\"return this\")()\n);\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_registry_npmjs_org_vue_loader_13_7_3_node_modules_vue_loader_lib_selector_type_script_index_0_preview_vue__ = __webpack_require__(1);\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_registry_npmjs_org_vue_loader_13_7_3_node_modules_vue_loader_lib_template_compiler_index_id_data_v_321b1d0a_hasScoped_false_buble_transforms_node_modules_registry_npmjs_org_vue_loader_13_7_3_node_modules_vue_loader_lib_selector_type_template_index_0_preview_vue__ = __webpack_require__(9);\nvar normalizeComponent = __webpack_require__(6)\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_registry_npmjs_org_vue_loader_13_7_3_node_modules_vue_loader_lib_selector_type_script_index_0_preview_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_registry_npmjs_org_vue_loader_13_7_3_node_modules_vue_loader_lib_template_compiler_index_id_data_v_321b1d0a_hasScoped_false_buble_transforms_node_modules_registry_npmjs_org_vue_loader_13_7_3_node_modules_vue_loader_lib_selector_type_template_index_0_preview_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file.\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pswp\",attrs:{\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"pswp__bg\"}),_vm._v(\" \"),_c('div',{staticClass:\"pswp__scroll-wrap\"},[_c('div',{staticClass:\"pswp__container\"},[_c('div',{staticClass:\"pswp__item\"}),_vm._v(\" \"),_c('div',{staticClass:\"pswp__item\"}),_vm._v(\" \"),_c('div',{staticClass:\"pswp__item\"})]),_vm._v(\" \"),_c('div',{staticClass:\"pswp__ui pswp__ui--hidden\"},[_c('div',{staticClass:\"pswp__top-bar\"},[_c('div',{staticClass:\"pswp__counter\"}),_vm._v(\" \"),_c('button',{staticClass:\"pswp__button pswp__button--close\",attrs:{\"title\":\"Close (Esc)\"}}),_vm._v(\" \"),_c('button',{staticClass:\"pswp__button pswp__button--share\",attrs:{\"title\":\"Share\"}}),_vm._v(\" \"),_c('button',{staticClass:\"pswp__button pswp__button--fs\",attrs:{\"title\":\"Toggle fullscreen\"}}),_vm._v(\" \"),_c('button',{staticClass:\"pswp__button pswp__button--zoom\",attrs:{\"title\":\"Zoom in/out\"}}),_vm._v(\" \"),_c('div',{staticClass:\"pswp__preloader\"},[_c('div',{staticClass:\"pswp__preloader__icn\"},[_c('div',{staticClass:\"pswp__preloader__cut\"},[_c('div',{staticClass:\"pswp__preloader__donut\"})])])])]),_vm._v(\" \"),_c('div',{staticClass:\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\"},[_c('div',{staticClass:\"pswp__share-tooltip\"})]),_vm._v(\" \"),_c('button',{staticClass:\"pswp__button pswp__button--arrow--left\",attrs:{\"title\":\"Previous (arrow left)\"}}),_vm._v(\" \"),_c('button',{staticClass:\"pswp__button pswp__button--arrow--right\",attrs:{\"title\":\"Next (arrow right)\"}}),_vm._v(\" \"),_c('div',{staticClass:\"pswp__caption\"},[_c('div',{staticClass:\"pswp__caption__center\"})])])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n\n\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar PhotoSwipe = function PhotoSwipe(template, UiClass, items, options) {\n\n  /*>>framework-bridge*/\n  /**\n   *\n   * Set of generic functions used by gallery.\n   *\n   * You're free to modify anything here as long as functionality is kept.\n   *\n   */\n  var framework = {\n    features: null,\n    bind: function bind(target, type, listener, unbind) {\n      var methodName = (unbind ? 'remove' : 'add') + 'EventListener';\n      type = type.split(' ');\n      for (var i = 0; i < type.length; i++) {\n        if (type[i]) {\n          target[methodName](type[i], listener, false);\n        }\n      }\n    },\n    isArray: function isArray(obj) {\n      return obj instanceof Array;\n    },\n    createEl: function createEl(classes, tag) {\n      var el = document.createElement(tag || 'div');\n      if (classes) {\n        el.className = classes;\n      }\n      return el;\n    },\n    getScrollY: function getScrollY() {\n      var yOffset = window.pageYOffset;\n      return yOffset !== undefined ? yOffset : document.documentElement.scrollTop;\n    },\n    unbind: function unbind(target, type, listener) {\n      framework.bind(target, type, listener, true);\n    },\n    removeClass: function removeClass(el, className) {\n      var reg = new RegExp('(\\\\s|^)' + className + '(\\\\s|$)');\n      el.className = el.className.replace(reg, ' ').replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n    },\n    addClass: function addClass(el, className) {\n      if (!framework.hasClass(el, className)) {\n        el.className += (el.className ? ' ' : '') + className;\n      }\n    },\n    hasClass: function hasClass(el, className) {\n      return el.className && new RegExp('(^|\\\\s)' + className + '(\\\\s|$)').test(el.className);\n    },\n    getChildByClass: function getChildByClass(parentEl, childClassName) {\n      var node = parentEl.firstChild;\n      while (node) {\n        if (framework.hasClass(node, childClassName)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    },\n    arraySearch: function arraySearch(array, value, key) {\n      var i = array.length;\n      while (i--) {\n        if (array[i][key] === value) {\n          return i;\n        }\n      }\n      return -1;\n    },\n    extend: function extend(o1, o2, preventOverwrite) {\n      for (var prop in o2) {\n        if (o2.hasOwnProperty(prop)) {\n          if (preventOverwrite && o1.hasOwnProperty(prop)) {\n            continue;\n          }\n          o1[prop] = o2[prop];\n        }\n      }\n    },\n    easing: {\n      sine: {\n        out: function out(k) {\n          return Math.sin(k * (Math.PI / 2));\n        },\n        inOut: function inOut(k) {\n          return -(Math.cos(Math.PI * k) - 1) / 2;\n        }\n      },\n      cubic: {\n        out: function out(k) {\n          return --k * k * k + 1;\n        }\n        /*\n        elastic: {\n        out: function ( k ) {\n             var s, a = 0.1, p = 0.4;\n            if ( k === 0 ) return 0;\n            if ( k === 1 ) return 1;\n            if ( !a || a < 1 ) { a = 1; s = p / 4; }\n            else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n            return ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );\n         },\n        },\n        back: {\n        out: function ( k ) {\n            var s = 1.70158;\n            return --k * k * ( ( s + 1 ) * k + s ) + 1;\n        }\n        }\n        */\n      } },\n\n    /**\n     *\n     * @return {object}\n     *\n     * {\n    *  raf : request animation frame function\n    *  caf : cancel animation frame function\n    *  transfrom : transform property key (with vendor), or null if not supported\n    *  oldIE : IE8 or below\n    * }\n     *\n     */\n    detectFeatures: function detectFeatures() {\n      if (framework.features) {\n        return framework.features;\n      }\n      var helperEl = framework.createEl(),\n          helperStyle = helperEl.style,\n          vendor = '',\n          features = {};\n\n      // IE8 and below\n      features.oldIE = document.all && !document.addEventListener;\n\n      features.touch = 'ontouchstart' in window;\n\n      if (window.requestAnimationFrame) {\n        features.raf = window.requestAnimationFrame;\n        features.caf = window.cancelAnimationFrame;\n      }\n\n      features.pointerEvent = !!window.PointerEvent || navigator.msPointerEnabled;\n\n      // fix false-positive detection of old Android in new IE\n      // (IE11 ua string contains \"Android 4.0\")\n\n      if (!features.pointerEvent) {\n\n        var ua = navigator.userAgent;\n\n        // Detect if device is iPhone or iPod and if it's older than iOS 8\n        // http://stackoverflow.com/a/14223920\n        //\n        // This detection is made because of buggy top/bottom toolbars\n        // that don't trigger window.resize event.\n        // For more info refer to _isFixedPosition variable in core.js\n\n        if (/iP(hone|od)/.test(navigator.platform)) {\n          var v = navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n          if (v && v.length > 0) {\n            v = parseInt(v[1], 10);\n            if (v >= 1 && v < 8) {\n              features.isOldIOSPhone = true;\n            }\n          }\n        }\n\n        // Detect old Android (before KitKat)\n        // due to bugs related to position:fixed\n        // http://stackoverflow.com/questions/7184573/pick-up-the-android-version-in-the-browser-by-javascript\n\n        var match = ua.match(/Android\\s([0-9\\.]*)/);\n        var androidversion = match ? match[1] : 0;\n        androidversion = parseFloat(androidversion);\n        if (androidversion >= 1) {\n          if (androidversion < 4.4) {\n            features.isOldAndroid = true; // for fixed position bug & performance\n          }\n          features.androidVersion = androidversion; // for touchend bug\n        }\n        features.isMobileOpera = /opera mini|opera mobi/i.test(ua);\n\n        // p.s. yes, yes, UA sniffing is bad, propose your solution for above bugs.\n      }\n\n      var styleChecks = ['transform', 'perspective', 'animationName'],\n          vendors = ['', 'webkit', 'Moz', 'ms', 'O'],\n          styleCheckItem,\n          styleName;\n\n      for (var i = 0; i < 4; i++) {\n        vendor = vendors[i];\n\n        for (var a = 0; a < 3; a++) {\n          styleCheckItem = styleChecks[a];\n\n          // uppercase first letter of property name, if vendor is present\n          styleName = vendor + (vendor ? styleCheckItem.charAt(0).toUpperCase() + styleCheckItem.slice(1) : styleCheckItem);\n\n          if (!features[styleCheckItem] && styleName in helperStyle) {\n            features[styleCheckItem] = styleName;\n          }\n        }\n\n        if (vendor && !features.raf) {\n          vendor = vendor.toLowerCase();\n          features.raf = window[vendor + 'RequestAnimationFrame'];\n          if (features.raf) {\n            features.caf = window[vendor + 'CancelAnimationFrame'] || window[vendor + 'CancelRequestAnimationFrame'];\n          }\n        }\n      }\n\n      if (!features.raf) {\n        var lastTime = 0;\n        features.raf = function (fn) {\n          var currTime = new Date().getTime();\n          var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n          var id = window.setTimeout(function () {\n            fn(currTime + timeToCall);\n          }, timeToCall);\n          lastTime = currTime + timeToCall;\n          return id;\n        };\n        features.caf = function (id) {\n          clearTimeout(id);\n        };\n      }\n\n      // Detect SVG support\n      features.svg = !!document.createElementNS && !!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;\n\n      framework.features = features;\n\n      return features;\n    }\n  };\n\n  framework.detectFeatures();\n\n  // Override addEventListener for old versions of IE\n  if (framework.features.oldIE) {\n\n    framework.bind = function (target, type, listener, unbind) {\n\n      type = type.split(' ');\n\n      var methodName = (unbind ? 'detach' : 'attach') + 'Event',\n          evName,\n          _handleEv = function _handleEv() {\n        listener.handleEvent.call(listener);\n      };\n\n      for (var i = 0; i < type.length; i++) {\n        evName = type[i];\n        if (evName) {\n\n          if ((typeof listener === 'undefined' ? 'undefined' : _typeof(listener)) === 'object' && listener.handleEvent) {\n            if (!unbind) {\n              listener['oldIE' + evName] = _handleEv;\n            } else {\n              if (!listener['oldIE' + evName]) {\n                return false;\n              }\n            }\n\n            target[methodName]('on' + evName, listener['oldIE' + evName]);\n          } else {\n            target[methodName]('on' + evName, listener);\n          }\n        }\n      }\n    };\n  }\n\n  /*>>framework-bridge*/\n\n  /*>>core*/\n  //function(template, UiClass, items, options)\n\n  var self = this;\n\n  /**\n   * Static vars, don't change unless you know what you're doing.\n   */\n  var DOUBLE_TAP_RADIUS = 25,\n      NUM_HOLDERS = 3;\n\n  /**\n   * Options\n   */\n  var _options = {\n    allowPanToNext: true,\n    spacing: 0.12,\n    bgOpacity: 1,\n    mouseUsed: false,\n    loop: true,\n    pinchToClose: true,\n    closeOnScroll: true,\n    closeOnVerticalDrag: true,\n    verticalDragRange: 0.75,\n    hideAnimationDuration: 333,\n    showAnimationDuration: 333,\n    showHideOpacity: false,\n    focus: true,\n    escKey: true,\n    arrowKeys: true,\n    mainScrollEndFriction: 0.35,\n    panEndFriction: 0.35,\n    isClickableElement: function isClickableElement(el) {\n      return el.tagName === 'A';\n    },\n    getDoubleTapZoom: function getDoubleTapZoom(isMouseClick, item) {\n      if (isMouseClick) {\n        return 1;\n      } else {\n        return item.initialZoomLevel < 0.7 ? 1 : 1.33;\n      }\n    },\n    maxSpreadZoom: 1.33,\n    modal: true,\n\n    // not fully implemented yet\n    scaleMode: 'fit' // TODO\n  };\n  framework.extend(_options, options);\n\n  /**\n   * Private helper variables & functions\n   */\n\n  var _getEmptyPoint = function _getEmptyPoint() {\n    return { x: 0, y: 0 };\n  };\n\n  var _isOpen,\n      _isDestroying,\n      _closedByScroll,\n      _currentItemIndex,\n      _containerStyle,\n      _containerShiftIndex,\n      _currPanDist = _getEmptyPoint(),\n      _startPanOffset = _getEmptyPoint(),\n      _panOffset = _getEmptyPoint(),\n      _upMoveEvents,\n      // drag move, drag end & drag cancel events array\n  _downEvents,\n      // drag start events array\n  _globalEventHandlers,\n      _viewportSize = {},\n      _currZoomLevel,\n      _startZoomLevel,\n      _translatePrefix,\n      _translateSufix,\n      _updateSizeInterval,\n      _itemsNeedUpdate,\n      _currPositionIndex = 0,\n      _offset = {},\n      _slideSize = _getEmptyPoint(),\n      // size of slide area, including spacing\n  _itemHolders,\n      _prevItemIndex,\n      _indexDiff = 0,\n      // difference of indexes since last content update\n  _dragStartEvent,\n      _dragMoveEvent,\n      _dragEndEvent,\n      _dragCancelEvent,\n      _transformKey,\n      _pointerEventEnabled,\n      _isFixedPosition = true,\n      _likelyTouchDevice,\n      _modules = [],\n      _requestAF,\n      _cancelAF,\n      _initalClassName,\n      _initalWindowScrollY,\n      _oldIE,\n      _currentWindowScrollY,\n      _features,\n      _windowVisibleSize = {},\n      _renderMaxResolution = false,\n      _orientationChangeTimeout,\n\n\n  // Registers PhotoSWipe module (History, Controller ...)\n  _registerModule = function _registerModule(name, module) {\n    framework.extend(self, module.publicMethods);\n    _modules.push(name);\n  },\n      _getLoopedId = function _getLoopedId(index) {\n    var numSlides = _getNumItems();\n    if (index > numSlides - 1) {\n      return index - numSlides;\n    } else if (index < 0) {\n      return numSlides + index;\n    }\n    return index;\n  },\n\n\n  // Micro bind/trigger\n  _listeners = {},\n      _listen = function _listen(name, fn) {\n    if (!_listeners[name]) {\n      _listeners[name] = [];\n    }\n    return _listeners[name].push(fn);\n  },\n      _shout = function _shout(name) {\n    var listeners = _listeners[name];\n\n    if (listeners) {\n      var args = Array.prototype.slice.call(arguments);\n      args.shift();\n\n      for (var i = 0; i < listeners.length; i++) {\n        listeners[i].apply(self, args);\n      }\n    }\n  },\n      _shoutAsync = function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(name) {\n      var listeners,\n          args,\n          _p,\n          i,\n          _args = arguments;\n\n      return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              listeners = _listeners[name];\n\n              if (!listeners) {\n                _context.next = 7;\n                break;\n              }\n\n              args = Array.prototype.slice.call(_args);\n\n              args.shift();\n              _p = [];\n\n              for (i = 0; i < listeners.length; i++) {\n                _p.push(listeners[i].apply(self, args));\n              }\n              return _context.abrupt('return', Promise.all(_p));\n\n            case 7:\n            case 'end':\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function _shoutAsync(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(),\n      _getCurrentTime = function _getCurrentTime() {\n    return new Date().getTime();\n  },\n      _applyBgOpacity = function _applyBgOpacity(opacity) {\n    _bgOpacity = opacity;\n    self.bg.style.opacity = opacity * _options.bgOpacity;\n  },\n      _applyZoomTransform = function _applyZoomTransform(styleObj, x, y, zoom, item) {\n    if (!_renderMaxResolution || item && item !== self.currItem) {\n      zoom = zoom / (item ? item.fitRatio : self.currItem.fitRatio);\n    }\n\n    styleObj[_transformKey] = _translatePrefix + x + 'px, ' + y + 'px' + _translateSufix + ' scale(' + zoom + ')';\n  },\n      _applyCurrentZoomPan = function _applyCurrentZoomPan(allowRenderResolution) {\n    if (_currZoomElementStyle) {\n\n      if (allowRenderResolution) {\n        if (_currZoomLevel > self.currItem.fitRatio) {\n          if (!_renderMaxResolution) {\n            _setImageSize(self.currItem, false, true);\n            _renderMaxResolution = true;\n          }\n        } else {\n          if (_renderMaxResolution) {\n            _setImageSize(self.currItem);\n            _renderMaxResolution = false;\n          }\n        }\n      }\n\n      _applyZoomTransform(_currZoomElementStyle, _panOffset.x, _panOffset.y, _currZoomLevel);\n    }\n  },\n      _applyZoomPanToItem = function _applyZoomPanToItem(item) {\n    if (item.container) {\n\n      _applyZoomTransform(item.container.style, item.initialPosition.x, item.initialPosition.y, item.initialZoomLevel, item);\n    }\n  },\n      _setTranslateX = function _setTranslateX(x, elStyle) {\n    elStyle[_transformKey] = _translatePrefix + x + 'px, 0px' + _translateSufix;\n  },\n      _moveMainScroll = function _moveMainScroll(x, dragging) {\n\n    if (!_options.loop && dragging) {\n      var newSlideIndexOffset = _currentItemIndex + (_slideSize.x * _currPositionIndex - x) / _slideSize.x,\n          delta = Math.round(x - _mainScrollPos.x);\n\n      if (newSlideIndexOffset < 0 && delta > 0 || newSlideIndexOffset >= _getNumItems() - 1 && delta < 0) {\n        x = _mainScrollPos.x + delta * _options.mainScrollEndFriction;\n      }\n    }\n\n    _mainScrollPos.x = x;\n    _setTranslateX(x, _containerStyle);\n  },\n      _calculatePanOffset = function _calculatePanOffset(axis, zoomLevel) {\n    var m = _midZoomPoint[axis] - _offset[axis];\n    return _startPanOffset[axis] + _currPanDist[axis] + m - m * (zoomLevel / _startZoomLevel);\n  },\n      _equalizePoints = function _equalizePoints(p1, p2) {\n    p1.x = p2.x;\n    p1.y = p2.y;\n    if (p2.id) {\n      p1.id = p2.id;\n    }\n  },\n      _roundPoint = function _roundPoint(p) {\n    p.x = Math.round(p.x);\n    p.y = Math.round(p.y);\n  },\n      _mouseMoveTimeout = null,\n      _onFirstMouseMove = function _onFirstMouseMove() {\n    // Wait until mouse move event is fired at least twice during 100ms\n    // We do this, because some mobile browsers trigger it on touchstart\n    if (_mouseMoveTimeout) {\n      framework.unbind(document, 'mousemove', _onFirstMouseMove);\n      framework.addClass(template, 'pswp--has_mouse');\n      _options.mouseUsed = true;\n      _shout('mouseUsed');\n    }\n    _mouseMoveTimeout = setTimeout(function () {\n      _mouseMoveTimeout = null;\n    }, 100);\n  },\n      _bindEvents = function _bindEvents() {\n    framework.bind(document, 'keydown', self);\n\n    if (_features.transform) {\n      // don't bind click event in browsers that don't support transform (mostly IE8)\n      framework.bind(self.scrollWrap, 'click', self);\n    }\n\n    if (!_options.mouseUsed) {\n      framework.bind(document, 'mousemove', _onFirstMouseMove);\n    }\n\n    framework.bind(window, 'resize scroll orientationchange', self);\n\n    _shout('bindEvents');\n  },\n      _unbindEvents = function _unbindEvents() {\n    framework.unbind(window, 'resize scroll orientationchange', self);\n    framework.unbind(window, 'scroll', _globalEventHandlers.scroll);\n    framework.unbind(document, 'keydown', self);\n    framework.unbind(document, 'mousemove', _onFirstMouseMove);\n\n    if (_features.transform) {\n      framework.unbind(self.scrollWrap, 'click', self);\n    }\n\n    if (_isDragging) {\n      framework.unbind(window, _upMoveEvents, self);\n    }\n\n    clearTimeout(_orientationChangeTimeout);\n\n    _shout('unbindEvents');\n  },\n      _calculatePanBounds = function _calculatePanBounds(zoomLevel, update) {\n    var bounds = _calculateItemSize(self.currItem, _viewportSize, zoomLevel);\n    if (update) {\n      _currPanBounds = bounds;\n    }\n    return bounds;\n  },\n      _getMinZoomLevel = function _getMinZoomLevel(item) {\n    if (!item) {\n      item = self.currItem;\n    }\n    return item.initialZoomLevel;\n  },\n      _getMaxZoomLevel = function _getMaxZoomLevel(item) {\n    if (!item) {\n      item = self.currItem;\n    }\n    return item.w > 0 ? _options.maxSpreadZoom : 1;\n  },\n\n\n  // Return true if offset is out of the bounds\n  _modifyDestPanOffset = function _modifyDestPanOffset(axis, destPanBounds, destPanOffset, destZoomLevel) {\n    if (destZoomLevel === self.currItem.initialZoomLevel) {\n      destPanOffset[axis] = self.currItem.initialPosition[axis];\n      return true;\n    } else {\n      destPanOffset[axis] = _calculatePanOffset(axis, destZoomLevel);\n\n      if (destPanOffset[axis] > destPanBounds.min[axis]) {\n        destPanOffset[axis] = destPanBounds.min[axis];\n        return true;\n      } else if (destPanOffset[axis] < destPanBounds.max[axis]) {\n        destPanOffset[axis] = destPanBounds.max[axis];\n        return true;\n      }\n    }\n    return false;\n  },\n      _setupTransforms = function _setupTransforms() {\n\n    if (_transformKey) {\n      // setup 3d transforms\n      var allow3dTransform = _features.perspective && !_likelyTouchDevice;\n      _translatePrefix = 'translate' + (allow3dTransform ? '3d(' : '(');\n      _translateSufix = _features.perspective ? ', 0px)' : ')';\n      return;\n    }\n\n    // Override zoom/pan/move functions in case old browser is used (most likely IE)\n    // (so they use left/top/width/height, instead of CSS transform)\n\n    _transformKey = 'left';\n    framework.addClass(template, 'pswp--ie');\n\n    _setTranslateX = function _setTranslateX(x, elStyle) {\n      elStyle.left = x + 'px';\n    };\n    _applyZoomPanToItem = function _applyZoomPanToItem(item) {\n\n      var zoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\n          s = item.container.style,\n          w = zoomRatio * item.w,\n          h = zoomRatio * item.h;\n\n      s.width = w + 'px';\n      s.height = h + 'px';\n      s.left = item.initialPosition.x + 'px';\n      s.top = item.initialPosition.y + 'px';\n    };\n    _applyCurrentZoomPan = function _applyCurrentZoomPan() {\n      if (_currZoomElementStyle) {\n\n        var s = _currZoomElementStyle,\n            item = self.currItem,\n            zoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\n            w = zoomRatio * item.w,\n            h = zoomRatio * item.h;\n\n        s.width = w + 'px';\n        s.height = h + 'px';\n\n        s.left = _panOffset.x + 'px';\n        s.top = _panOffset.y + 'px';\n      }\n    };\n  },\n      _onKeyDown = function _onKeyDown(e) {\n    var keydownAction = '';\n    if (_options.escKey && e.keyCode === 27) {\n      keydownAction = 'close';\n    } else if (_options.arrowKeys) {\n      if (e.keyCode === 37) {\n        keydownAction = 'prev';\n      } else if (e.keyCode === 39) {\n        keydownAction = 'next';\n      }\n    }\n\n    if (keydownAction) {\n      // don't do anything if special key pressed to prevent from overriding default browser actions\n      // e.g. in Chrome on Mac cmd+arrow-left returns to previous page\n      if (!e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey) {\n        if (e.preventDefault) {\n          e.preventDefault();\n        } else {\n          e.returnValue = false;\n        }\n        self[keydownAction]();\n      }\n    }\n  },\n      _onGlobalClick = function _onGlobalClick(e) {\n    if (!e) {\n      return;\n    }\n\n    // don't allow click event to pass through when triggering after drag or some other gesture\n    if (_moved || _zoomStarted || _mainScrollAnimating || _verticalDragInitiated) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  },\n      _updatePageScrollOffset = function _updatePageScrollOffset() {\n    self.setScrollOffset(0, framework.getScrollY());\n  };\n\n  // Micro animation engine\n  var _animations = {},\n      _numAnimations = 0,\n      _stopAnimation = function _stopAnimation(name) {\n    if (_animations[name]) {\n      if (_animations[name].raf) {\n        _cancelAF(_animations[name].raf);\n      }\n      _numAnimations--;\n      delete _animations[name];\n    }\n  },\n      _registerStartAnimation = function _registerStartAnimation(name) {\n    if (_animations[name]) {\n      _stopAnimation(name);\n    }\n    if (!_animations[name]) {\n      _numAnimations++;\n      _animations[name] = {};\n    }\n  },\n      _stopAllAnimations = function _stopAllAnimations() {\n    for (var prop in _animations) {\n\n      if (_animations.hasOwnProperty(prop)) {\n        _stopAnimation(prop);\n      }\n    }\n  },\n      _animateProp = function _animateProp(name, b, endProp, d, easingFn, onUpdate, onComplete) {\n    var startAnimTime = _getCurrentTime(),\n        t;\n    _registerStartAnimation(name);\n\n    var animloop = function animloop() {\n      if (_animations[name]) {\n\n        t = _getCurrentTime() - startAnimTime; // time diff\n        //b - beginning (start prop)\n        //d - anim duration\n\n        if (t >= d) {\n          _stopAnimation(name);\n          onUpdate(endProp);\n          if (onComplete) {\n            onComplete();\n          }\n          return;\n        }\n        onUpdate((endProp - b) * easingFn(t / d) + b);\n\n        _animations[name].raf = _requestAF(animloop);\n      }\n    };\n    animloop();\n  },\n      _animatePropAsync = function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee3(name, b, endProp, d, easingFn, onUpdate, onComplete) {\n      var startAnimTime, t, animloop;\n      return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              startAnimTime = _getCurrentTime();\n\n              _registerStartAnimation(name);\n\n              animloop = function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2() {\n                  return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          if (!_animations[name]) {\n                            _context2.next = 13;\n                            break;\n                          }\n\n                          t = _getCurrentTime() - startAnimTime; // time diff\n                          //b - beginning (start prop)\n                          //d - anim duration\n\n                          if (!(t >= d)) {\n                            _context2.next = 10;\n                            break;\n                          }\n\n                          _stopAnimation(name);\n                          _context2.next = 6;\n                          return onUpdate(endProp);\n\n                        case 6:\n                          if (!onComplete) {\n                            _context2.next = 9;\n                            break;\n                          }\n\n                          _context2.next = 9;\n                          return onComplete();\n\n                        case 9:\n                          return _context2.abrupt('return');\n\n                        case 10:\n                          _context2.next = 12;\n                          return onUpdate((endProp - b) * easingFn(t / d) + b);\n\n                        case 12:\n\n                          _animations[name].raf = _requestAF(animloop);\n\n                        case 13:\n                        case 'end':\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2, this);\n                }));\n\n                return function animloop() {\n                  return _ref3.apply(this, arguments);\n                };\n              }();\n\n              _context3.next = 5;\n              return animloop();\n\n            case 5:\n            case 'end':\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    return function _animatePropAsync(_x2, _x3, _x4, _x5, _x6, _x7, _x8) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var publicMethods = {\n\n    // make a few local variables and functions public\n    shout: _shout,\n    listen: _listen,\n    viewportSize: _viewportSize,\n    options: _options,\n\n    isMainScrollAnimating: function isMainScrollAnimating() {\n      return _mainScrollAnimating;\n    },\n    getZoomLevel: function getZoomLevel() {\n      return _currZoomLevel;\n    },\n    getCurrentIndex: function getCurrentIndex() {\n      return _currentItemIndex;\n    },\n    isDragging: function isDragging() {\n      return _isDragging;\n    },\n    isZooming: function isZooming() {\n      return _isZooming;\n    },\n    setScrollOffset: function setScrollOffset(x, y) {\n      _offset.x = x;\n      _currentWindowScrollY = _offset.y = y;\n      _shout('updateScrollOffset', _offset);\n    },\n    applyZoomPan: function applyZoomPan(zoomLevel, panX, panY, allowRenderResolution) {\n      _panOffset.x = panX;\n      _panOffset.y = panY;\n      _currZoomLevel = zoomLevel;\n      _applyCurrentZoomPan(allowRenderResolution);\n    },\n\n    init: function init() {\n\n      if (_isOpen || _isDestroying) {\n        return;\n      }\n\n      var i;\n\n      self.framework = framework; // basic functionality\n      self.template = template; // root DOM element of PhotoSwipe\n      self.bg = framework.getChildByClass(template, 'pswp__bg');\n\n      _initalClassName = template.className;\n      _isOpen = true;\n\n      _features = framework.detectFeatures();\n      _requestAF = _features.raf;\n      _cancelAF = _features.caf;\n      _transformKey = _features.transform;\n      _oldIE = _features.oldIE;\n\n      self.scrollWrap = framework.getChildByClass(template, 'pswp__scroll-wrap');\n      self.container = framework.getChildByClass(self.scrollWrap, 'pswp__container');\n\n      _containerStyle = self.container.style; // for fast access\n\n      // Objects that hold slides (there are only 3 in DOM)\n      self.itemHolders = _itemHolders = [{ el: self.container.children[0], wrap: 0, index: -1 }, { el: self.container.children[1], wrap: 0, index: -1 }, { el: self.container.children[2], wrap: 0, index: -1 }];\n\n      // hide nearby item holders until initial zoom animation finishes (to avoid extra Paints)\n      _itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'none';\n\n      _setupTransforms();\n\n      // Setup global events\n      _globalEventHandlers = {\n        resize: self.updateSize,\n\n        // Fixes: iOS 10.3 resize event\n        // does not update scrollWrap.clientWidth instantly after resize\n        // https://github.com/dimsemenov/PhotoSwipe/issues/1315\n        orientationchange: function orientationchange() {\n          clearTimeout(_orientationChangeTimeout);\n          _orientationChangeTimeout = setTimeout(function () {\n            if (_viewportSize.x !== self.scrollWrap.clientWidth) {\n              self.updateSize();\n            }\n          }, 500);\n        },\n        scroll: _updatePageScrollOffset,\n        keydown: _onKeyDown,\n        click: _onGlobalClick\n      };\n\n      // disable show/hide effects on old browsers that don't support CSS animations or transforms,\n      // old IOS, Android and Opera mobile. Blackberry seems to work fine, even older models.\n      var oldPhone = _features.isOldIOSPhone || _features.isOldAndroid || _features.isMobileOpera;\n      if (!_features.animationName || !_features.transform || oldPhone) {\n        _options.showAnimationDuration = _options.hideAnimationDuration = 0;\n      }\n\n      // init modules\n      for (i = 0; i < _modules.length; i++) {\n        self['init' + _modules[i]]();\n      }\n\n      // init\n      if (UiClass) {\n        var ui = self.ui = new UiClass(self, framework);\n        ui.init();\n      }\n\n      _shout('firstUpdate');\n      _currentItemIndex = _currentItemIndex || _options.index || 0;\n      // validate index\n      if (isNaN(_currentItemIndex) || _currentItemIndex < 0 || _currentItemIndex >= _getNumItems()) {\n        _currentItemIndex = 0;\n      }\n      self.currItem = _getItemAt(_currentItemIndex);\n\n      if (_features.isOldIOSPhone || _features.isOldAndroid) {\n        _isFixedPosition = false;\n      }\n\n      template.setAttribute('aria-hidden', 'false');\n      if (_options.modal) {\n        if (!_isFixedPosition) {\n          template.style.position = 'absolute';\n          template.style.top = framework.getScrollY() + 'px';\n        } else {\n          template.style.position = 'fixed';\n        }\n      }\n\n      if (_currentWindowScrollY === undefined) {\n        _shout('initialLayout');\n        _currentWindowScrollY = _initalWindowScrollY = framework.getScrollY();\n      }\n\n      // add classes to root element of PhotoSwipe\n      var rootClasses = 'pswp--open ';\n      if (_options.mainClass) {\n        rootClasses += _options.mainClass + ' ';\n      }\n      if (_options.showHideOpacity) {\n        rootClasses += 'pswp--animate_opacity ';\n      }\n      rootClasses += _likelyTouchDevice ? 'pswp--touch' : 'pswp--notouch';\n      rootClasses += _features.animationName ? ' pswp--css_animation' : '';\n      rootClasses += _features.svg ? ' pswp--svg' : '';\n      framework.addClass(template, rootClasses);\n\n      self.updateSize();\n\n      // initial update\n      _containerShiftIndex = -1;\n      _indexDiff = null;\n      for (i = 0; i < NUM_HOLDERS; i++) {\n        _setTranslateX((i + _containerShiftIndex) * _slideSize.x, _itemHolders[i].el.style);\n      }\n\n      if (!_oldIE) {\n        framework.bind(self.scrollWrap, _downEvents, self); // no dragging for old IE\n      }\n\n      _listen('initialZoomInEnd', _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee4() {\n        return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return self.setContentAsync(_itemHolders[0], _currentItemIndex - 1);\n\n              case 2:\n                _context4.next = 4;\n                return self.setContentAsync(_itemHolders[2], _currentItemIndex + 1);\n\n              case 4:\n\n                _itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'block';\n\n                if (_options.focus) {\n                  // focus causes layout,\n                  // which causes lag during the animation,\n                  // that's why we delay it untill the initial zoom transition ends\n                  template.focus();\n                }\n\n                _bindEvents();\n\n              case 7:\n              case 'end':\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      })));\n\n      // set content for center slide (first time)\n      self.setContent(_itemHolders[1], _currentItemIndex);\n      self.updateCurrItem();\n\n      _shout('afterInit');\n\n      if (!_isFixedPosition) {\n\n        // On all versions of iOS lower than 8.0, we check size of viewport every second.\n        //\n        // This is done to detect when Safari top & bottom bars appear,\n        // as this action doesn't trigger any events (like resize).\n        //\n        // On iOS8 they fixed this.\n        //\n        // 10 Nov 2014: iOS 7 usage ~40%. iOS 8 usage 56%.\n\n        _updateSizeInterval = setInterval(function () {\n          if (!_numAnimations && !_isDragging && !_isZooming && _currZoomLevel === self.currItem.initialZoomLevel) {\n            self.updateSize();\n          }\n        }, 1000);\n      }\n\n      framework.addClass(template, 'pswp--visible');\n    },\n\n    // Close the gallery, then destroy it\n    close: function close() {\n      if (!_isOpen) {\n        return;\n      }\n\n      _isOpen = false;\n      _isDestroying = true;\n      _shout('close');\n      _unbindEvents();\n\n      _showOrHide(self.currItem, null, true, self.destroy);\n    },\n\n    // destroys the gallery (unbinds events, cleans up intervals and timeouts to avoid memory leaks)\n    destroy: function destroy() {\n      _shout('destroy');\n\n      if (_showOrHideTimeout) {\n        clearTimeout(_showOrHideTimeout);\n      }\n\n      template.setAttribute('aria-hidden', 'true');\n      template.className = _initalClassName;\n\n      if (_updateSizeInterval) {\n        clearInterval(_updateSizeInterval);\n      }\n\n      framework.unbind(self.scrollWrap, _downEvents, self);\n\n      // we unbind scroll event at the end, as closing animation may depend on it\n      framework.unbind(window, 'scroll', self);\n\n      _stopDragUpdateLoop();\n\n      _stopAllAnimations();\n\n      _listeners = null;\n    },\n\n    /**\n     * Pan image to position\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Boolean} force Will ignore bounds if set to true.\n     */\n    panTo: function panTo(x, y, force) {\n      if (!force) {\n        if (x > _currPanBounds.min.x) {\n          x = _currPanBounds.min.x;\n        } else if (x < _currPanBounds.max.x) {\n          x = _currPanBounds.max.x;\n        }\n\n        if (y > _currPanBounds.min.y) {\n          y = _currPanBounds.min.y;\n        } else if (y < _currPanBounds.max.y) {\n          y = _currPanBounds.max.y;\n        }\n      }\n\n      _panOffset.x = x;\n      _panOffset.y = y;\n      _applyCurrentZoomPan();\n    },\n\n    handleEvent: function handleEvent(e) {\n      e = e || window.event;\n      if (_globalEventHandlers[e.type]) {\n        _globalEventHandlers[e.type](e);\n      }\n    },\n\n    goTo: function goTo(index) {\n      index = _getLoopedId(index);\n\n      var diff = index - _currentItemIndex;\n      _indexDiff = diff;\n\n      _currentItemIndex = index;\n      self.currItem = _getItemAt(_currentItemIndex);\n      _currPositionIndex -= diff;\n\n      _moveMainScroll(_slideSize.x * _currPositionIndex);\n\n      _stopAllAnimations();\n      _mainScrollAnimating = false;\n\n      self.updateCurrItem();\n    },\n    next: function next() {\n      self.goTo(_currentItemIndex + 1);\n    },\n    prev: function prev() {\n      self.goTo(_currentItemIndex - 1);\n    },\n\n    // update current zoom/pan objects\n    updateCurrZoomItem: function updateCurrZoomItem(emulateSetContent) {\n      if (emulateSetContent) {\n        _shout('beforeChange', 0);\n      }\n\n      // itemHolder[1] is middle (current) item\n      if (_itemHolders[1].el.children.length) {\n        var zoomElement = _itemHolders[1].el.children[0];\n        if (framework.hasClass(zoomElement, 'pswp__zoom-wrap')) {\n          _currZoomElementStyle = zoomElement.style;\n        } else {\n          _currZoomElementStyle = null;\n        }\n      } else {\n        _currZoomElementStyle = null;\n      }\n\n      _currPanBounds = self.currItem.bounds;\n      _startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\n\n      _panOffset.x = _currPanBounds.center.x;\n      _panOffset.y = _currPanBounds.center.y;\n\n      if (emulateSetContent) {\n        _shout('afterChange');\n      }\n    },\n\n    invalidateCurrItems: function invalidateCurrItems() {\n      _itemsNeedUpdate = true;\n      for (var i = 0; i < NUM_HOLDERS; i++) {\n        if (_itemHolders[i].item) {\n          _itemHolders[i].item.needsUpdate = true;\n        }\n      }\n    },\n\n    updateCurrItem: function updateCurrItem(beforeAnimation) {\n\n      if (_indexDiff === 0) {\n        return;\n      }\n\n      var diffAbs = Math.abs(_indexDiff),\n          tempHolder;\n\n      if (beforeAnimation && diffAbs < 2) {\n        return;\n      }\n\n      self.currItem = _getItemAt(_currentItemIndex);\n      _renderMaxResolution = false;\n\n      _shout('beforeChange', _indexDiff);\n\n      if (diffAbs >= NUM_HOLDERS) {\n        _containerShiftIndex += _indexDiff + (_indexDiff > 0 ? -NUM_HOLDERS : NUM_HOLDERS);\n        diffAbs = NUM_HOLDERS;\n      }\n      for (var i = 0; i < diffAbs; i++) {\n        if (_indexDiff > 0) {\n          tempHolder = _itemHolders.shift();\n          _itemHolders[NUM_HOLDERS - 1] = tempHolder; // move first to last\n\n          _containerShiftIndex++;\n          _setTranslateX((_containerShiftIndex + 2) * _slideSize.x, tempHolder.el.style);\n          self.setContent(tempHolder, _currentItemIndex - diffAbs + i + 1 + 1);\n        } else {\n          tempHolder = _itemHolders.pop();\n          _itemHolders.unshift(tempHolder); // move last to first\n\n          _containerShiftIndex--;\n          _setTranslateX(_containerShiftIndex * _slideSize.x, tempHolder.el.style);\n          self.setContent(tempHolder, _currentItemIndex + diffAbs - i - 1 - 1);\n        }\n      }\n\n      // reset zoom/pan on previous item\n      if (_currZoomElementStyle && Math.abs(_indexDiff) === 1) {\n\n        var prevItem = _getItemAt(_prevItemIndex);\n        if (prevItem.initialZoomLevel !== _currZoomLevel) {\n          _calculateItemSize(prevItem, _viewportSize);\n          _setImageSize(prevItem);\n          _applyZoomPanToItem(prevItem);\n        }\n      }\n\n      // reset diff after update\n      _indexDiff = 0;\n\n      self.updateCurrZoomItem();\n\n      _prevItemIndex = _currentItemIndex;\n\n      _shout('afterChange');\n    },\n    updateCurrItemAsync: function () {\n      var _ref5 = _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee5(beforeAnimation) {\n        var diffAbs, tempHolder, i, prevItem;\n        return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (!(_indexDiff === 0)) {\n                  _context5.next = 2;\n                  break;\n                }\n\n                return _context5.abrupt('return');\n\n              case 2:\n                diffAbs = Math.abs(_indexDiff);\n\n                if (!(beforeAnimation && diffAbs < 2)) {\n                  _context5.next = 5;\n                  break;\n                }\n\n                return _context5.abrupt('return');\n\n              case 5:\n\n                self.currItem = _getItemAt(_currentItemIndex);\n                _renderMaxResolution = false;\n\n                _shout('beforeChange', _indexDiff);\n\n                if (diffAbs >= NUM_HOLDERS) {\n                  _containerShiftIndex += _indexDiff + (_indexDiff > 0 ? -NUM_HOLDERS : NUM_HOLDERS);\n                  diffAbs = NUM_HOLDERS;\n                }\n                i = 0;\n\n              case 10:\n                if (!(i < diffAbs)) {\n                  _context5.next = 29;\n                  break;\n                }\n\n                if (!(_indexDiff > 0)) {\n                  _context5.next = 20;\n                  break;\n                }\n\n                tempHolder = _itemHolders.shift();\n                _itemHolders[NUM_HOLDERS - 1] = tempHolder; // move first to last\n\n                _containerShiftIndex++;\n                _setTranslateX((_containerShiftIndex + 2) * _slideSize.x, tempHolder.el.style);\n                _context5.next = 18;\n                return self.setContentAsync(tempHolder, _currentItemIndex - diffAbs + i + 1 + 1);\n\n              case 18:\n                _context5.next = 26;\n                break;\n\n              case 20:\n                tempHolder = _itemHolders.pop();\n                _itemHolders.unshift(tempHolder); // move last to first\n\n                _containerShiftIndex--;\n                _setTranslateX(_containerShiftIndex * _slideSize.x, tempHolder.el.style);\n                _context5.next = 26;\n                return self.setContentAsync(tempHolder, _currentItemIndex + diffAbs - i - 1 - 1);\n\n              case 26:\n                i++;\n                _context5.next = 10;\n                break;\n\n              case 29:\n\n                // reset zoom/pan on previous item\n                if (_currZoomElementStyle && Math.abs(_indexDiff) === 1) {\n                  prevItem = _getItemAt(_prevItemIndex);\n\n                  if (prevItem.initialZoomLevel !== _currZoomLevel) {\n                    _calculateItemSize(prevItem, _viewportSize);\n                    _setImageSize(prevItem);\n                    _applyZoomPanToItem(prevItem);\n                  }\n                }\n\n                // reset diff after update\n                _indexDiff = 0;\n\n                self.updateCurrZoomItem();\n\n                _prevItemIndex = _currentItemIndex;\n\n                _shout('afterChange');\n\n              case 34:\n              case 'end':\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function updateCurrItemAsync(_x9) {\n        return _ref5.apply(this, arguments);\n      }\n\n      return updateCurrItemAsync;\n    }(),\n\n    updateSize: function updateSize(force) {\n\n      if (!_isFixedPosition && _options.modal) {\n        var windowScrollY = framework.getScrollY();\n        if (_currentWindowScrollY !== windowScrollY) {\n          template.style.top = windowScrollY + 'px';\n          _currentWindowScrollY = windowScrollY;\n        }\n        if (!force && _windowVisibleSize.x === window.innerWidth && _windowVisibleSize.y === window.innerHeight) {\n          return;\n        }\n        _windowVisibleSize.x = window.innerWidth;\n        _windowVisibleSize.y = window.innerHeight;\n\n        //template.style.width = _windowVisibleSize.x + 'px';\n        template.style.height = _windowVisibleSize.y + 'px';\n      }\n\n      _viewportSize.x = self.scrollWrap.clientWidth;\n      _viewportSize.y = self.scrollWrap.clientHeight;\n\n      _updatePageScrollOffset();\n\n      _slideSize.x = _viewportSize.x + Math.round(_viewportSize.x * _options.spacing);\n      _slideSize.y = _viewportSize.y;\n\n      _moveMainScroll(_slideSize.x * _currPositionIndex);\n\n      _shout('beforeResize'); // even may be used for example to switch image sources\n\n\n      // don't re-calculate size on inital size update\n      if (_containerShiftIndex !== undefined) {\n\n        var holder, item, hIndex;\n\n        for (var i = 0; i < NUM_HOLDERS; i++) {\n          holder = _itemHolders[i];\n          _setTranslateX((i + _containerShiftIndex) * _slideSize.x, holder.el.style);\n\n          hIndex = _currentItemIndex + i - 1;\n\n          if (_options.loop && _getNumItems() > 2) {\n            hIndex = _getLoopedId(hIndex);\n          }\n\n          // update zoom level on items and refresh source (if needsUpdate)\n          item = _getItemAt(hIndex);\n\n          // re-render gallery item if `needsUpdate`,\n          // or doesn't have `bounds` (entirely new slide object)\n          if (item && (_itemsNeedUpdate || item.needsUpdate || !item.bounds)) {\n\n            self.cleanSlide(item);\n\n            self.setContent(holder, hIndex);\n\n            // if \"center\" slide\n            if (i === 1) {\n              self.currItem = item;\n              self.updateCurrZoomItem(true);\n            }\n\n            item.needsUpdate = false;\n          } else if (holder.index === -1 && hIndex >= 0) {\n            // add content first time\n            self.setContent(holder, hIndex);\n          }\n          if (item && item.container) {\n            _calculateItemSize(item, _viewportSize);\n            _setImageSize(item);\n            _applyZoomPanToItem(item);\n          }\n        }\n        _itemsNeedUpdate = false;\n      }\n\n      _startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\n      _currPanBounds = self.currItem.bounds;\n\n      if (_currPanBounds) {\n        _panOffset.x = _currPanBounds.center.x;\n        _panOffset.y = _currPanBounds.center.y;\n        _applyCurrentZoomPan(true);\n      }\n\n      _shout('resize');\n    },\n\n    // Zoom current item to\n    zoomTo: function zoomTo(destZoomLevel, centerPoint, speed, easingFn, updateFn) {\n      /*\n      if(destZoomLevel === 'fit') {\n      destZoomLevel = self.currItem.fitRatio;\n      } else if(destZoomLevel === 'fill') {\n      destZoomLevel = self.currItem.fillRatio;\n      }\n      */\n\n      if (centerPoint) {\n        _startZoomLevel = _currZoomLevel;\n        _midZoomPoint.x = Math.abs(centerPoint.x) - _panOffset.x;\n        _midZoomPoint.y = Math.abs(centerPoint.y) - _panOffset.y;\n        _equalizePoints(_startPanOffset, _panOffset);\n      }\n\n      var destPanBounds = _calculatePanBounds(destZoomLevel, false),\n          destPanOffset = {};\n\n      _modifyDestPanOffset('x', destPanBounds, destPanOffset, destZoomLevel);\n      _modifyDestPanOffset('y', destPanBounds, destPanOffset, destZoomLevel);\n\n      var initialZoomLevel = _currZoomLevel;\n      var initialPanOffset = {\n        x: _panOffset.x,\n        y: _panOffset.y\n      };\n\n      _roundPoint(destPanOffset);\n\n      var onUpdate = function onUpdate(now) {\n        if (now === 1) {\n          _currZoomLevel = destZoomLevel;\n          _panOffset.x = destPanOffset.x;\n          _panOffset.y = destPanOffset.y;\n        } else {\n          _currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\n          _panOffset.x = (destPanOffset.x - initialPanOffset.x) * now + initialPanOffset.x;\n          _panOffset.y = (destPanOffset.y - initialPanOffset.y) * now + initialPanOffset.y;\n        }\n\n        if (updateFn) {\n          updateFn(now);\n        }\n\n        _applyCurrentZoomPan(now === 1);\n      };\n\n      if (speed) {\n        _animateProp('customZoomTo', 0, 1, speed, easingFn || framework.easing.sine.inOut, onUpdate);\n      } else {\n        onUpdate(1);\n      }\n    }\n\n  };\n\n  /*>>core*/\n\n  /*>>gestures*/\n  /**\n   * Mouse/touch/pointer event handlers.\n   *\n   * separated from @core.js for readability\n   */\n\n  var MIN_SWIPE_DISTANCE = 30,\n      DIRECTION_CHECK_OFFSET = 10; // amount of pixels to drag to determine direction of swipe\n\n  var _gestureStartTime,\n      _gestureCheckSpeedTime,\n\n\n  // pool of objects that are used during dragging of zooming\n  p = {},\n      // first point\n  p2 = {},\n      // second point (for zoom gesture)\n  delta = {},\n      _currPoint = {},\n      _startPoint = {},\n      _currPointers = [],\n      _startMainScrollPos = {},\n      _releaseAnimData,\n      _posPoints = [],\n      // array of points during dragging, used to determine type of gesture\n  _tempPoint = {},\n      _isZoomingIn,\n      _verticalDragInitiated,\n      _oldAndroidTouchEndTimeout,\n      _currZoomedItemIndex = 0,\n      _centerPoint = _getEmptyPoint(),\n      _lastReleaseTime = 0,\n      _isDragging,\n      // at least one pointer is down\n  _isMultitouch,\n      // at least two _pointers are down\n  _zoomStarted,\n      // zoom level changed during zoom gesture\n  _moved,\n      _dragAnimFrame,\n      _mainScrollShifted,\n      _currentPoints,\n      // array of current touch points\n  _isZooming,\n      _currPointsDistance,\n      _startPointsDistance,\n      _currPanBounds,\n      _mainScrollPos = _getEmptyPoint(),\n      _currZoomElementStyle,\n      _mainScrollAnimating,\n      // true, if animation after swipe gesture is running\n  _midZoomPoint = _getEmptyPoint(),\n      _currCenterPoint = _getEmptyPoint(),\n      _direction,\n      _isFirstMove,\n      _opacityChanged,\n      _bgOpacity,\n      _wasOverInitialZoom,\n      _isEqualPoints = function _isEqualPoints(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n  },\n      _isNearbyPoints = function _isNearbyPoints(touch0, touch1) {\n    return Math.abs(touch0.x - touch1.x) < DOUBLE_TAP_RADIUS && Math.abs(touch0.y - touch1.y) < DOUBLE_TAP_RADIUS;\n  },\n      _calculatePointsDistance = function _calculatePointsDistance(p1, p2) {\n    _tempPoint.x = Math.abs(p1.x - p2.x);\n    _tempPoint.y = Math.abs(p1.y - p2.y);\n    return Math.sqrt(_tempPoint.x * _tempPoint.x + _tempPoint.y * _tempPoint.y);\n  },\n      _stopDragUpdateLoop = function _stopDragUpdateLoop() {\n    if (_dragAnimFrame) {\n      _cancelAF(_dragAnimFrame);\n      _dragAnimFrame = null;\n    }\n  },\n      _dragUpdateLoop = function _dragUpdateLoop() {\n    if (_isDragging) {\n      _dragAnimFrame = _requestAF(_dragUpdateLoop);\n      _renderMovement();\n    }\n  },\n      _canPan = function _canPan() {\n    return !(_options.scaleMode === 'fit' && _currZoomLevel === self.currItem.initialZoomLevel);\n  },\n\n\n  // find the closest parent DOM element\n  _closestElement = function _closestElement(el, fn) {\n    if (!el || el === document) {\n      return false;\n    }\n\n    // don't search elements above pswp__scroll-wrap\n    if (el.getAttribute('class') && el.getAttribute('class').indexOf('pswp__scroll-wrap') > -1) {\n      return false;\n    }\n\n    if (fn(el)) {\n      return el;\n    }\n\n    return _closestElement(el.parentNode, fn);\n  },\n      _preventObj = {},\n      _preventDefaultEventBehaviour = function _preventDefaultEventBehaviour(e, isDown) {\n    _preventObj.prevent = !_closestElement(e.target, _options.isClickableElement);\n\n    _shout('preventDragEvent', e, isDown, _preventObj);\n    return _preventObj.prevent;\n  },\n      _convertTouchToPoint = function _convertTouchToPoint(touch, p) {\n    p.x = touch.pageX;\n    p.y = touch.pageY;\n    p.id = touch.identifier;\n    return p;\n  },\n      _findCenterOfPoints = function _findCenterOfPoints(p1, p2, pCenter) {\n    pCenter.x = (p1.x + p2.x) * 0.5;\n    pCenter.y = (p1.y + p2.y) * 0.5;\n  },\n      _pushPosPoint = function _pushPosPoint(time, x, y) {\n    if (time - _gestureCheckSpeedTime > 50) {\n      var o = _posPoints.length > 2 ? _posPoints.shift() : {};\n      o.x = x;\n      o.y = y;\n      _posPoints.push(o);\n      _gestureCheckSpeedTime = time;\n    }\n  },\n      _calculateVerticalDragOpacityRatio = function _calculateVerticalDragOpacityRatio() {\n    var yOffset = _panOffset.y - self.currItem.initialPosition.y; // difference between initial and current position\n    return 1 - Math.abs(yOffset / (_viewportSize.y / 2));\n  },\n\n\n  // points pool, reused during touch events\n  _ePoint1 = {},\n      _ePoint2 = {},\n      _tempPointsArr = [],\n      _tempCounter,\n      _getTouchPoints = function _getTouchPoints(e) {\n    // clean up previous points, without recreating array\n    while (_tempPointsArr.length > 0) {\n      _tempPointsArr.pop();\n    }\n\n    if (!_pointerEventEnabled) {\n      if (e.type.indexOf('touch') > -1) {\n\n        if (e.touches && e.touches.length > 0) {\n          _tempPointsArr[0] = _convertTouchToPoint(e.touches[0], _ePoint1);\n          if (e.touches.length > 1) {\n            _tempPointsArr[1] = _convertTouchToPoint(e.touches[1], _ePoint2);\n          }\n        }\n      } else {\n        _ePoint1.x = e.pageX;\n        _ePoint1.y = e.pageY;\n        _ePoint1.id = '';\n        _tempPointsArr[0] = _ePoint1; //_ePoint1;\n      }\n    } else {\n      _tempCounter = 0;\n      // we can use forEach, as pointer events are supported only in modern browsers\n      _currPointers.forEach(function (p) {\n        if (_tempCounter === 0) {\n          _tempPointsArr[0] = p;\n        } else if (_tempCounter === 1) {\n          _tempPointsArr[1] = p;\n        }\n        _tempCounter++;\n      });\n    }\n    return _tempPointsArr;\n  },\n      _panOrMoveMainScroll = function _panOrMoveMainScroll(axis, delta) {\n\n    var panFriction,\n        overDiff = 0,\n        newOffset = _panOffset[axis] + delta[axis],\n        startOverDiff,\n        dir = delta[axis] > 0,\n        newMainScrollPosition = _mainScrollPos.x + delta.x,\n        mainScrollDiff = _mainScrollPos.x - _startMainScrollPos.x,\n        newPanPos,\n        newMainScrollPos;\n\n    // calculate fdistance over the bounds and friction\n    if (newOffset > _currPanBounds.min[axis] || newOffset < _currPanBounds.max[axis]) {\n      panFriction = _options.panEndFriction;\n      // Linear increasing of friction, so at 1/4 of viewport it's at max value.\n      // Looks not as nice as was expected. Left for history.\n      // panFriction = (1 - (_panOffset[axis] + delta[axis] + panBounds.min[axis]) / (_viewportSize[axis] / 4) );\n    } else {\n      panFriction = 1;\n    }\n\n    newOffset = _panOffset[axis] + delta[axis] * panFriction;\n\n    // move main scroll or start panning\n    if (_options.allowPanToNext || _currZoomLevel === self.currItem.initialZoomLevel) {\n\n      if (!_currZoomElementStyle) {\n\n        newMainScrollPos = newMainScrollPosition;\n      } else if (_direction === 'h' && axis === 'x' && !_zoomStarted) {\n\n        if (dir) {\n          if (newOffset > _currPanBounds.min[axis]) {\n            panFriction = _options.panEndFriction;\n            overDiff = _currPanBounds.min[axis] - newOffset;\n            startOverDiff = _currPanBounds.min[axis] - _startPanOffset[axis];\n          }\n\n          // drag right\n          if ((startOverDiff <= 0 || mainScrollDiff < 0) && _getNumItems() > 1) {\n            newMainScrollPos = newMainScrollPosition;\n            if (mainScrollDiff < 0 && newMainScrollPosition > _startMainScrollPos.x) {\n              newMainScrollPos = _startMainScrollPos.x;\n            }\n          } else {\n            if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n              newPanPos = newOffset;\n            }\n          }\n        } else {\n\n          if (newOffset < _currPanBounds.max[axis]) {\n            panFriction = _options.panEndFriction;\n            overDiff = newOffset - _currPanBounds.max[axis];\n            startOverDiff = _startPanOffset[axis] - _currPanBounds.max[axis];\n          }\n\n          if ((startOverDiff <= 0 || mainScrollDiff > 0) && _getNumItems() > 1) {\n            newMainScrollPos = newMainScrollPosition;\n\n            if (mainScrollDiff > 0 && newMainScrollPosition < _startMainScrollPos.x) {\n              newMainScrollPos = _startMainScrollPos.x;\n            }\n          } else {\n            if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n              newPanPos = newOffset;\n            }\n          }\n        }\n\n        //\n      }\n\n      if (axis === 'x') {\n\n        if (newMainScrollPos !== undefined) {\n          _moveMainScroll(newMainScrollPos, true);\n          if (newMainScrollPos === _startMainScrollPos.x) {\n            _mainScrollShifted = false;\n          } else {\n            _mainScrollShifted = true;\n          }\n        }\n\n        if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n          if (newPanPos !== undefined) {\n            _panOffset.x = newPanPos;\n          } else if (!_mainScrollShifted) {\n            _panOffset.x += delta.x * panFriction;\n          }\n        }\n\n        return newMainScrollPos !== undefined;\n      }\n    }\n\n    if (!_mainScrollAnimating) {\n\n      if (!_mainScrollShifted) {\n        if (_currZoomLevel > self.currItem.fitRatio) {\n          _panOffset[axis] += delta[axis] * panFriction;\n        }\n      }\n    }\n  },\n\n\n  // Pointerdown/touchstart/mousedown handler\n  _onDragStart = function _onDragStart(e) {\n\n    // Allow dragging only via left mouse button.\n    // As this handler is not added in IE8 - we ignore e.which\n    //\n    // http://www.quirksmode.org/js/events_properties.html\n    // https://developer.mozilla.org/en-US/docs/Web/API/event.button\n    if (e.type === 'mousedown' && e.button > 0) {\n      return;\n    }\n\n    if (_initialZoomRunning) {\n      e.preventDefault();\n      return;\n    }\n\n    if (_oldAndroidTouchEndTimeout && e.type === 'mousedown') {\n      return;\n    }\n\n    if (_preventDefaultEventBehaviour(e, true)) {\n      e.preventDefault();\n    }\n\n    _shout('pointerDown');\n\n    if (_pointerEventEnabled) {\n      var pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n      if (pointerIndex < 0) {\n        pointerIndex = _currPointers.length;\n      }\n      _currPointers[pointerIndex] = { x: e.pageX, y: e.pageY, id: e.pointerId };\n    }\n\n    var startPointsList = _getTouchPoints(e),\n        numPoints = startPointsList.length;\n\n    _currentPoints = null;\n\n    _stopAllAnimations();\n\n    // init drag\n    if (!_isDragging || numPoints === 1) {\n\n      _isDragging = _isFirstMove = true;\n      framework.bind(window, _upMoveEvents, self);\n\n      _isZoomingIn = _wasOverInitialZoom = _opacityChanged = _verticalDragInitiated = _mainScrollShifted = _moved = _isMultitouch = _zoomStarted = false;\n\n      _direction = null;\n\n      _shout('firstTouchStart', startPointsList);\n\n      _equalizePoints(_startPanOffset, _panOffset);\n\n      _currPanDist.x = _currPanDist.y = 0;\n      _equalizePoints(_currPoint, startPointsList[0]);\n      _equalizePoints(_startPoint, _currPoint);\n\n      //_equalizePoints(_startMainScrollPos, _mainScrollPos);\n      _startMainScrollPos.x = _slideSize.x * _currPositionIndex;\n\n      _posPoints = [{\n        x: _currPoint.x,\n        y: _currPoint.y\n      }];\n\n      _gestureCheckSpeedTime = _gestureStartTime = _getCurrentTime();\n\n      //_mainScrollAnimationEnd(true);\n      _calculatePanBounds(_currZoomLevel, true);\n\n      // Start rendering\n      _stopDragUpdateLoop();\n      _dragUpdateLoop();\n    }\n\n    // init zoom\n    if (!_isZooming && numPoints > 1 && !_mainScrollAnimating && !_mainScrollShifted) {\n      _startZoomLevel = _currZoomLevel;\n      _zoomStarted = false; // true if zoom changed at least once\n\n      _isZooming = _isMultitouch = true;\n      _currPanDist.y = _currPanDist.x = 0;\n\n      _equalizePoints(_startPanOffset, _panOffset);\n\n      _equalizePoints(p, startPointsList[0]);\n      _equalizePoints(p2, startPointsList[1]);\n\n      _findCenterOfPoints(p, p2, _currCenterPoint);\n\n      _midZoomPoint.x = Math.abs(_currCenterPoint.x) - _panOffset.x;\n      _midZoomPoint.y = Math.abs(_currCenterPoint.y) - _panOffset.y;\n      _currPointsDistance = _startPointsDistance = _calculatePointsDistance(p, p2);\n    }\n  },\n\n\n  // Pointermove/touchmove/mousemove handler\n  _onDragMove = function _onDragMove(e) {\n\n    e.preventDefault();\n\n    if (_pointerEventEnabled) {\n      var pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n      if (pointerIndex > -1) {\n        var p = _currPointers[pointerIndex];\n        p.x = e.pageX;\n        p.y = e.pageY;\n      }\n    }\n\n    if (_isDragging) {\n      var touchesList = _getTouchPoints(e);\n      if (!_direction && !_moved && !_isZooming) {\n\n        if (_mainScrollPos.x !== _slideSize.x * _currPositionIndex) {\n          // if main scroll position is shifted – direction is always horizontal\n          _direction = 'h';\n        } else {\n          var diff = Math.abs(touchesList[0].x - _currPoint.x) - Math.abs(touchesList[0].y - _currPoint.y);\n          // check the direction of movement\n          if (Math.abs(diff) >= DIRECTION_CHECK_OFFSET) {\n            _direction = diff > 0 ? 'h' : 'v';\n            _currentPoints = touchesList;\n          }\n        }\n      } else {\n        _currentPoints = touchesList;\n      }\n    }\n  },\n\n  //\n  _renderMovement = function _renderMovement() {\n\n    if (!_currentPoints) {\n      return;\n    }\n\n    var numPoints = _currentPoints.length;\n\n    if (numPoints === 0) {\n      return;\n    }\n\n    _equalizePoints(p, _currentPoints[0]);\n\n    delta.x = p.x - _currPoint.x;\n    delta.y = p.y - _currPoint.y;\n\n    if (_isZooming && numPoints > 1) {\n      // Handle behaviour for more than 1 point\n\n      _currPoint.x = p.x;\n      _currPoint.y = p.y;\n\n      // check if one of two points changed\n      if (!delta.x && !delta.y && _isEqualPoints(_currentPoints[1], p2)) {\n        return;\n      }\n\n      _equalizePoints(p2, _currentPoints[1]);\n\n      if (!_zoomStarted) {\n        _zoomStarted = true;\n        _shout('zoomGestureStarted');\n      }\n\n      // Distance between two points\n      var pointsDistance = _calculatePointsDistance(p, p2);\n\n      var zoomLevel = _calculateZoomLevel(pointsDistance);\n\n      // slightly over the of initial zoom level\n      if (zoomLevel > self.currItem.initialZoomLevel + self.currItem.initialZoomLevel / 15) {\n        _wasOverInitialZoom = true;\n      }\n\n      // Apply the friction if zoom level is out of the bounds\n      var zoomFriction = 1,\n          minZoomLevel = _getMinZoomLevel(),\n          maxZoomLevel = _getMaxZoomLevel();\n\n      if (zoomLevel < minZoomLevel) {\n\n        if (_options.pinchToClose && !_wasOverInitialZoom && _startZoomLevel <= self.currItem.initialZoomLevel) {\n          // fade out background if zooming out\n          var minusDiff = minZoomLevel - zoomLevel;\n          var percent = 1 - minusDiff / (minZoomLevel / 1.2);\n\n          _applyBgOpacity(percent);\n          _shout('onPinchClose', percent);\n          _opacityChanged = true;\n        } else {\n          zoomFriction = (minZoomLevel - zoomLevel) / minZoomLevel;\n          if (zoomFriction > 1) {\n            zoomFriction = 1;\n          }\n          zoomLevel = minZoomLevel - zoomFriction * (minZoomLevel / 3);\n        }\n      } else if (zoomLevel > maxZoomLevel) {\n        // 1.5 - extra zoom level above the max. E.g. if max is x6, real max 6 + 1.5 = 7.5\n        zoomFriction = (zoomLevel - maxZoomLevel) / (minZoomLevel * 6);\n        if (zoomFriction > 1) {\n          zoomFriction = 1;\n        }\n        zoomLevel = maxZoomLevel + zoomFriction * minZoomLevel;\n      }\n\n      if (zoomFriction < 0) {\n        zoomFriction = 0;\n      }\n\n      // distance between touch points after friction is applied\n      _currPointsDistance = pointsDistance;\n\n      // _centerPoint - The point in the middle of two pointers\n      _findCenterOfPoints(p, p2, _centerPoint);\n\n      // paning with two pointers pressed\n      _currPanDist.x += _centerPoint.x - _currCenterPoint.x;\n      _currPanDist.y += _centerPoint.y - _currCenterPoint.y;\n      _equalizePoints(_currCenterPoint, _centerPoint);\n\n      _panOffset.x = _calculatePanOffset('x', zoomLevel);\n      _panOffset.y = _calculatePanOffset('y', zoomLevel);\n\n      _isZoomingIn = zoomLevel > _currZoomLevel;\n      _currZoomLevel = zoomLevel;\n      _applyCurrentZoomPan();\n    } else {\n\n      // handle behaviour for one point (dragging or panning)\n\n      if (!_direction) {\n        return;\n      }\n\n      if (_isFirstMove) {\n        _isFirstMove = false;\n\n        // subtract drag distance that was used during the detection direction\n\n        if (Math.abs(delta.x) >= DIRECTION_CHECK_OFFSET) {\n          delta.x -= _currentPoints[0].x - _startPoint.x;\n        }\n\n        if (Math.abs(delta.y) >= DIRECTION_CHECK_OFFSET) {\n          delta.y -= _currentPoints[0].y - _startPoint.y;\n        }\n      }\n\n      _currPoint.x = p.x;\n      _currPoint.y = p.y;\n\n      // do nothing if pointers position hasn't changed\n      if (delta.x === 0 && delta.y === 0) {\n        return;\n      }\n\n      if (_direction === 'v' && _options.closeOnVerticalDrag) {\n        if (!_canPan()) {\n          _currPanDist.y += delta.y;\n          _panOffset.y += delta.y;\n\n          var opacityRatio = _calculateVerticalDragOpacityRatio();\n\n          _verticalDragInitiated = true;\n          _shout('onVerticalDrag', opacityRatio);\n\n          _applyBgOpacity(opacityRatio);\n          _applyCurrentZoomPan();\n          return;\n        }\n      }\n\n      _pushPosPoint(_getCurrentTime(), p.x, p.y);\n\n      _moved = true;\n      _currPanBounds = self.currItem.bounds;\n\n      var mainScrollChanged = _panOrMoveMainScroll('x', delta);\n      if (!mainScrollChanged) {\n        _panOrMoveMainScroll('y', delta);\n\n        _roundPoint(_panOffset);\n        _applyCurrentZoomPan();\n      }\n    }\n  },\n\n\n  // Pointerup/pointercancel/touchend/touchcancel/mouseup event handler\n  _onDragRelease = function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee6(e) {\n      var releasePoint, pointerIndex, MSPOINTER_TYPES, touchList, gestureType, numPoints, releaseTimeDiff, opacityRatio, initalPanY, initialBgOpacity, itemChanged;\n      return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              if (!_features.isOldAndroid) {\n                _context6.next = 4;\n                break;\n              }\n\n              if (!(_oldAndroidTouchEndTimeout && e.type === 'mouseup')) {\n                _context6.next = 3;\n                break;\n              }\n\n              return _context6.abrupt('return');\n\n            case 3:\n\n              // on Android (v4.1, 4.2, 4.3 & possibly older)\n              // ghost mousedown/up event isn't preventable via e.preventDefault,\n              // which causes fake mousedown event\n              // so we block mousedown/up for 600ms\n              if (e.type.indexOf('touch') > -1) {\n                clearTimeout(_oldAndroidTouchEndTimeout);\n                _oldAndroidTouchEndTimeout = setTimeout(function () {\n                  _oldAndroidTouchEndTimeout = 0;\n                }, 600);\n              }\n\n            case 4:\n\n              _shout('pointerUp');\n\n              if (_preventDefaultEventBehaviour(e, false)) {\n                e.preventDefault();\n              }\n\n              if (_pointerEventEnabled) {\n                pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\n\n                if (pointerIndex > -1) {\n                  releasePoint = _currPointers.splice(pointerIndex, 1)[0];\n\n                  if (navigator.msPointerEnabled) {\n                    MSPOINTER_TYPES = {\n                      4: 'mouse', // event.MSPOINTER_TYPE_MOUSE\n                      2: 'touch', // event.MSPOINTER_TYPE_TOUCH\n                      3: 'pen' // event.MSPOINTER_TYPE_PEN\n                    };\n\n                    releasePoint.type = MSPOINTER_TYPES[e.pointerType];\n\n                    if (!releasePoint.type) {\n                      releasePoint.type = e.pointerType || 'mouse';\n                    }\n                  } else {\n                    releasePoint.type = e.pointerType || 'mouse';\n                  }\n                }\n              }\n\n              touchList = _getTouchPoints(e), numPoints = touchList.length;\n\n\n              if (e.type === 'mouseup') {\n                numPoints = 0;\n              }\n\n              // Do nothing if there were 3 touch points or more\n\n              if (!(numPoints === 2)) {\n                _context6.next = 12;\n                break;\n              }\n\n              _currentPoints = null;\n              return _context6.abrupt('return', true);\n\n            case 12:\n\n              // if second pointer released\n              if (numPoints === 1) {\n                _equalizePoints(_startPoint, touchList[0]);\n              }\n\n              // pointer hasn't moved, send \"tap release\" point\n              if (numPoints === 0 && !_direction && !_mainScrollAnimating) {\n                if (!releasePoint) {\n                  if (e.type === 'mouseup') {\n                    releasePoint = { x: e.pageX, y: e.pageY, type: 'mouse' };\n                  } else if (e.changedTouches && e.changedTouches[0]) {\n                    releasePoint = { x: e.changedTouches[0].pageX, y: e.changedTouches[0].pageY, type: 'touch' };\n                  }\n                }\n\n                _shout('touchRelease', e, releasePoint);\n              }\n\n              // Difference in time between releasing of two last touch points (zoom gesture)\n              releaseTimeDiff = -1;\n\n              // Gesture completed, no pointers left\n\n              if (numPoints === 0) {\n                _isDragging = false;\n                framework.unbind(window, _upMoveEvents, self);\n\n                _stopDragUpdateLoop();\n\n                if (_isZooming) {\n                  // Two points released at the same time\n                  releaseTimeDiff = 0;\n                } else if (_lastReleaseTime !== -1) {\n                  releaseTimeDiff = _getCurrentTime() - _lastReleaseTime;\n                }\n              }\n              _lastReleaseTime = numPoints === 1 ? _getCurrentTime() : -1;\n\n              if (releaseTimeDiff !== -1 && releaseTimeDiff < 150) {\n                gestureType = 'zoom';\n              } else {\n                gestureType = 'swipe';\n              }\n\n              if (_isZooming && numPoints < 2) {\n                _isZooming = false;\n\n                // Only second point released\n                if (numPoints === 1) {\n                  gestureType = 'zoomPointerUp';\n                }\n                _shout('zoomGestureEnded');\n              }\n\n              _currentPoints = null;\n\n              if (!(!_moved && !_zoomStarted && !_mainScrollAnimating && !_verticalDragInitiated)) {\n                _context6.next = 22;\n                break;\n              }\n\n              return _context6.abrupt('return');\n\n            case 22:\n\n              _stopAllAnimations();\n\n              if (!_releaseAnimData) {\n                _releaseAnimData = _initDragReleaseAnimationData();\n              }\n\n              _releaseAnimData.calculateSwipeSpeed('x');\n\n              if (!_verticalDragInitiated) {\n                _context6.next = 29;\n                break;\n              }\n\n              opacityRatio = _calculateVerticalDragOpacityRatio();\n\n\n              if (opacityRatio < _options.verticalDragRange) {\n                self.close();\n              } else {\n                initalPanY = _panOffset.y, initialBgOpacity = _bgOpacity;\n\n\n                _animateProp('verticalDrag', 0, 1, 300, framework.easing.cubic.out, function (now) {\n\n                  _panOffset.y = (self.currItem.initialPosition.y - initalPanY) * now + initalPanY;\n\n                  _applyBgOpacity((1 - initialBgOpacity) * now + initialBgOpacity);\n                  _applyCurrentZoomPan();\n                });\n\n                _shout('onVerticalDrag', 1);\n              }\n\n              return _context6.abrupt('return');\n\n            case 29:\n              if (!((_mainScrollShifted || _mainScrollAnimating) && numPoints === 0)) {\n                _context6.next = 36;\n                break;\n              }\n\n              _context6.next = 32;\n              return _finishSwipeMainScrollGesture(gestureType, _releaseAnimData);\n\n            case 32:\n              itemChanged = _context6.sent;\n\n              if (!itemChanged) {\n                _context6.next = 35;\n                break;\n              }\n\n              return _context6.abrupt('return');\n\n            case 35:\n              gestureType = 'zoomPointerUp';\n\n            case 36:\n              if (!_mainScrollAnimating) {\n                _context6.next = 38;\n                break;\n              }\n\n              return _context6.abrupt('return');\n\n            case 38:\n              if (!(gestureType !== 'swipe')) {\n                _context6.next = 41;\n                break;\n              }\n\n              _completeZoomGesture();\n              return _context6.abrupt('return');\n\n            case 41:\n\n              // Complete pan gesture if main scroll is not shifted, and it's possible to pan current image\n              if (!_mainScrollShifted && _currZoomLevel > self.currItem.fitRatio) {\n                _completePanGesture(_releaseAnimData);\n              }\n\n            case 42:\n            case 'end':\n              return _context6.stop();\n          }\n        }\n      }, _callee6, this);\n    }));\n\n    return function _onDragRelease(_x10) {\n      return _ref6.apply(this, arguments);\n    };\n  }(),\n\n\n  // Returns object with data about gesture\n  // It's created only once and then reused\n  _initDragReleaseAnimationData = function _initDragReleaseAnimationData() {\n    // temp local vars\n    var lastFlickDuration, tempReleasePos;\n\n    // s = this\n    var s = {\n      lastFlickOffset: {},\n      lastFlickDist: {},\n      lastFlickSpeed: {},\n      slowDownRatio: {},\n      slowDownRatioReverse: {},\n      speedDecelerationRatio: {},\n      speedDecelerationRatioAbs: {},\n      distanceOffset: {},\n      backAnimDestination: {},\n      backAnimStarted: {},\n      calculateSwipeSpeed: function calculateSwipeSpeed(axis) {\n\n        if (_posPoints.length > 1) {\n          lastFlickDuration = _getCurrentTime() - _gestureCheckSpeedTime + 50;\n          tempReleasePos = _posPoints[_posPoints.length - 2][axis];\n        } else {\n          lastFlickDuration = _getCurrentTime() - _gestureStartTime; // total gesture duration\n          tempReleasePos = _startPoint[axis];\n        }\n        s.lastFlickOffset[axis] = _currPoint[axis] - tempReleasePos;\n        s.lastFlickDist[axis] = Math.abs(s.lastFlickOffset[axis]);\n        if (s.lastFlickDist[axis] > 20) {\n          s.lastFlickSpeed[axis] = s.lastFlickOffset[axis] / lastFlickDuration;\n        } else {\n          s.lastFlickSpeed[axis] = 0;\n        }\n        if (Math.abs(s.lastFlickSpeed[axis]) < 0.1) {\n          s.lastFlickSpeed[axis] = 0;\n        }\n\n        s.slowDownRatio[axis] = 0.95;\n        s.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\n        s.speedDecelerationRatio[axis] = 1;\n      },\n\n      calculateOverBoundsAnimOffset: function calculateOverBoundsAnimOffset(axis, speed) {\n        if (!s.backAnimStarted[axis]) {\n\n          if (_panOffset[axis] > _currPanBounds.min[axis]) {\n            s.backAnimDestination[axis] = _currPanBounds.min[axis];\n          } else if (_panOffset[axis] < _currPanBounds.max[axis]) {\n            s.backAnimDestination[axis] = _currPanBounds.max[axis];\n          }\n\n          if (s.backAnimDestination[axis] !== undefined) {\n            s.slowDownRatio[axis] = 0.7;\n            s.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\n            if (s.speedDecelerationRatioAbs[axis] < 0.05) {\n\n              s.lastFlickSpeed[axis] = 0;\n              s.backAnimStarted[axis] = true;\n\n              _animateProp('bounceZoomPan' + axis, _panOffset[axis], s.backAnimDestination[axis], speed || 300, framework.easing.sine.out, function (pos) {\n                _panOffset[axis] = pos;\n                _applyCurrentZoomPan();\n              });\n            }\n          }\n        }\n      },\n\n      // Reduces the speed by slowDownRatio (per 10ms)\n      calculateAnimOffset: function calculateAnimOffset(axis) {\n        if (!s.backAnimStarted[axis]) {\n          s.speedDecelerationRatio[axis] = s.speedDecelerationRatio[axis] * (s.slowDownRatio[axis] + s.slowDownRatioReverse[axis] - s.slowDownRatioReverse[axis] * s.timeDiff / 10);\n\n          s.speedDecelerationRatioAbs[axis] = Math.abs(s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis]);\n          s.distanceOffset[axis] = s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis] * s.timeDiff;\n          _panOffset[axis] += s.distanceOffset[axis];\n        }\n      },\n\n      panAnimLoop: function panAnimLoop() {\n        if (_animations.zoomPan) {\n          _animations.zoomPan.raf = _requestAF(s.panAnimLoop);\n\n          s.now = _getCurrentTime();\n          s.timeDiff = s.now - s.lastNow;\n          s.lastNow = s.now;\n\n          s.calculateAnimOffset('x');\n          s.calculateAnimOffset('y');\n\n          _applyCurrentZoomPan();\n\n          s.calculateOverBoundsAnimOffset('x');\n          s.calculateOverBoundsAnimOffset('y');\n\n          if (s.speedDecelerationRatioAbs.x < 0.05 && s.speedDecelerationRatioAbs.y < 0.05) {\n\n            // round pan position\n            _panOffset.x = Math.round(_panOffset.x);\n            _panOffset.y = Math.round(_panOffset.y);\n            _applyCurrentZoomPan();\n\n            _stopAnimation('zoomPan');\n            return;\n          }\n        }\n      }\n    };\n    return s;\n  },\n      _completePanGesture = function _completePanGesture(animData) {\n    // calculate swipe speed for Y axis (paanning)\n    animData.calculateSwipeSpeed('y');\n\n    _currPanBounds = self.currItem.bounds;\n\n    animData.backAnimDestination = {};\n    animData.backAnimStarted = {};\n\n    // Avoid acceleration animation if speed is too low\n    if (Math.abs(animData.lastFlickSpeed.x) <= 0.05 && Math.abs(animData.lastFlickSpeed.y) <= 0.05) {\n      animData.speedDecelerationRatioAbs.x = animData.speedDecelerationRatioAbs.y = 0;\n\n      // Run pan drag release animation. E.g. if you drag image and release finger without momentum.\n      animData.calculateOverBoundsAnimOffset('x');\n      animData.calculateOverBoundsAnimOffset('y');\n      return true;\n    }\n\n    // Animation loop that controls the acceleration after pan gesture ends\n    _registerStartAnimation('zoomPan');\n    animData.lastNow = _getCurrentTime();\n    animData.panAnimLoop();\n  },\n      _finishSwipeMainScrollGesture = function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee8(gestureType, _releaseAnimData) {\n      var itemChanged, itemsDiff, totalShiftDist, isFastLastFlick, nextCircle, animateToX, animateToDist, finishAnimDuration;\n      return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              if (!_mainScrollAnimating) {\n                _currZoomedItemIndex = _currentItemIndex;\n              }\n\n              if (gestureType === 'swipe') {\n                totalShiftDist = _currPoint.x - _startPoint.x, isFastLastFlick = _releaseAnimData.lastFlickDist.x < 10;\n\n                // if container is shifted for more than MIN_SWIPE_DISTANCE,\n                // and last flick gesture was in right direction\n\n                if (totalShiftDist > MIN_SWIPE_DISTANCE && (isFastLastFlick || _releaseAnimData.lastFlickOffset.x > 20)) {\n                  // go to prev item\n                  itemsDiff = -1;\n                } else if (totalShiftDist < -MIN_SWIPE_DISTANCE && (isFastLastFlick || _releaseAnimData.lastFlickOffset.x < -20)) {\n                  // go to next item\n                  itemsDiff = 1;\n                }\n              }\n\n              if (itemsDiff) {\n\n                _currentItemIndex += itemsDiff;\n\n                if (_currentItemIndex < 0) {\n                  _currentItemIndex = _options.loop ? _getNumItems() - 1 : 0;\n                  nextCircle = true;\n                } else if (_currentItemIndex >= _getNumItems()) {\n                  _currentItemIndex = _options.loop ? 0 : _getNumItems() - 1;\n                  nextCircle = true;\n                }\n\n                if (!nextCircle || _options.loop) {\n                  _indexDiff += itemsDiff;\n                  _currPositionIndex -= itemsDiff;\n                  itemChanged = true;\n                }\n              }\n\n              animateToX = _slideSize.x * _currPositionIndex;\n              animateToDist = Math.abs(animateToX - _mainScrollPos.x);\n\n\n              if (!itemChanged && animateToX > _mainScrollPos.x !== _releaseAnimData.lastFlickSpeed.x > 0) {\n                // \"return to current\" duration, e.g. when dragging from slide 0 to -1\n                finishAnimDuration = 333;\n              } else {\n                finishAnimDuration = Math.abs(_releaseAnimData.lastFlickSpeed.x) > 0 ? animateToDist / Math.abs(_releaseAnimData.lastFlickSpeed.x) : 333;\n\n                finishAnimDuration = Math.min(finishAnimDuration, 400);\n                finishAnimDuration = Math.max(finishAnimDuration, 250);\n              }\n\n              if (_currZoomedItemIndex === _currentItemIndex) {\n                itemChanged = false;\n              }\n\n              _mainScrollAnimating = true;\n\n              _shout('mainScrollAnimStart');\n\n              _context8.next = 11;\n              return _animatePropAsync('mainScroll', _mainScrollPos.x, animateToX, finishAnimDuration, framework.easing.cubic.out, _moveMainScroll, _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee7() {\n                return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee7$(_context7) {\n                  while (1) {\n                    switch (_context7.prev = _context7.next) {\n                      case 0:\n                        _stopAllAnimations();\n                        _mainScrollAnimating = false;\n                        _currZoomedItemIndex = -1;\n\n                        if (!(itemChanged || _currZoomedItemIndex !== _currentItemIndex)) {\n                          _context7.next = 6;\n                          break;\n                        }\n\n                        _context7.next = 6;\n                        return self.updateCurrItemAsync();\n\n                      case 6:\n\n                        _shout('mainScrollAnimComplete');\n\n                      case 7:\n                      case 'end':\n                        return _context7.stop();\n                    }\n                  }\n                }, _callee7, this);\n              })));\n\n            case 11:\n              if (!itemChanged) {\n                _context8.next = 14;\n                break;\n              }\n\n              _context8.next = 14;\n              return self.updateCurrItemAsync(true);\n\n            case 14:\n              return _context8.abrupt('return', itemChanged);\n\n            case 15:\n            case 'end':\n              return _context8.stop();\n          }\n        }\n      }, _callee8, this);\n    }));\n\n    return function _finishSwipeMainScrollGesture(_x11, _x12) {\n      return _ref7.apply(this, arguments);\n    };\n  }(),\n      _calculateZoomLevel = function _calculateZoomLevel(touchesDistance) {\n    return 1 / _startPointsDistance * touchesDistance * _startZoomLevel;\n  },\n\n\n  // Resets zoom if it's out of bounds\n  _completeZoomGesture = function _completeZoomGesture() {\n    var destZoomLevel = _currZoomLevel,\n        minZoomLevel = _getMinZoomLevel(),\n        maxZoomLevel = _getMaxZoomLevel();\n\n    if (_currZoomLevel < minZoomLevel) {\n      destZoomLevel = minZoomLevel;\n    } else if (_currZoomLevel > maxZoomLevel) {\n      destZoomLevel = maxZoomLevel;\n    }\n\n    var destOpacity = 1,\n        onUpdate,\n        initialOpacity = _bgOpacity;\n\n    if (_opacityChanged && !_isZoomingIn && !_wasOverInitialZoom && _currZoomLevel < minZoomLevel) {\n      //_closedByScroll = true;\n      self.close();\n      return true;\n    }\n\n    if (_opacityChanged) {\n      onUpdate = function onUpdate(now) {\n        _applyBgOpacity((destOpacity - initialOpacity) * now + initialOpacity);\n      };\n    }\n\n    self.zoomTo(destZoomLevel, 0, 200, framework.easing.cubic.out, onUpdate);\n    return true;\n  };\n\n  _registerModule('Gestures', {\n    publicMethods: {\n\n      initGestures: function initGestures() {\n\n        // helper function that builds touch/pointer/mouse events\n        var addEventNames = function addEventNames(pref, down, move, up, cancel) {\n          _dragStartEvent = pref + down;\n          _dragMoveEvent = pref + move;\n          _dragEndEvent = pref + up;\n          if (cancel) {\n            _dragCancelEvent = pref + cancel;\n          } else {\n            _dragCancelEvent = '';\n          }\n        };\n\n        _pointerEventEnabled = _features.pointerEvent;\n        if (_pointerEventEnabled && _features.touch) {\n          // we don't need touch events, if browser supports pointer events\n          _features.touch = false;\n        }\n\n        if (_pointerEventEnabled) {\n          if (navigator.msPointerEnabled) {\n            // IE10 pointer events are case-sensitive\n            addEventNames('MSPointer', 'Down', 'Move', 'Up', 'Cancel');\n          } else {\n            addEventNames('pointer', 'down', 'move', 'up', 'cancel');\n          }\n        } else if (_features.touch) {\n          addEventNames('touch', 'start', 'move', 'end', 'cancel');\n          _likelyTouchDevice = true;\n        } else {\n          addEventNames('mouse', 'down', 'move', 'up');\n        }\n\n        _upMoveEvents = _dragMoveEvent + ' ' + _dragEndEvent + ' ' + _dragCancelEvent;\n        _downEvents = _dragStartEvent;\n\n        if (_pointerEventEnabled && !_likelyTouchDevice) {\n          _likelyTouchDevice = navigator.maxTouchPoints > 1 || navigator.msMaxTouchPoints > 1;\n        }\n        // make variable public\n        self.likelyTouchDevice = _likelyTouchDevice;\n\n        _globalEventHandlers[_dragStartEvent] = _onDragStart;\n        _globalEventHandlers[_dragMoveEvent] = _onDragMove;\n        _globalEventHandlers[_dragEndEvent] = _onDragRelease; // the Kraken\n\n        if (_dragCancelEvent) {\n          _globalEventHandlers[_dragCancelEvent] = _globalEventHandlers[_dragEndEvent];\n        }\n\n        // Bind mouse events on device with detected hardware touch support, in case it supports multiple types of input.\n        if (_features.touch) {\n          _downEvents += ' mousedown';\n          _upMoveEvents += ' mousemove mouseup';\n          _globalEventHandlers.mousedown = _globalEventHandlers[_dragStartEvent];\n          _globalEventHandlers.mousemove = _globalEventHandlers[_dragMoveEvent];\n          _globalEventHandlers.mouseup = _globalEventHandlers[_dragEndEvent];\n        }\n\n        if (!_likelyTouchDevice) {\n          // don't allow pan to next slide from zoomed state on Desktop\n          _options.allowPanToNext = false;\n        }\n      }\n\n    }\n  });\n\n  /*>>gestures*/\n\n  /*>>show-hide-transition*/\n  /**\n   * show-hide-transition.js:\n   *\n   * Manages initial opening or closing transition.\n   *\n   * If you're not planning to use transition for gallery at all,\n   * you may set options hideAnimationDuration and showAnimationDuration to 0,\n   * and just delete startAnimation function.\n   *\n   */\n\n  var _showOrHideTimeout,\n      _showOrHide = function _showOrHide(item, img, out, completeFn) {\n\n    if (_showOrHideTimeout) {\n      clearTimeout(_showOrHideTimeout);\n    }\n\n    _initialZoomRunning = true;\n    _initialContentSet = true;\n\n    // dimensions of small thumbnail {x:,y:,w:}.\n    // Height is optional, as calculated based on large image.\n    var thumbBounds;\n    if (item.initialLayout) {\n      thumbBounds = item.initialLayout;\n      item.initialLayout = null;\n    } else {\n      thumbBounds = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\n    }\n\n    var duration = out ? _options.hideAnimationDuration : _options.showAnimationDuration;\n\n    var onComplete = function onComplete() {\n      _stopAnimation('initialZoom');\n      if (!out) {\n        _applyBgOpacity(1);\n        if (img) {\n          img.style.display = 'block';\n        }\n        framework.addClass(template, 'pswp--animated-in');\n        _shout('initialZoom' + (out ? 'OutEnd' : 'InEnd'));\n      } else {\n        self.template.removeAttribute('style');\n        self.bg.removeAttribute('style');\n      }\n\n      if (completeFn) {\n        completeFn();\n      }\n      _initialZoomRunning = false;\n    };\n\n    // if bounds aren't provided, just open gallery without animation\n    if (!duration || !thumbBounds || thumbBounds.x === undefined) {\n\n      _shout('initialZoom' + (out ? 'Out' : 'In'));\n\n      _currZoomLevel = item.initialZoomLevel;\n      _equalizePoints(_panOffset, item.initialPosition);\n      _applyCurrentZoomPan();\n\n      template.style.opacity = out ? 0 : 1;\n      _applyBgOpacity(1);\n\n      if (duration) {\n        setTimeout(function () {\n          onComplete();\n        }, duration);\n      } else {\n        onComplete();\n      }\n\n      return;\n    }\n\n    var startAnimation = function startAnimation() {\n      var closeWithRaf = _closedByScroll,\n          fadeEverything = !self.currItem.src || self.currItem.loadError || _options.showHideOpacity;\n\n      // apply hw-acceleration to image\n      if (item.miniImg) {\n        item.miniImg.style.webkitBackfaceVisibility = 'hidden';\n      }\n\n      if (!out) {\n        _currZoomLevel = thumbBounds.w / item.w;\n        _panOffset.x = thumbBounds.x;\n        _panOffset.y = thumbBounds.y - _initalWindowScrollY;\n\n        self[fadeEverything ? 'template' : 'bg'].style.opacity = 0.001;\n        _applyCurrentZoomPan();\n      }\n\n      _registerStartAnimation('initialZoom');\n\n      if (out && !closeWithRaf) {\n        framework.removeClass(template, 'pswp--animated-in');\n      }\n\n      if (fadeEverything) {\n        if (out) {\n          framework[(closeWithRaf ? 'remove' : 'add') + 'Class'](template, 'pswp--animate_opacity');\n        } else {\n          setTimeout(function () {\n            framework.addClass(template, 'pswp--animate_opacity');\n          }, 30);\n        }\n      }\n\n      _showOrHideTimeout = setTimeout(function () {\n\n        _shout('initialZoom' + (out ? 'Out' : 'In'));\n\n        if (!out) {\n\n          // \"in\" animation always uses CSS transitions (instead of rAF).\n          // CSS transition work faster here,\n          // as developer may also want to animate other things,\n          // like ui on top of sliding area, which can be animated just via CSS\n\n          _currZoomLevel = item.initialZoomLevel;\n          _equalizePoints(_panOffset, item.initialPosition);\n          _applyCurrentZoomPan();\n          _applyBgOpacity(1);\n\n          if (fadeEverything) {\n            template.style.opacity = 1;\n          } else {\n            _applyBgOpacity(1);\n          }\n\n          _showOrHideTimeout = setTimeout(onComplete, duration + 20);\n        } else {\n\n          // \"out\" animation uses rAF only when PhotoSwipe is closed by browser scroll, to recalculate position\n          var destZoomLevel = thumbBounds.w / item.w,\n              initialPanOffset = {\n            x: _panOffset.x,\n            y: _panOffset.y\n          },\n              initialZoomLevel = _currZoomLevel,\n              initalBgOpacity = _bgOpacity,\n              onUpdate = function onUpdate(now) {\n\n            if (now === 1) {\n              _currZoomLevel = destZoomLevel;\n              _panOffset.x = thumbBounds.x;\n              _panOffset.y = thumbBounds.y - _currentWindowScrollY;\n            } else {\n              _currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\n              _panOffset.x = (thumbBounds.x - initialPanOffset.x) * now + initialPanOffset.x;\n              _panOffset.y = (thumbBounds.y - _currentWindowScrollY - initialPanOffset.y) * now + initialPanOffset.y;\n            }\n\n            _applyCurrentZoomPan();\n            if (fadeEverything) {\n              template.style.opacity = 1 - now;\n            } else {\n              _applyBgOpacity(initalBgOpacity - now * initalBgOpacity);\n            }\n          };\n\n          if (closeWithRaf) {\n            _animateProp('initialZoom', 0, 1, duration, framework.easing.cubic.out, onUpdate, onComplete);\n          } else {\n            onUpdate(1);\n            _showOrHideTimeout = setTimeout(onComplete, duration + 20);\n          }\n        }\n      }, out ? 25 : 90); // Main purpose of this delay is to give browser time to paint and\n      // create composite layers of PhotoSwipe UI parts (background, controls, caption, arrows).\n      // Which avoids lag at the beginning of scale transition.\n    };\n    startAnimation();\n  };\n\n  /*>>show-hide-transition*/\n\n  /*>>items-controller*/\n  /**\n   *\n   * Controller manages gallery items, their dimensions, and their content.\n   *\n   */\n\n  var _items,\n      _tempPanAreaSize = {},\n      _imagesToAppendPool = [],\n      _initialContentSet,\n      _initialZoomRunning,\n      _controllerDefaultOptions = {\n    index: 0,\n    errorMsg: '<div class=\"pswp__error-msg\"><a href=\"%url%\" target=\"_blank\">The image</a> could not be loaded.</div>',\n    forceProgressiveLoading: false, // TODO\n    preload: [1, 1],\n    getNumItemsFn: function getNumItemsFn() {\n      return _items.length;\n    }\n  };\n\n  var _getItemAt,\n      _getNumItems,\n      _initialIsLoop,\n      _getZeroBounds = function _getZeroBounds() {\n    return {\n      center: { x: 0, y: 0 },\n      max: { x: 0, y: 0 },\n      min: { x: 0, y: 0 }\n    };\n  },\n      _calculateSingleItemPanBounds = function _calculateSingleItemPanBounds(item, realPanElementW, realPanElementH) {\n    var bounds = item.bounds;\n\n    // position of element when it's centered\n    bounds.center.x = Math.round((_tempPanAreaSize.x - realPanElementW) / 2);\n    bounds.center.y = Math.round((_tempPanAreaSize.y - realPanElementH) / 2) + item.vGap.top;\n\n    // maximum pan position\n    bounds.max.x = realPanElementW > _tempPanAreaSize.x ? Math.round(_tempPanAreaSize.x - realPanElementW) : bounds.center.x;\n\n    bounds.max.y = realPanElementH > _tempPanAreaSize.y ? Math.round(_tempPanAreaSize.y - realPanElementH) + item.vGap.top : bounds.center.y;\n\n    // minimum pan position\n    bounds.min.x = realPanElementW > _tempPanAreaSize.x ? 0 : bounds.center.x;\n    bounds.min.y = realPanElementH > _tempPanAreaSize.y ? item.vGap.top : bounds.center.y;\n  },\n      _calculateItemSize = function _calculateItemSize(item, viewportSize, zoomLevel) {\n\n    if (item.src && !item.loadError) {\n      var isInitial = !zoomLevel;\n\n      if (isInitial) {\n        if (!item.vGap) {\n          item.vGap = { top: 0, bottom: 0 };\n        }\n        // allows overriding vertical margin for individual items\n        _shout('parseVerticalMargin', item);\n      }\n\n      _tempPanAreaSize.x = viewportSize.x;\n      _tempPanAreaSize.y = viewportSize.y - item.vGap.top - item.vGap.bottom;\n\n      if (isInitial) {\n        var hRatio = _tempPanAreaSize.x / item.w;\n        var vRatio = _tempPanAreaSize.y / item.h;\n\n        item.fitRatio = hRatio < vRatio ? hRatio : vRatio;\n        //item.fillRatio = hRatio > vRatio ? hRatio : vRatio;\n\n        var scaleMode = _options.scaleMode;\n\n        if (scaleMode === 'orig') {\n          zoomLevel = 1;\n        } else if (scaleMode === 'fit') {\n          zoomLevel = item.fitRatio;\n        }\n\n        if (zoomLevel > 1) {\n          zoomLevel = 1;\n        }\n\n        item.initialZoomLevel = zoomLevel;\n\n        if (!item.bounds) {\n          // reuse bounds object\n          item.bounds = _getZeroBounds();\n        }\n      }\n\n      if (!zoomLevel) {\n        return;\n      }\n\n      _calculateSingleItemPanBounds(item, item.w * zoomLevel, item.h * zoomLevel);\n\n      if (isInitial && zoomLevel === item.initialZoomLevel) {\n        item.initialPosition = item.bounds.center;\n      }\n\n      return item.bounds;\n    } else {\n      item.w = item.h = 0;\n      item.initialZoomLevel = item.fitRatio = 1;\n      item.bounds = _getZeroBounds();\n      item.initialPosition = item.bounds.center;\n\n      // if it's not image, we return zero bounds (content is not zoomable)\n      return item.bounds;\n    }\n  },\n      _appendImage = function _appendImage(index, item, baseDiv, img, preventAnimation, keepPlaceholder) {\n\n    if (item.loadError) {\n      return;\n    }\n\n    if (img) {\n\n      item.imageAppended = true;\n      _setImageSize(item, img, item === self.currItem && _renderMaxResolution);\n\n      baseDiv.appendChild(img);\n\n      if (keepPlaceholder) {\n        setTimeout(function () {\n          if (item && item.loaded && item.placeholder) {\n            item.placeholder.style.display = 'none';\n            item.placeholder = null;\n          }\n        }, 500);\n      }\n    }\n  },\n      _preloadImage = function _preloadImage(item) {\n    item.loading = true;\n    item.loaded = false;\n    var img = item.img = framework.createEl('pswp__img', 'img');\n    var onComplete = function onComplete() {\n      item.loading = false;\n      item.loaded = true;\n\n      if (item.loadComplete) {\n        item.loadComplete(item);\n      } else {\n        item.img = null; // no need to store image object\n      }\n      img.onload = img.onerror = null;\n      img = null;\n    };\n    img.onload = onComplete;\n    img.onerror = function () {\n      item.loadError = true;\n      onComplete();\n    };\n\n    img.src = item.src; // + '?a=' + Math.random();\n\n    return img;\n  },\n      _checkForError = function _checkForError(item, cleanUp) {\n    if (item.src && item.loadError && item.container) {\n\n      if (cleanUp) {\n        item.container.innerHTML = '';\n      }\n\n      item.container.innerHTML = _options.errorMsg.replace('%url%', item.src);\n      return true;\n    }\n  },\n      _setImageSize = function _setImageSize(item, img, maxRes) {\n    if (!item.src) {\n      return;\n    }\n\n    if (!img) {\n      img = item.container.lastChild;\n    }\n\n    var w = maxRes ? item.w : Math.round(item.w * item.fitRatio),\n        h = maxRes ? item.h : Math.round(item.h * item.fitRatio);\n\n    if (item.placeholder && !item.loaded) {\n      item.placeholder.style.width = w + 'px';\n      item.placeholder.style.height = h + 'px';\n    }\n\n    img.style.width = w + 'px';\n    img.style.height = h + 'px';\n  },\n      _appendImagesPool = function _appendImagesPool() {\n\n    if (_imagesToAppendPool.length) {\n      var poolItem;\n\n      for (var i = 0; i < _imagesToAppendPool.length; i++) {\n        poolItem = _imagesToAppendPool[i];\n        if (poolItem.holder.index === poolItem.index) {\n          _appendImage(poolItem.index, poolItem.item, poolItem.baseDiv, poolItem.img, false, poolItem.clearPlaceholder);\n        }\n      }\n      _imagesToAppendPool = [];\n    }\n  };\n\n  _registerModule('Controller', {\n\n    publicMethods: {\n\n      lazyLoadItem: function lazyLoadItem(index) {\n        index = _getLoopedId(index);\n        var item = _getItemAt(index);\n\n        if (!item || (item.loaded || item.loading) && !_itemsNeedUpdate) {\n          return;\n        }\n\n        _shout('gettingData', index, item);\n        if (!item.src) {\n          return;\n        }\n\n        _preloadImage(item);\n      },\n      initController: function initController() {\n        framework.extend(_options, _controllerDefaultOptions, true);\n        self.items = _items = items;\n        _getItemAt = self.getItemAt;\n        _getNumItems = _options.getNumItemsFn; //self.getNumItems;\n\n\n        _initialIsLoop = _options.loop;\n        if (_getNumItems() < 3) {\n          _options.loop = false; // disable loop if less then 3 items\n        }\n\n        _listen('beforeChange', function (diff) {\n\n          var p = _options.preload,\n              isNext = diff === null ? true : diff >= 0,\n              preloadBefore = Math.min(p[0], _getNumItems()),\n              preloadAfter = Math.min(p[1], _getNumItems()),\n              i;\n\n          for (i = 1; i <= (isNext ? preloadAfter : preloadBefore); i++) {\n            self.lazyLoadItem(_currentItemIndex + i);\n          }\n          for (i = 1; i <= (isNext ? preloadBefore : preloadAfter); i++) {\n            self.lazyLoadItem(_currentItemIndex - i);\n          }\n        });\n\n        _listen('initialLayout', function () {\n          self.currItem.initialLayout = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\n        });\n\n        _listen('mainScrollAnimComplete', _appendImagesPool);\n        _listen('initialZoomInEnd', _appendImagesPool);\n\n        _listen('destroy', function () {\n          var item;\n          for (var i = 0; i < _items.length; i++) {\n            item = _items[i];\n            // remove reference to DOM elements, for GC\n            if (item.container) {\n              item.container = null;\n            }\n            if (item.placeholder) {\n              item.placeholder = null;\n            }\n            if (item.img) {\n              item.img = null;\n            }\n            if (item.preloader) {\n              item.preloader = null;\n            }\n            if (item.loadError) {\n              item.loaded = item.loadError = false;\n            }\n          }\n          _imagesToAppendPool = null;\n        });\n      },\n\n      getItemAt: function getItemAt(index) {\n        if (index >= 0) {\n          return _items[index] !== undefined ? _items[index] : false;\n        }\n        return false;\n      },\n\n      allowProgressiveImg: function allowProgressiveImg() {\n        // 1. Progressive image loading isn't working on webkit/blink\n        //    when hw-acceleration (e.g. translateZ) is applied to IMG element.\n        //    That's why in PhotoSwipe parent element gets zoom transform, not image itself.\n        //\n        // 2. Progressive image loading sometimes blinks in webkit/blink when applying animation to parent element.\n        //    That's why it's disabled on touch devices (mainly because of swipe transition)\n        //\n        // 3. Progressive image loading sometimes doesn't work in IE (up to 11).\n\n        // Don't allow progressive loading on non-large touch devices\n        return _options.forceProgressiveLoading || !_likelyTouchDevice || _options.mouseUsed || screen.width > 1200;\n        // 1200 - to eliminate touch devices with large screen (like Chromebook Pixel)\n      },\n\n      setContent: function setContent(holder, index) {\n\n        if (_options.loop) {\n          index = _getLoopedId(index);\n        }\n\n        var prevItem = self.getItemAt(holder.index);\n        if (prevItem) {\n          prevItem.container = null;\n        }\n\n        var item = self.getItemAt(index),\n            img;\n\n        if (!item) {\n          holder.el.innerHTML = '';\n          return;\n        }\n\n        // allow to override data\n        _shout('gettingData', index, item);\n        //console.log(\"gettedData\", index);\n\n        holder.index = index;\n        holder.item = item;\n\n        // base container DIV is created only once for each of 3 holders\n        var baseDiv = item.container = framework.createEl('pswp__zoom-wrap');\n\n        if (!item.src && item.html) {\n          if (item.html.tagName) {\n            baseDiv.appendChild(item.html);\n          } else {\n            baseDiv.innerHTML = item.html;\n          }\n        }\n\n        _checkForError(item);\n\n        _calculateItemSize(item, _viewportSize);\n\n        if (item.src && !item.loadError && !item.loaded) {\n\n          item.loadComplete = function (item) {\n\n            // gallery closed before image finished loading\n            if (!_isOpen) {\n              return;\n            }\n\n            // check if holder hasn't changed while image was loading\n            if (holder && holder.index === index) {\n              if (_checkForError(item, true)) {\n                item.loadComplete = item.img = null;\n                _calculateItemSize(item, _viewportSize);\n                _applyZoomPanToItem(item);\n\n                if (holder.index === _currentItemIndex) {\n                  // recalculate dimensions\n                  self.updateCurrZoomItem();\n                }\n                return;\n              }\n              if (!item.imageAppended) {\n                if (_features.transform && (_mainScrollAnimating || _initialZoomRunning)) {\n                  _imagesToAppendPool.push({\n                    item: item,\n                    baseDiv: baseDiv,\n                    img: item.img,\n                    index: index,\n                    holder: holder,\n                    clearPlaceholder: true\n                  });\n                } else {\n                  _appendImage(index, item, baseDiv, item.img, _mainScrollAnimating || _initialZoomRunning, true);\n                }\n              } else {\n                // remove preloader & mini-img\n                if (!_initialZoomRunning && item.placeholder) {\n                  item.placeholder.style.display = 'none';\n                  item.placeholder = null;\n                }\n              }\n            }\n\n            item.loadComplete = null;\n            item.img = null; // no need to store image element after it's added\n\n            _shout('imageLoadComplete', index, item);\n          };\n\n          if (framework.features.transform) {\n\n            var placeholderClassName = 'pswp__img pswp__img--placeholder';\n            placeholderClassName += item.msrc ? '' : ' pswp__img--placeholder--blank';\n\n            var placeholder = framework.createEl(placeholderClassName, item.msrc ? 'img' : '');\n            if (item.msrc) {\n              placeholder.src = item.msrc;\n            }\n\n            _setImageSize(item, placeholder);\n\n            baseDiv.appendChild(placeholder);\n            item.placeholder = placeholder;\n          }\n\n          if (!item.loading) {\n            _preloadImage(item);\n          }\n\n          if (self.allowProgressiveImg()) {\n            // just append image\n            if (!_initialContentSet && _features.transform) {\n              _imagesToAppendPool.push({\n                item: item,\n                baseDiv: baseDiv,\n                img: item.img,\n                index: index,\n                holder: holder\n              });\n            } else {\n              _appendImage(index, item, baseDiv, item.img, true, true);\n            }\n          }\n        } else if (item.src && !item.loadError) {\n          // image object is created every time, due to bugs of image loading & delay when switching images\n          img = framework.createEl('pswp__img', 'img');\n          img.style.opacity = 1;\n          img.src = item.src;\n          _setImageSize(item, img);\n          _appendImage(index, item, baseDiv, img, true);\n        }\n\n        if (!_initialContentSet && index === _currentItemIndex) {\n          _currZoomElementStyle = baseDiv.style;\n          _showOrHide(item, img || item.img);\n        } else {\n          _applyZoomPanToItem(item);\n        }\n\n        holder.el.innerHTML = '';\n        holder.el.appendChild(baseDiv);\n      },\n      setContentAsync: function () {\n        var _ref9 = _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee9(holder, index) {\n          var prevItem, item, img, baseDiv, placeholderClassName, placeholder;\n          return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee9$(_context9) {\n            while (1) {\n              switch (_context9.prev = _context9.next) {\n                case 0:\n\n                  if (_options.loop) {\n                    index = _getLoopedId(index);\n                  }\n\n                  prevItem = self.getItemAt(holder.index);\n\n                  if (prevItem) {\n                    prevItem.container = null;\n                  }\n\n                  item = self.getItemAt(index);\n\n                  if (item) {\n                    _context9.next = 7;\n                    break;\n                  }\n\n                  holder.el.innerHTML = '';\n                  return _context9.abrupt('return');\n\n                case 7:\n                  _context9.next = 9;\n                  return _shoutAsync('gettingData', index, item);\n\n                case 9:\n                  //console.log(\"async gettedData\", index);\n\n                  holder.index = index;\n                  holder.item = item;\n\n                  // base container DIV is created only once for each of 3 holders\n                  baseDiv = item.container = framework.createEl('pswp__zoom-wrap');\n\n\n                  if (!item.src && item.html) {\n                    if (item.html.tagName) {\n                      baseDiv.appendChild(item.html);\n                    } else {\n                      baseDiv.innerHTML = item.html;\n                    }\n                  }\n\n                  _checkForError(item);\n\n                  _calculateItemSize(item, _viewportSize);\n\n                  if (item.src && !item.loadError && !item.loaded) {\n\n                    item.loadComplete = function (item) {\n\n                      // gallery closed before image finished loading\n                      if (!_isOpen) {\n                        return;\n                      }\n\n                      // check if holder hasn't changed while image was loading\n                      if (holder && holder.index === index) {\n                        if (_checkForError(item, true)) {\n                          item.loadComplete = item.img = null;\n                          _calculateItemSize(item, _viewportSize);\n                          _applyZoomPanToItem(item);\n\n                          if (holder.index === _currentItemIndex) {\n                            // recalculate dimensions\n                            self.updateCurrZoomItem();\n                          }\n                          return;\n                        }\n                        if (!item.imageAppended) {\n                          if (_features.transform && (_mainScrollAnimating || _initialZoomRunning)) {\n                            _imagesToAppendPool.push({\n                              item: item,\n                              baseDiv: baseDiv,\n                              img: item.img,\n                              index: index,\n                              holder: holder,\n                              clearPlaceholder: true\n                            });\n                          } else {\n                            _appendImage(index, item, baseDiv, item.img, _mainScrollAnimating || _initialZoomRunning, true);\n                          }\n                        } else {\n                          // remove preloader & mini-img\n                          if (!_initialZoomRunning && item.placeholder) {\n                            item.placeholder.style.display = 'none';\n                            item.placeholder = null;\n                          }\n                        }\n                      }\n\n                      item.loadComplete = null;\n                      item.img = null; // no need to store image element after it's added\n\n                      _shout('imageLoadComplete', index, item);\n                    };\n\n                    if (framework.features.transform) {\n                      placeholderClassName = 'pswp__img pswp__img--placeholder';\n\n                      placeholderClassName += item.msrc ? '' : ' pswp__img--placeholder--blank';\n\n                      placeholder = framework.createEl(placeholderClassName, item.msrc ? 'img' : '');\n\n                      if (item.msrc) {\n                        placeholder.src = item.msrc;\n                      }\n\n                      _setImageSize(item, placeholder);\n\n                      baseDiv.appendChild(placeholder);\n                      item.placeholder = placeholder;\n                    }\n\n                    if (!item.loading) {\n                      _preloadImage(item);\n                    }\n\n                    if (self.allowProgressiveImg()) {\n                      // just append image\n                      if (!_initialContentSet && _features.transform) {\n                        _imagesToAppendPool.push({\n                          item: item,\n                          baseDiv: baseDiv,\n                          img: item.img,\n                          index: index,\n                          holder: holder\n                        });\n                      } else {\n                        _appendImage(index, item, baseDiv, item.img, true, true);\n                      }\n                    }\n                  } else if (item.src && !item.loadError) {\n                    // image object is created every time, due to bugs of image loading & delay when switching images\n                    img = framework.createEl('pswp__img', 'img');\n                    img.style.opacity = 1;\n                    img.src = item.src;\n                    _setImageSize(item, img);\n                    _appendImage(index, item, baseDiv, img, true);\n                  }\n\n                  if (!_initialContentSet && index === _currentItemIndex) {\n                    _currZoomElementStyle = baseDiv.style;\n                    _showOrHide(item, img || item.img);\n                  } else {\n                    _applyZoomPanToItem(item);\n                  }\n\n                  holder.el.innerHTML = '';\n                  holder.el.appendChild(baseDiv);\n\n                case 19:\n                case 'end':\n                  return _context9.stop();\n              }\n            }\n          }, _callee9, this);\n        }));\n\n        function setContentAsync(_x13, _x14) {\n          return _ref9.apply(this, arguments);\n        }\n\n        return setContentAsync;\n      }(),\n      cleanSlide: function cleanSlide(item) {\n        if (item.img) {\n          item.img.onload = item.img.onerror = null;\n        }\n        item.loaded = item.loading = item.img = item.imageAppended = false;\n      }\n\n    }\n  });\n\n  /*>>items-controller*/\n\n  /*>>tap*/\n  /**\n   * tap.js:\n   *\n   * Displatches tap and double-tap events.\n   *\n   */\n\n  var tapTimer,\n      tapReleasePoint = {},\n      _dispatchTapEvent = function _dispatchTapEvent(origEvent, releasePoint, pointerType) {\n    var e = document.createEvent('CustomEvent'),\n        eDetail = {\n      origEvent: origEvent,\n      target: origEvent.target,\n      releasePoint: releasePoint,\n      pointerType: pointerType || 'touch'\n    };\n\n    e.initCustomEvent('pswpTap', true, true, eDetail);\n    origEvent.target.dispatchEvent(e);\n  };\n\n  _registerModule('Tap', {\n    publicMethods: {\n      initTap: function initTap() {\n        _listen('firstTouchStart', self.onTapStart);\n        _listen('touchRelease', self.onTapRelease);\n        _listen('destroy', function () {\n          tapReleasePoint = {};\n          tapTimer = null;\n        });\n      },\n      onTapStart: function onTapStart(touchList) {\n        if (touchList.length > 1) {\n          clearTimeout(tapTimer);\n          tapTimer = null;\n        }\n      },\n      onTapRelease: function onTapRelease(e, releasePoint) {\n        if (!releasePoint) {\n          return;\n        }\n\n        if (!_moved && !_isMultitouch && !_numAnimations) {\n          var p0 = releasePoint;\n          if (tapTimer) {\n            clearTimeout(tapTimer);\n            tapTimer = null;\n\n            // Check if taped on the same place\n            if (_isNearbyPoints(p0, tapReleasePoint)) {\n              _shout('doubleTap', p0);\n              return;\n            }\n          }\n\n          if (releasePoint.type === 'mouse') {\n            _dispatchTapEvent(e, releasePoint, 'mouse');\n            return;\n          }\n\n          var clickedTagName = e.target.tagName.toUpperCase();\n          // avoid double tap delay on buttons and elements that have class pswp__single-tap\n          if (clickedTagName === 'BUTTON' || framework.hasClass(e.target, 'pswp__single-tap')) {\n            _dispatchTapEvent(e, releasePoint);\n            return;\n          }\n\n          _equalizePoints(tapReleasePoint, p0);\n\n          tapTimer = setTimeout(function () {\n            _dispatchTapEvent(e, releasePoint);\n            tapTimer = null;\n          }, 300);\n        }\n      }\n    }\n  });\n\n  /*>>tap*/\n\n  /*>>desktop-zoom*/\n  /**\n   *\n   * desktop-zoom.js:\n   *\n   * - Binds mousewheel event for paning zoomed image.\n   * - Manages \"dragging\", \"zoomed-in\", \"zoom-out\" classes.\n   *   (which are used for cursors and zoom icon)\n   * - Adds toggleDesktopZoom function.\n   *\n   */\n\n  var _wheelDelta;\n\n  _registerModule('DesktopZoom', {\n\n    publicMethods: {\n\n      initDesktopZoom: function initDesktopZoom() {\n\n        if (_oldIE) {\n          // no zoom for old IE (<=8)\n          return;\n        }\n\n        if (_likelyTouchDevice) {\n          // if detected hardware touch support, we wait until mouse is used,\n          // and only then apply desktop-zoom features\n          _listen('mouseUsed', function () {\n            self.setupDesktopZoom();\n          });\n        } else {\n          self.setupDesktopZoom(true);\n        }\n      },\n\n      setupDesktopZoom: function setupDesktopZoom(onInit) {\n\n        _wheelDelta = {};\n\n        var events = 'wheel mousewheel DOMMouseScroll';\n\n        _listen('bindEvents', function () {\n          framework.bind(template, events, self.handleMouseWheel);\n        });\n\n        _listen('unbindEvents', function () {\n          if (_wheelDelta) {\n            framework.unbind(template, events, self.handleMouseWheel);\n          }\n        });\n\n        self.mouseZoomedIn = false;\n\n        var hasDraggingClass,\n            updateZoomable = function updateZoomable() {\n          if (self.mouseZoomedIn) {\n            framework.removeClass(template, 'pswp--zoomed-in');\n            self.mouseZoomedIn = false;\n          }\n          if (_currZoomLevel < 1) {\n            framework.addClass(template, 'pswp--zoom-allowed');\n          } else {\n            framework.removeClass(template, 'pswp--zoom-allowed');\n          }\n          removeDraggingClass();\n        },\n            removeDraggingClass = function removeDraggingClass() {\n          if (hasDraggingClass) {\n            framework.removeClass(template, 'pswp--dragging');\n            hasDraggingClass = false;\n          }\n        };\n\n        _listen('resize', updateZoomable);\n        _listen('afterChange', updateZoomable);\n        _listen('pointerDown', function () {\n          if (self.mouseZoomedIn) {\n            hasDraggingClass = true;\n            framework.addClass(template, 'pswp--dragging');\n          }\n        });\n        _listen('pointerUp', removeDraggingClass);\n\n        if (!onInit) {\n          updateZoomable();\n        }\n      },\n\n      handleMouseWheel: function handleMouseWheel(e) {\n\n        if (_currZoomLevel <= self.currItem.fitRatio) {\n          if (_options.modal) {\n\n            if (!_options.closeOnScroll || _numAnimations || _isDragging) {\n              e.preventDefault();\n            } else if (_transformKey && Math.abs(e.deltaY) > 2) {\n              // close PhotoSwipe\n              // if browser supports transforms & scroll changed enough\n              _closedByScroll = true;\n              self.close();\n            }\n          }\n          return true;\n        }\n\n        // allow just one event to fire\n        e.stopPropagation();\n\n        // https://developer.mozilla.org/en-US/docs/Web/Events/wheel\n        _wheelDelta.x = 0;\n\n        if ('deltaX' in e) {\n          if (e.deltaMode === 1 /* DOM_DELTA_LINE */) {\n              // 18 - average line height\n              _wheelDelta.x = e.deltaX * 18;\n              _wheelDelta.y = e.deltaY * 18;\n            } else {\n            _wheelDelta.x = e.deltaX;\n            _wheelDelta.y = e.deltaY;\n          }\n        } else if ('wheelDelta' in e) {\n          if (e.wheelDeltaX) {\n            _wheelDelta.x = -0.16 * e.wheelDeltaX;\n          }\n          if (e.wheelDeltaY) {\n            _wheelDelta.y = -0.16 * e.wheelDeltaY;\n          } else {\n            _wheelDelta.y = -0.16 * e.wheelDelta;\n          }\n        } else if ('detail' in e) {\n          _wheelDelta.y = e.detail;\n        } else {\n          return;\n        }\n\n        _calculatePanBounds(_currZoomLevel, true);\n\n        var newPanX = _panOffset.x - _wheelDelta.x,\n            newPanY = _panOffset.y - _wheelDelta.y;\n\n        // only prevent scrolling in nonmodal mode when not at edges\n        if (_options.modal || newPanX <= _currPanBounds.min.x && newPanX >= _currPanBounds.max.x && newPanY <= _currPanBounds.min.y && newPanY >= _currPanBounds.max.y) {\n          e.preventDefault();\n        }\n\n        // TODO: use rAF instead of mousewheel?\n        self.panTo(newPanX, newPanY);\n      },\n\n      toggleDesktopZoom: function toggleDesktopZoom(centerPoint) {\n        centerPoint = centerPoint || {\n          x: _viewportSize.x / 2 + _offset.x,\n          y: _viewportSize.y / 2 + _offset.y\n        };\n\n        var doubleTapZoomLevel = _options.getDoubleTapZoom(true, self.currItem);\n        var zoomOut = _currZoomLevel === doubleTapZoomLevel;\n\n        self.mouseZoomedIn = !zoomOut;\n\n        self.zoomTo(zoomOut ? self.currItem.initialZoomLevel : doubleTapZoomLevel, centerPoint, 333);\n        framework[(!zoomOut ? 'add' : 'remove') + 'Class'](template, 'pswp--zoomed-in');\n      }\n\n    }\n  });\n\n  /*>>desktop-zoom*/\n\n  /*>>history*/\n  /**\n   *\n   * history.js:\n   *\n   * - Back button to close gallery.\n   *\n   * - Unique URL for each slide: example.com/&pid=1&gid=3\n   *   (where PID is picture index, and GID and gallery index)\n   *\n   * - Switch URL when slides change.\n   *\n   */\n\n  var _historyDefaultOptions = {\n    history: true,\n    galleryUID: 1\n  };\n\n  var _historyUpdateTimeout,\n      _hashChangeTimeout,\n      _hashAnimCheckTimeout,\n      _hashChangedByScript,\n      _hashChangedByHistory,\n      _hashReseted,\n      _initialHash,\n      _historyChanged,\n      _closedFromURL,\n      _urlChangedOnce,\n      _windowLoc,\n      _supportsPushState,\n      _getHash = function _getHash() {\n    return _windowLoc.hash.substring(1);\n  },\n      _cleanHistoryTimeouts = function _cleanHistoryTimeouts() {\n\n    if (_historyUpdateTimeout) {\n      clearTimeout(_historyUpdateTimeout);\n    }\n\n    if (_hashAnimCheckTimeout) {\n      clearTimeout(_hashAnimCheckTimeout);\n    }\n  },\n\n\n  // pid - Picture index\n  // gid - Gallery index\n  _parseItemIndexFromURL = function _parseItemIndexFromURL() {\n    var hash = _getHash(),\n        params = {};\n\n    if (hash.length < 5) {\n      // pid=1\n      return params;\n    }\n\n    var i,\n        vars = hash.split('&');\n    for (i = 0; i < vars.length; i++) {\n      if (!vars[i]) {\n        continue;\n      }\n      var pair = vars[i].split('=');\n      if (pair.length < 2) {\n        continue;\n      }\n      params[pair[0]] = pair[1];\n    }\n    if (_options.galleryPIDs) {\n      // detect custom pid in hash and search for it among the items collection\n      var searchfor = params.pid;\n      params.pid = 0; // if custom pid cannot be found, fallback to the first item\n      for (i = 0; i < _items.length; i++) {\n        if (_items[i].pid === searchfor) {\n          params.pid = i;\n          break;\n        }\n      }\n    } else {\n      params.pid = parseInt(params.pid, 10) - 1;\n    }\n    if (params.pid < 0) {\n      params.pid = 0;\n    }\n    return params;\n  },\n      _updateHash = function _updateHash() {\n\n    if (_hashAnimCheckTimeout) {\n      clearTimeout(_hashAnimCheckTimeout);\n    }\n\n    if (_numAnimations || _isDragging) {\n      // changing browser URL forces layout/paint in some browsers, which causes noticable lag during animation\n      // that's why we update hash only when no animations running\n      _hashAnimCheckTimeout = setTimeout(_updateHash, 500);\n      return;\n    }\n\n    if (_hashChangedByScript) {\n      clearTimeout(_hashChangeTimeout);\n    } else {\n      _hashChangedByScript = true;\n    }\n\n    var pid = _currentItemIndex + 1;\n    var item = _getItemAt(_currentItemIndex);\n    if (item.hasOwnProperty('pid')) {\n      // carry forward any custom pid assigned to the item\n      pid = item.pid;\n    }\n    var newHash = _initialHash + '&' + 'gid=' + _options.galleryUID + '&' + 'pid=' + pid;\n\n    if (!_historyChanged) {\n      if (_windowLoc.hash.indexOf(newHash) === -1) {\n        _urlChangedOnce = true;\n      }\n      // first time - add new hisory record, then just replace\n    }\n\n    var newURL = _windowLoc.href.split('#')[0] + '#' + newHash;\n\n    if (_supportsPushState) {\n\n      if ('#' + newHash !== window.location.hash) {\n        history[_historyChanged ? 'replaceState' : 'pushState']('', document.title, newURL);\n      }\n    } else {\n      if (_historyChanged) {\n        _windowLoc.replace(newURL);\n      } else {\n        _windowLoc.hash = newHash;\n      }\n    }\n\n    _historyChanged = true;\n    _hashChangeTimeout = setTimeout(function () {\n      _hashChangedByScript = false;\n    }, 60);\n  };\n\n  _registerModule('History', {\n\n    publicMethods: {\n      initHistory: function initHistory() {\n\n        framework.extend(_options, _historyDefaultOptions, true);\n\n        if (!_options.history) {\n          return;\n        }\n\n        _windowLoc = window.location;\n        _urlChangedOnce = false;\n        _closedFromURL = false;\n        _historyChanged = false;\n        _initialHash = _getHash();\n        _supportsPushState = 'pushState' in history;\n\n        if (_initialHash.indexOf('gid=') > -1) {\n          _initialHash = _initialHash.split('&gid=')[0];\n          _initialHash = _initialHash.split('?gid=')[0];\n        }\n\n        _listen('afterChange', self.updateURL);\n        _listen('unbindEvents', function () {\n          framework.unbind(window, 'hashchange', self.onHashChange);\n        });\n\n        var returnToOriginal = function returnToOriginal() {\n          _hashReseted = true;\n          if (!_closedFromURL) {\n\n            if (_urlChangedOnce) {\n              history.back();\n            } else {\n\n              if (_initialHash) {\n                _windowLoc.hash = _initialHash;\n              } else {\n                if (_supportsPushState) {\n\n                  // remove hash from url without refreshing it or scrolling to top\n                  history.pushState('', document.title, _windowLoc.pathname + _windowLoc.search);\n                } else {\n                  _windowLoc.hash = '';\n                }\n              }\n            }\n          }\n\n          _cleanHistoryTimeouts();\n        };\n\n        _listen('unbindEvents', function () {\n          if (_closedByScroll) {\n            // if PhotoSwipe is closed by scroll, we go \"back\" before the closing animation starts\n            // this is done to keep the scroll position\n            returnToOriginal();\n          }\n        });\n        _listen('destroy', function () {\n          if (!_hashReseted) {\n            returnToOriginal();\n          }\n        });\n        _listen('firstUpdate', function () {\n          _currentItemIndex = _parseItemIndexFromURL().pid;\n        });\n\n        var index = _initialHash.indexOf('pid=');\n        if (index > -1) {\n          _initialHash = _initialHash.substring(0, index);\n          if (_initialHash.slice(-1) === '&') {\n            _initialHash = _initialHash.slice(0, -1);\n          }\n        }\n\n        setTimeout(function () {\n          if (_isOpen) {\n            // hasn't destroyed yet\n            framework.bind(window, 'hashchange', self.onHashChange);\n          }\n        }, 40);\n      },\n      onHashChange: function onHashChange() {\n\n        if (_getHash() === _initialHash) {\n\n          _closedFromURL = true;\n          self.close();\n          return;\n        }\n        if (!_hashChangedByScript) {\n\n          _hashChangedByHistory = true;\n          self.goTo(_parseItemIndexFromURL().pid);\n          _hashChangedByHistory = false;\n        }\n      },\n      updateURL: function updateURL() {\n\n        // Delay the update of URL, to avoid lag during transition,\n        // and to not to trigger actions like \"refresh page sound\" or \"blinking favicon\" to often\n\n        _cleanHistoryTimeouts();\n\n        if (_hashChangedByHistory) {\n          return;\n        }\n\n        if (!_historyChanged) {\n          _updateHash(); // first time\n        } else {\n          _historyUpdateTimeout = setTimeout(_updateHash, 800);\n        }\n      }\n\n    }\n  });\n\n  /*>>history*/\n  framework.extend(self, publicMethods);\n};\n/* harmony default export */ __webpack_exports__[\"a\"] = (PhotoSwipe);\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/*! PhotoSwipe Default UI - 4.1.3 - 2019-01-08\n* http://photoswipe.com\n* Copyright (c) 2019 Dmitry Semenov; */\n/**\n *\n * UI on top of main sliding area (caption, arrows, close button, etc.).\n * Built just using public methods/properties of PhotoSwipe.\n *\n */\n(function (root, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object') {\n    module.exports = factory();\n  } else {\n    root.PhotoSwipeUI_Default = factory();\n  }\n})(this, function () {\n\n  'use strict';\n\n  var PhotoSwipeUI_Default = function PhotoSwipeUI_Default(pswp, framework) {\n\n    var ui = this;\n    var _overlayUIUpdated = false,\n        _controlsVisible = true,\n        _fullscrenAPI,\n        _controls,\n        _captionContainer,\n        _fakeCaptionContainer,\n        _indexIndicator,\n        _shareButton,\n        _shareModal,\n        _shareModalHidden = true,\n        _initalCloseOnScrollValue,\n        _isIdle,\n        _listen,\n        _loadingIndicator,\n        _loadingIndicatorHidden,\n        _loadingIndicatorTimeout,\n        _galleryHasOneSlide,\n        _options,\n        _defaultUIOptions = {\n      barsSize: { top: 44, bottom: 'auto' },\n      closeElClasses: ['item', 'caption', 'zoom-wrap', 'ui', 'top-bar'],\n      timeToIdle: 4000,\n      timeToIdleOutside: 1000,\n      loadingIndicatorDelay: 1000, // 2s\n\n      addCaptionHTMLFn: function addCaptionHTMLFn(item, captionEl /*, isFake */) {\n        if (!item.title) {\n          captionEl.children[0].innerHTML = '';\n          return false;\n        }\n        captionEl.children[0].innerHTML = item.title;\n        return true;\n      },\n\n      closeEl: true,\n      captionEl: true,\n      fullscreenEl: true,\n      zoomEl: true,\n      shareEl: true,\n      counterEl: true,\n      arrowEl: true,\n      preloaderEl: true,\n\n      tapToClose: false,\n      tapToToggleControls: true,\n\n      clickToCloseNonZoomable: true,\n\n      shareButtons: [{ id: 'facebook', label: 'Share on Facebook', url: 'https://www.facebook.com/sharer/sharer.php?u={{url}}' }, { id: 'twitter', label: 'Tweet', url: 'https://twitter.com/intent/tweet?text={{text}}&url={{url}}' }, { id: 'pinterest', label: 'Pin it', url: 'http://www.pinterest.com/pin/create/button/' + '?url={{url}}&media={{image_url}}&description={{text}}' }, { id: 'download', label: 'Download image', url: '{{raw_image_url}}', download: true }],\n      getImageURLForShare: function getImageURLForShare() /* shareButtonData */{\n        return pswp.currItem.src || '';\n      },\n      getPageURLForShare: function getPageURLForShare() /* shareButtonData */{\n        return window.location.href;\n      },\n      getTextForShare: function getTextForShare() /* shareButtonData */{\n        return pswp.currItem.title || '';\n      },\n\n      indexIndicatorSep: ' / ',\n      fitControlsWidth: 1200\n\n    },\n        _blockControlsTap,\n        _blockControlsTapTimeout;\n\n    var _onControlsTap = function _onControlsTap(e) {\n      if (_blockControlsTap) {\n        return true;\n      }\n\n      e = e || window.event;\n\n      if (_options.timeToIdle && _options.mouseUsed && !_isIdle) {\n        // reset idle timer\n        _onIdleMouseMove();\n      }\n\n      var target = e.target || e.srcElement,\n          uiElement,\n          clickedClass = target.getAttribute('class') || '',\n          found;\n\n      for (var i = 0; i < _uiElements.length; i++) {\n        uiElement = _uiElements[i];\n        if (uiElement.onTap && clickedClass.indexOf('pswp__' + uiElement.name) > -1) {\n          uiElement.onTap();\n          found = true;\n        }\n      }\n\n      if (found) {\n        if (e.stopPropagation) {\n          e.stopPropagation();\n        }\n        _blockControlsTap = true;\n\n        // Some versions of Android don't prevent ghost click event\n        // when preventDefault() was called on touchstart and/or touchend.\n        //\n        // This happens on v4.3, 4.2, 4.1,\n        // older versions strangely work correctly,\n        // but just in case we add delay on all of them)\n        var tapDelay = framework.features.isOldAndroid ? 600 : 30;\n        _blockControlsTapTimeout = setTimeout(function () {\n          _blockControlsTap = false;\n        }, tapDelay);\n      }\n    },\n        _fitControlsInViewport = function _fitControlsInViewport() {\n      return !pswp.likelyTouchDevice || _options.mouseUsed || screen.width > _options.fitControlsWidth;\n    },\n        _togglePswpClass = function _togglePswpClass(el, cName, add) {\n      framework[(add ? 'add' : 'remove') + 'Class'](el, 'pswp__' + cName);\n    },\n\n\n    // add class when there is just one item in the gallery\n    // (by default it hides left/right arrows and 1ofX counter)\n    _countNumItems = function _countNumItems() {\n      var hasOneSlide = _options.getNumItemsFn() === 1;\n\n      if (hasOneSlide !== _galleryHasOneSlide) {\n        _togglePswpClass(_controls, 'ui--one-slide', hasOneSlide);\n        _galleryHasOneSlide = hasOneSlide;\n      }\n    },\n        _toggleShareModalClass = function _toggleShareModalClass() {\n      _togglePswpClass(_shareModal, 'share-modal--hidden', _shareModalHidden);\n    },\n        _toggleShareModal = function _toggleShareModal() {\n\n      _shareModalHidden = !_shareModalHidden;\n\n      if (!_shareModalHidden) {\n        _toggleShareModalClass();\n        setTimeout(function () {\n          if (!_shareModalHidden) {\n            framework.addClass(_shareModal, 'pswp__share-modal--fade-in');\n          }\n        }, 30);\n      } else {\n        framework.removeClass(_shareModal, 'pswp__share-modal--fade-in');\n        setTimeout(function () {\n          if (_shareModalHidden) {\n            _toggleShareModalClass();\n          }\n        }, 300);\n      }\n\n      if (!_shareModalHidden) {\n        _updateShareURLs();\n      }\n      return false;\n    },\n        _openWindowPopup = function _openWindowPopup(e) {\n      e = e || window.event;\n      var target = e.target || e.srcElement;\n\n      pswp.shout('shareLinkClick', e, target);\n\n      if (!target.href) {\n        return false;\n      }\n\n      if (target.hasAttribute('download')) {\n        return true;\n      }\n\n      window.open(target.href, 'pswp_share', 'scrollbars=yes,resizable=yes,toolbar=no,' + 'location=yes,width=550,height=420,top=100,left=' + (window.screen ? Math.round(screen.width / 2 - 275) : 100));\n\n      if (!_shareModalHidden) {\n        _toggleShareModal();\n      }\n\n      return false;\n    },\n        _updateShareURLs = function _updateShareURLs() {\n      var shareButtonOut = '',\n          shareButtonData,\n          shareURL,\n          image_url,\n          page_url,\n          share_text;\n\n      for (var i = 0; i < _options.shareButtons.length; i++) {\n        shareButtonData = _options.shareButtons[i];\n\n        image_url = _options.getImageURLForShare(shareButtonData);\n        page_url = _options.getPageURLForShare(shareButtonData);\n        share_text = _options.getTextForShare(shareButtonData);\n\n        shareURL = shareButtonData.url.replace('{{url}}', encodeURIComponent(page_url)).replace('{{image_url}}', encodeURIComponent(image_url)).replace('{{raw_image_url}}', image_url).replace('{{text}}', encodeURIComponent(share_text));\n\n        shareButtonOut += '<a href=\"' + shareURL + '\" target=\"_blank\" ' + 'class=\"pswp__share--' + shareButtonData.id + '\"' + (shareButtonData.download ? 'download' : '') + '>' + shareButtonData.label + '</a>';\n\n        if (_options.parseShareButtonOut) {\n          shareButtonOut = _options.parseShareButtonOut(shareButtonData, shareButtonOut);\n        }\n      }\n      _shareModal.children[0].innerHTML = shareButtonOut;\n      _shareModal.children[0].onclick = _openWindowPopup;\n    },\n        _hasCloseClass = function _hasCloseClass(target) {\n      for (var i = 0; i < _options.closeElClasses.length; i++) {\n        if (framework.hasClass(target, 'pswp__' + _options.closeElClasses[i])) {\n          return true;\n        }\n      }\n    },\n        _idleInterval,\n        _idleTimer,\n        _idleIncrement = 0,\n        _onIdleMouseMove = function _onIdleMouseMove() {\n      clearTimeout(_idleTimer);\n      _idleIncrement = 0;\n      if (_isIdle) {\n        ui.setIdle(false);\n      }\n    },\n        _onMouseLeaveWindow = function _onMouseLeaveWindow(e) {\n      e = e ? e : window.event;\n      var from = e.relatedTarget || e.toElement;\n      if (!from || from.nodeName === 'HTML') {\n        clearTimeout(_idleTimer);\n        _idleTimer = setTimeout(function () {\n          ui.setIdle(true);\n        }, _options.timeToIdleOutside);\n      }\n    },\n        _setupFullscreenAPI = function _setupFullscreenAPI() {\n      if (_options.fullscreenEl && !framework.features.isOldAndroid) {\n        if (!_fullscrenAPI) {\n          _fullscrenAPI = ui.getFullscreenAPI();\n        }\n        if (_fullscrenAPI) {\n          framework.bind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\n          ui.updateFullscreen();\n          framework.addClass(pswp.template, 'pswp--supports-fs');\n        } else {\n          framework.removeClass(pswp.template, 'pswp--supports-fs');\n        }\n      }\n    },\n        _setupLoadingIndicator = function _setupLoadingIndicator() {\n      // Setup loading indicator\n      if (_options.preloaderEl) {\n\n        _toggleLoadingIndicator(true);\n\n        _listen('beforeChange', function () {\n\n          clearTimeout(_loadingIndicatorTimeout);\n\n          // display loading indicator with delay\n          _loadingIndicatorTimeout = setTimeout(function () {\n\n            if (pswp.currItem && pswp.currItem.loading) {\n\n              if (!pswp.allowProgressiveImg() || pswp.currItem.img && !pswp.currItem.img.naturalWidth) {\n                // show preloader if progressive loading is not enabled,\n                // or image width is not defined yet (because of slow connection)\n                _toggleLoadingIndicator(false);\n                // items-controller.js function allowProgressiveImg\n              }\n            } else {\n              _toggleLoadingIndicator(true); // hide preloader\n            }\n          }, _options.loadingIndicatorDelay);\n        });\n        _listen('imageLoadComplete', function (index, item) {\n          if (pswp.currItem === item) {\n            _toggleLoadingIndicator(true);\n          }\n        });\n      }\n    },\n        _toggleLoadingIndicator = function _toggleLoadingIndicator(hide) {\n      if (_loadingIndicatorHidden !== hide) {\n        _togglePswpClass(_loadingIndicator, 'preloader--active', !hide);\n        _loadingIndicatorHidden = hide;\n      }\n    },\n        _applyNavBarGaps = function _applyNavBarGaps(item) {\n      var gap = item.vGap;\n\n      if (_fitControlsInViewport()) {\n\n        var bars = _options.barsSize;\n        if (_options.captionEl && bars.bottom === 'auto') {\n          if (!_fakeCaptionContainer) {\n            _fakeCaptionContainer = framework.createEl('pswp__caption pswp__caption--fake');\n            _fakeCaptionContainer.appendChild(framework.createEl('pswp__caption__center'));\n            _controls.insertBefore(_fakeCaptionContainer, _captionContainer);\n            framework.addClass(_controls, 'pswp__ui--fit');\n          }\n          if (_options.addCaptionHTMLFn(item, _fakeCaptionContainer, true)) {\n\n            var captionSize = _fakeCaptionContainer.clientHeight;\n            gap.bottom = parseInt(captionSize, 10) || 44;\n          } else {\n            gap.bottom = bars.top; // if no caption, set size of bottom gap to size of top\n          }\n        } else {\n          gap.bottom = bars.bottom === 'auto' ? 0 : bars.bottom;\n        }\n\n        // height of top bar is static, no need to calculate it\n        gap.top = bars.top;\n      } else {\n        gap.top = gap.bottom = 0;\n      }\n    },\n        _setupIdle = function _setupIdle() {\n      // Hide controls when mouse is used\n      if (_options.timeToIdle) {\n        _listen('mouseUsed', function () {\n\n          framework.bind(document, 'mousemove', _onIdleMouseMove);\n          framework.bind(document, 'mouseout', _onMouseLeaveWindow);\n\n          _idleInterval = setInterval(function () {\n            _idleIncrement++;\n            if (_idleIncrement === 2) {\n              ui.setIdle(true);\n            }\n          }, _options.timeToIdle / 2);\n        });\n      }\n    },\n        _setupHidingControlsDuringGestures = function _setupHidingControlsDuringGestures() {\n\n      // Hide controls on vertical drag\n      _listen('onVerticalDrag', function (now) {\n        if (_controlsVisible && now < 0.95) {\n          ui.hideControls();\n        } else if (!_controlsVisible && now >= 0.95) {\n          ui.showControls();\n        }\n      });\n\n      // Hide controls when pinching to close\n      var pinchControlsHidden;\n      _listen('onPinchClose', function (now) {\n        if (_controlsVisible && now < 0.9) {\n          ui.hideControls();\n          pinchControlsHidden = true;\n        } else if (pinchControlsHidden && !_controlsVisible && now > 0.9) {\n          ui.showControls();\n        }\n      });\n\n      _listen('zoomGestureEnded', function () {\n        pinchControlsHidden = false;\n        if (pinchControlsHidden && !_controlsVisible) {\n          ui.showControls();\n        }\n      });\n    };\n\n    var _uiElements = [{\n      name: 'caption',\n      option: 'captionEl',\n      onInit: function onInit(el) {\n        _captionContainer = el;\n      }\n    }, {\n      name: 'share-modal',\n      option: 'shareEl',\n      onInit: function onInit(el) {\n        _shareModal = el;\n      },\n      onTap: function onTap() {\n        _toggleShareModal();\n      }\n    }, {\n      name: 'button--share',\n      option: 'shareEl',\n      onInit: function onInit(el) {\n        _shareButton = el;\n      },\n      onTap: function onTap() {\n        _toggleShareModal();\n      }\n    }, {\n      name: 'button--zoom',\n      option: 'zoomEl',\n      onTap: pswp.toggleDesktopZoom\n    }, {\n      name: 'counter',\n      option: 'counterEl',\n      onInit: function onInit(el) {\n        _indexIndicator = el;\n      }\n    }, {\n      name: 'button--close',\n      option: 'closeEl',\n      onTap: pswp.close\n    }, {\n      name: 'button--arrow--left',\n      option: 'arrowEl',\n      onTap: pswp.prev\n    }, {\n      name: 'button--arrow--right',\n      option: 'arrowEl',\n      onTap: pswp.next\n    }, {\n      name: 'button--fs',\n      option: 'fullscreenEl',\n      onTap: function onTap() {\n        if (_fullscrenAPI.isFullscreen()) {\n          _fullscrenAPI.exit();\n        } else {\n          _fullscrenAPI.enter();\n        }\n      }\n    }, {\n      name: 'preloader',\n      option: 'preloaderEl',\n      onInit: function onInit(el) {\n        _loadingIndicator = el;\n      }\n    }];\n\n    var _setupUIElements = function _setupUIElements() {\n      var item, classAttr, uiElement;\n\n      var loopThroughChildElements = function loopThroughChildElements(sChildren) {\n        if (!sChildren) {\n          return;\n        }\n\n        var l = sChildren.length;\n        for (var i = 0; i < l; i++) {\n          item = sChildren[i];\n          classAttr = item.className;\n\n          for (var a = 0; a < _uiElements.length; a++) {\n            uiElement = _uiElements[a];\n\n            if (classAttr.indexOf('pswp__' + uiElement.name) > -1) {\n\n              if (_options[uiElement.option]) {\n                // if element is not disabled from options\n\n                framework.removeClass(item, 'pswp__element--disabled');\n                if (uiElement.onInit) {\n                  uiElement.onInit(item);\n                }\n\n                //item.style.display = 'block';\n              } else {\n                framework.addClass(item, 'pswp__element--disabled');\n                //item.style.display = 'none';\n              }\n            }\n          }\n        }\n      };\n      loopThroughChildElements(_controls.children);\n\n      var topBar = framework.getChildByClass(_controls, 'pswp__top-bar');\n      if (topBar) {\n        loopThroughChildElements(topBar.children);\n      }\n    };\n\n    ui.init = function () {\n\n      // extend options\n      framework.extend(pswp.options, _defaultUIOptions, true);\n\n      // create local link for fast access\n      _options = pswp.options;\n\n      // find pswp__ui element\n      _controls = framework.getChildByClass(pswp.scrollWrap, 'pswp__ui');\n\n      // create local link\n      _listen = pswp.listen;\n\n      _setupHidingControlsDuringGestures();\n\n      // update controls when slides change\n      _listen('beforeChange', ui.update);\n\n      // toggle zoom on double-tap\n      _listen('doubleTap', function (point) {\n        var initialZoomLevel = pswp.currItem.initialZoomLevel;\n        if (pswp.getZoomLevel() !== initialZoomLevel) {\n          pswp.zoomTo(initialZoomLevel, point, 333);\n        } else {\n          pswp.zoomTo(_options.getDoubleTapZoom(false, pswp.currItem), point, 333);\n        }\n      });\n\n      // Allow text selection in caption\n      _listen('preventDragEvent', function (e, isDown, preventObj) {\n        var t = e.target || e.srcElement;\n        if (t && t.getAttribute('class') && e.type.indexOf('mouse') > -1 && (t.getAttribute('class').indexOf('__caption') > 0 || /(SMALL|STRONG|EM)/i.test(t.tagName))) {\n          preventObj.prevent = false;\n        }\n      });\n\n      // bind events for UI\n      _listen('bindEvents', function () {\n        framework.bind(_controls, 'pswpTap click', _onControlsTap);\n        framework.bind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\n\n        if (!pswp.likelyTouchDevice) {\n          framework.bind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\n        }\n      });\n\n      // unbind events for UI\n      _listen('unbindEvents', function () {\n        if (!_shareModalHidden) {\n          _toggleShareModal();\n        }\n\n        if (_idleInterval) {\n          clearInterval(_idleInterval);\n        }\n        framework.unbind(document, 'mouseout', _onMouseLeaveWindow);\n        framework.unbind(document, 'mousemove', _onIdleMouseMove);\n        framework.unbind(_controls, 'pswpTap click', _onControlsTap);\n        framework.unbind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\n        framework.unbind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\n\n        if (_fullscrenAPI) {\n          framework.unbind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\n          if (_fullscrenAPI.isFullscreen()) {\n            _options.hideAnimationDuration = 0;\n            _fullscrenAPI.exit();\n          }\n          _fullscrenAPI = null;\n        }\n      });\n\n      // clean up things when gallery is destroyed\n      _listen('destroy', function () {\n        if (_options.captionEl) {\n          if (_fakeCaptionContainer) {\n            _controls.removeChild(_fakeCaptionContainer);\n          }\n          framework.removeClass(_captionContainer, 'pswp__caption--empty');\n        }\n\n        if (_shareModal) {\n          _shareModal.children[0].onclick = null;\n        }\n        framework.removeClass(_controls, 'pswp__ui--over-close');\n        framework.addClass(_controls, 'pswp__ui--hidden');\n        ui.setIdle(false);\n      });\n\n      if (!_options.showAnimationDuration) {\n        framework.removeClass(_controls, 'pswp__ui--hidden');\n      }\n      _listen('initialZoomIn', function () {\n        if (_options.showAnimationDuration) {\n          framework.removeClass(_controls, 'pswp__ui--hidden');\n        }\n      });\n      _listen('initialZoomOut', function () {\n        framework.addClass(_controls, 'pswp__ui--hidden');\n      });\n\n      _listen('parseVerticalMargin', _applyNavBarGaps);\n\n      _setupUIElements();\n\n      if (_options.shareEl && _shareButton && _shareModal) {\n        _shareModalHidden = true;\n      }\n\n      _countNumItems();\n\n      _setupIdle();\n\n      _setupFullscreenAPI();\n\n      _setupLoadingIndicator();\n    };\n\n    ui.setIdle = function (isIdle) {\n      _isIdle = isIdle;\n      _togglePswpClass(_controls, 'ui--idle', isIdle);\n    };\n\n    ui.update = function () {\n      // Don't update UI if it's hidden\n      if (_controlsVisible && pswp.currItem) {\n\n        ui.updateIndexIndicator();\n\n        if (_options.captionEl) {\n          _options.addCaptionHTMLFn(pswp.currItem, _captionContainer);\n\n          _togglePswpClass(_captionContainer, 'caption--empty', !pswp.currItem.title);\n        }\n\n        _overlayUIUpdated = true;\n      } else {\n        _overlayUIUpdated = false;\n      }\n\n      if (!_shareModalHidden) {\n        _toggleShareModal();\n      }\n\n      _countNumItems();\n    };\n\n    ui.updateFullscreen = function (e) {\n\n      if (e) {\n        // some browsers change window scroll position during the fullscreen\n        // so PhotoSwipe updates it just in case\n        setTimeout(function () {\n          pswp.setScrollOffset(0, framework.getScrollY());\n        }, 50);\n      }\n\n      // toogle pswp--fs class on root element\n      framework[(_fullscrenAPI.isFullscreen() ? 'add' : 'remove') + 'Class'](pswp.template, 'pswp--fs');\n    };\n\n    ui.updateIndexIndicator = function () {\n      if (_options.counterEl) {\n        _indexIndicator.innerHTML = pswp.getCurrentIndex() + 1 + _options.indexIndicatorSep + _options.getNumItemsFn();\n      }\n    };\n\n    ui.onGlobalTap = function (e) {\n      e = e || window.event;\n      var target = e.target || e.srcElement;\n\n      if (_blockControlsTap) {\n        return;\n      }\n\n      if (e.detail && e.detail.pointerType === 'mouse') {\n\n        // close gallery if clicked outside of the image\n        if (_hasCloseClass(target)) {\n          pswp.close();\n          return;\n        }\n\n        if (framework.hasClass(target, 'pswp__img')) {\n          if (pswp.getZoomLevel() === 1 && pswp.getZoomLevel() <= pswp.currItem.fitRatio) {\n            if (_options.clickToCloseNonZoomable) {\n              pswp.close();\n            }\n          } else {\n            pswp.toggleDesktopZoom(e.detail.releasePoint);\n          }\n        }\n      } else {\n\n        // tap anywhere (except buttons) to toggle visibility of controls\n        if (_options.tapToToggleControls) {\n          if (_controlsVisible) {\n            ui.hideControls();\n          } else {\n            ui.showControls();\n          }\n        }\n\n        // tap to close gallery\n        if (_options.tapToClose && (framework.hasClass(target, 'pswp__img') || _hasCloseClass(target))) {\n          pswp.close();\n          return;\n        }\n      }\n    };\n    ui.onMouseOver = function (e) {\n      e = e || window.event;\n      var target = e.target || e.srcElement;\n\n      // add class when mouse is over an element that should close the gallery\n      _togglePswpClass(_controls, 'ui--over-close', _hasCloseClass(target));\n    };\n\n    ui.hideControls = function () {\n      framework.addClass(_controls, 'pswp__ui--hidden');\n      _controlsVisible = false;\n    };\n\n    ui.showControls = function () {\n      _controlsVisible = true;\n      if (!_overlayUIUpdated) {\n        ui.update();\n      }\n      framework.removeClass(_controls, 'pswp__ui--hidden');\n    };\n\n    ui.supportsFullscreen = function () {\n      var d = document;\n      return !!(d.exitFullscreen || d.mozCancelFullScreen || d.webkitExitFullscreen || d.msExitFullscreen);\n    };\n\n    ui.getFullscreenAPI = function () {\n      var dE = document.documentElement,\n          api,\n          tF = 'fullscreenchange';\n\n      if (dE.requestFullscreen) {\n        api = {\n          enterK: 'requestFullscreen',\n          exitK: 'exitFullscreen',\n          elementK: 'fullscreenElement',\n          eventK: tF\n        };\n      } else if (dE.mozRequestFullScreen) {\n        api = {\n          enterK: 'mozRequestFullScreen',\n          exitK: 'mozCancelFullScreen',\n          elementK: 'mozFullScreenElement',\n          eventK: 'moz' + tF\n        };\n      } else if (dE.webkitRequestFullscreen) {\n        api = {\n          enterK: 'webkitRequestFullscreen',\n          exitK: 'webkitExitFullscreen',\n          elementK: 'webkitFullscreenElement',\n          eventK: 'webkit' + tF\n        };\n      } else if (dE.msRequestFullscreen) {\n        api = {\n          enterK: 'msRequestFullscreen',\n          exitK: 'msExitFullscreen',\n          elementK: 'msFullscreenElement',\n          eventK: 'MSFullscreenChange'\n        };\n      }\n\n      if (api) {\n        api.enter = function () {\n          // disable close-on-scroll in fullscreen\n          _initalCloseOnScrollValue = _options.closeOnScroll;\n          _options.closeOnScroll = false;\n\n          if (this.enterK === 'webkitRequestFullscreen') {\n            pswp.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT);\n          } else {\n            return pswp.template[this.enterK]();\n          }\n        };\n        api.exit = function () {\n          _options.closeOnScroll = _initalCloseOnScrollValue;\n\n          return document[this.exitK]();\n        };\n        api.isFullscreen = function () {\n          return document[this.elementK];\n        };\n      }\n\n      return api;\n    };\n  };\n  return PhotoSwipeUI_Default;\n});\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// vue-photo-preview.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 67c0936c6225e9526aca","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.registry.npmjs.org/babel-runtime/6.26.0/node_modules/babel-runtime/regenerator/index.js\n// module id = 0\n// module chunks = 0","<template>\n\t<div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n\n        <!-- Background of PhotoSwipe.\n            It's a separate element as animating opacity is faster than rgba(). -->\n        <div class=\"pswp__bg\"></div>\n\n        <!-- Slides wrapper with overflow:hidden. -->\n        <div class=\"pswp__scroll-wrap\">\n\n            <!-- Container that holds slides.\n                PhotoSwipe keeps only 3 of them in the DOM to save memory.\n                Don't modify these 3 pswp__item elements, data is added later on. -->\n            <div class=\"pswp__container\">\n                <div class=\"pswp__item\"></div>\n                <div class=\"pswp__item\"></div>\n                <div class=\"pswp__item\"></div>\n            </div>\n\n            <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->\n            <div class=\"pswp__ui pswp__ui--hidden\">\n\n                <div class=\"pswp__top-bar\">\n\n                    <!--  Controls are self-explanatory. Order can be changed. -->\n\n                    <div class=\"pswp__counter\"></div>\n\n                    <button class=\"pswp__button pswp__button--close\" title=\"Close (Esc)\"></button>\n\n                    <button class=\"pswp__button pswp__button--share\" title=\"Share\"></button>\n\n                    <button class=\"pswp__button pswp__button--fs\" title=\"Toggle fullscreen\"></button>\n\n                    <button class=\"pswp__button pswp__button--zoom\" title=\"Zoom in/out\"></button>\n\n                    <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->\n                    <!-- element will get class pswp__preloader--active when preloader is running -->\n                    <div class=\"pswp__preloader\">\n                        <div class=\"pswp__preloader__icn\">\n                        <div class=\"pswp__preloader__cut\">\n                            <div class=\"pswp__preloader__donut\"></div>\n                        </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\">\n                    <div class=\"pswp__share-tooltip\"></div>\n                </div>\n\n                <button class=\"pswp__button pswp__button--arrow--left\" title=\"Previous (arrow left)\">\n                </button>\n\n                <button class=\"pswp__button pswp__button--arrow--right\" title=\"Next (arrow right)\">\n                </button>\n\n                <div class=\"pswp__caption\">\n                    <div class=\"pswp__caption__center\"></div>\n                </div>\n\n            </div>\n\n        </div>\n       </div>\n</template>\n\n<script>\n\timport './photoswipe.css'\n    import './default-skin/default-skin.css'\n    export default{\n\n    }\n\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/lib/preview.vue","import previewComponent from './preview.vue'\nimport PhotoSwipe from './photoswipe'\nimport PhotoSwipeUI_Default from './photoswipe-ui-default'\n\nlet $preview\nvar vuePhotoPreview = {\n  install(Vue, opts) {\n    const Preview = Vue.extend(previewComponent)\n    var opts = opts || {}\n    if (!$preview) {\n      $preview = new Preview({el: document.createElement('div')})\n      document.body.appendChild($preview.$el)\n    }\n    let eventName, eventCallback\n    Vue.prototype.$preview = {\n      self: null,\n      on: (name, callback) => {\n        eventName = name\n        eventCallback = callback\n      }\n    }\n    Vue.mixin({\n      data() {\n        return {\n          galleryElements: null,\n          galleryPicLoading: false\n        }\n      },\n      methods: {\n        $previewRefresh() {\n          setTimeout(() => {\n            this.galleryElements = document.querySelectorAll('img[preview]');\n            for (var i = 0, l = this.galleryElements.length; i < l; i++) {\n              this.galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n              this.galleryElements[i].onclick = this.onThumbnailsClick;\n            }\n          }, 200);\n\n        },\n        onThumbnailsClick(e) {\n          if (this.galleryPicLoading) return false;\n          this.galleryPicLoading = true\n          e = e || window.event;\n          e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n          var eTarget = e.target || e.srcElement;\n\n\n          var thumbElements;\n          var group = eTarget.getAttribute('preview')\n          if (group) {\n            thumbElements = document.querySelectorAll('img[preview=\"' + group + '\"]')\n          } else {\n            thumbElements = document.querySelectorAll('img[preview]')\n          }\n          var clickedGallery = thumbElements;\n\n          var index;\n\n          for (var i = 0; i < clickedGallery.length; i++) {\n            if (clickedGallery[i] === eTarget) {\n              index = i;\n              break;\n            }\n          }\n          if (index >= 0) {\n            this.openPhotoSwipe(index, clickedGallery);\n            this.$emit('preview-open', e, eTarget.src)\n          }\n          return false;\n        },\n        async openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n          var pswpElement = document.querySelectorAll('.pswp')[0],\n            gallery,\n            options;\n          var items = await this.parseThumbnailElements(galleryElement);\n          options = {\n\n            // galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n            getThumbBoundsFn: function (index) {\n              //在点开和关闭大图时调用，计算动画缩放效果需要的位置\n              var thumbnail = items[index].el,\n                pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n                rect = thumbnail.getBoundingClientRect();\n              return {\n                x: rect.left,\n                y: rect.top + pageYScroll,\n                w: rect.width\n              };\n\n            },\n\n            addCaptionHTMLFn: function (item, captionEl, isFake) {\n              if (!item.title) {\n                captionEl.children[0].innerText = '';\n                return false;\n              }\n              captionEl.children[0].innerHTML = item.title;\n              return true;\n            },\n            showHideOpacity: true,\n            history: false,\n            shareEl: false,\n            maxSpreadZoom: 3,\n            getDoubleTapZoom: function (isMouseClick, item) {\n              if (isMouseClick) {\n\n                return 1.5;\n\n              } else {\n                return item.initialZoomLevel < 0.7 ? 1 : 1.5;\n              }\n            }\n\n          };\n\n          if (fromURL) {\n            if (options.galleryPIDs) {\n              // parse real index when custom PIDs are used\n              // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n              for (var j = 0; j < items.length; j++) {\n                if (items[j].pid == index) {\n                  options.index = j;\n                  break;\n                }\n              }\n            } else {\n              options.index = parseInt(index, 10) - 1;\n            }\n          } else {\n            options.index = parseInt(index, 10);\n          }\n\n          // exit if index not found\n          if (isNaN(options.index)) {\n            return;\n          }\n          options = this.extend(options, opts)\n\n          if (disableAnimation) {\n            options.showAnimationDuration = 0;\n          }\n\n          // Pass data to PhotoSwipe and initialize it\n          gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n          Vue.prototype.$preview.self = gallery\n          // see: http://photoswipe.com/documentation/responsive-images.html\n          var realViewportWidth,\n            useLargeImages = false,\n            firstResize = true,\n            imageSrcWillChange;\n\n          gallery.listen('beforeResize', function () {\n\n            var dpiRatio = window.devicePixelRatio ? window.devicePixelRatio : 1;\n            dpiRatio = Math.min(dpiRatio, 2.5);\n            realViewportWidth = gallery.viewportSize.x * dpiRatio;\n\n            if (realViewportWidth >= 1200 || (!gallery.likelyTouchDevice && realViewportWidth > 800) || screen.width > 1200) {\n              if (!useLargeImages) {\n                useLargeImages = true;\n                imageSrcWillChange = true;\n              }\n\n            } else {\n              if (useLargeImages) {\n                useLargeImages = false;\n                imageSrcWillChange = true;\n              }\n            }\n\n            if (imageSrcWillChange && !firstResize) {\n              gallery.invalidateCurrItems();\n            }\n\n            if (firstResize) {\n              firstResize = false;\n            }\n\n            imageSrcWillChange = false;\n\n          });\n          let loadingTag = {};\n          gallery.listen('gettingData', async (index, item) => {\n            //避免在本次调整中多次调用事件\n            if (loadingTag[index]) {\n              //console.log(\"多次调用，等待.\");\n              await loadingTag[index];\n              loadingTag[index] = null;\n              //console.log(\"多次调用，等待完毕.\");\n              return;\n            }\n            let currIndex = index,\n              items = gallery.items;\n            if (item.o.w === 0x3f3f3f3f) {\n              let l = new Image();\n              //console.log(item.src);\n              loadingTag[index] = new Promise((resolve) => {\n                l.src = item.src;\n                l.onload = () => {\n                  // let scale=l.height/l.width;\n                  // item.o.w=item.m.w=item.w=Math.max(l.width,item.rw);\n                  item.o.w = item.m.w = l.width;\n                  // item.o.h=item.m.h=item.h=scale*item.w;\n                  item.o.h = item.m.h = l.height;\n                  resolve();\n                }\n              });\n              await loadingTag[index];\n              if (item.el.getAttribute('large')) {\n                item.src = item.o.src;\n                item.w = item.o.w;\n                item.h = item.o.h;\n              } else {\n                item.src = item.m.src;\n                item.w = item.m.w;\n                item.h = item.m.h;\n              }\n              // gallery.invalidateCurrItems();\n              // gallery.updateSize(true);\n              //console.log(\"after: \", index, [item.w, item.h]);\n              loadingTag[index] = null;\n            }\n          });\n          gallery.listen('imageLoadComplete', (index, ITEM) => {\n            this.galleryPicLoading = false\n          });\n          gallery.listen(eventName, eventCallback)\n          gallery.init();\n          $preview.$el.classList = $preview.$el.classList + ' pswp--zoom-allowed'\n        },\n        parseThumbnailElements(thumbElements) {\n          return new Promise(resolve => {\n            var items = new Array(thumbElements.length),\n              el,\n              load = 0,\n              item;\n            item = {}\n            let count = 0\n            for (var i = 0; i < thumbElements.length; i++) {\n              el = thumbElements[i];\n\n              // include only element nodes\n              if (el.nodeType !== 1) {\n                continue;\n              }\n\n\n              getImage(i)\n\n              function getImage(index) {\n                if (typeof el.naturalWidth == \"undefined\") {　　 // IE 6/7/8\n                  let i = new Image();\n                  i.src = el.src;\n                  var rw = i.width;\n                  var rh = i.height;\n                } else {　　 // HTML5 browsers\n                  //使用缩略图的宽高作为实际宽高\n                  var rw = el.naturalWidth;\n                  var rh = el.naturalHeight;\n                }\n                var l = {};\n                l.src = el.getAttribute('large') ? el.getAttribute('large') : el.getAttribute('src')\n                l.text = el.getAttribute('preview-text')\n                l.author = el.getAttribute('data-author')\n\n                item = {\n                  title: l.text,\n                  el: thumbElements[index],\n                  src: l.src,\n                  w: rw,\n                  h: rh,\n                  rw,\n                  rh,\n                  author: l.author,\n                  o: {\n                    src: l.src,\n                    w: 0x3f3f3f3f,\n                    h: 0x3f3f3f3f,\n                  },\n                  m: {\n                    src: l.src,\n                    w: 0x3f3f3f3f,\n                    h: 0x3f3f3f3f,\n                  }\n                };\n                items[index] = item\n                count++\n                if (count === thumbElements.length) {\n                  resolve(items)\n                }\n              }\n\n            }\n          })\n\n        },\n        extend(o1, o2) {\n          for (var prop in o2) {\n            o1[prop] = o2[prop];\n          }\n          return o1\n        },\n        initPreview(gallerySelector) {\n          this.galleryElements = document.querySelectorAll(gallerySelector);\n          for (var i = 0, l = this.galleryElements.length; i < l; i++) {\n            this.galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n            this.galleryElements[i].onclick = this.onThumbnailsClick;\n          }\n\n        }\n      },\n      mounted: function () {\n        this.initPreview('img[preview]')\n\n      }\n    })\n\n  }\n}\n\nexport default vuePhotoPreview\n\nif (typeof window !== 'undefined' && !window.vuePhotoPreview) {\n  window.vuePhotoPreview = vuePhotoPreview;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/index.js","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() { return this })() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.registry.npmjs.org/regenerator-runtime/0.11.1/node_modules/regenerator-runtime/runtime-module.js\n// module id = 3\n// module chunks = 0","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() { return this })() || Function(\"return this\")()\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.registry.npmjs.org/regenerator-runtime/0.11.1/node_modules/regenerator-runtime/runtime.js\n// module id = 4\n// module chunks = 0","var normalizeComponent = require(\"!../../node_modules/.registry.npmjs.org/vue-loader/13.7.3/node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/.registry.npmjs.org/vue-loader/13.7.3/node_modules/vue-loader/lib/selector?type=script&index=0!./preview.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/.registry.npmjs.org/vue-loader/13.7.3/node_modules/vue-loader/lib/selector?type=script&index=0!./preview.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/.registry.npmjs.org/vue-loader/13.7.3/node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-321b1d0a\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/.registry.npmjs.org/vue-loader/13.7.3/node_modules/vue-loader/lib/selector?type=template&index=0!./preview.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/preview.vue\n// module id = 5\n// module chunks = 0","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file.\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.registry.npmjs.org/vue-loader/13.7.3/node_modules/vue-loader/lib/component-normalizer.js\n// module id = 6\n// module chunks = 0","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pswp\",attrs:{\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"pswp__bg\"}),_vm._v(\" \"),_c('div',{staticClass:\"pswp__scroll-wrap\"},[_c('div',{staticClass:\"pswp__container\"},[_c('div',{staticClass:\"pswp__item\"}),_vm._v(\" \"),_c('div',{staticClass:\"pswp__item\"}),_vm._v(\" \"),_c('div',{staticClass:\"pswp__item\"})]),_vm._v(\" \"),_c('div',{staticClass:\"pswp__ui pswp__ui--hidden\"},[_c('div',{staticClass:\"pswp__top-bar\"},[_c('div',{staticClass:\"pswp__counter\"}),_vm._v(\" \"),_c('button',{staticClass:\"pswp__button pswp__button--close\",attrs:{\"title\":\"Close (Esc)\"}}),_vm._v(\" \"),_c('button',{staticClass:\"pswp__button pswp__button--share\",attrs:{\"title\":\"Share\"}}),_vm._v(\" \"),_c('button',{staticClass:\"pswp__button pswp__button--fs\",attrs:{\"title\":\"Toggle fullscreen\"}}),_vm._v(\" \"),_c('button',{staticClass:\"pswp__button pswp__button--zoom\",attrs:{\"title\":\"Zoom in/out\"}}),_vm._v(\" \"),_c('div',{staticClass:\"pswp__preloader\"},[_c('div',{staticClass:\"pswp__preloader__icn\"},[_c('div',{staticClass:\"pswp__preloader__cut\"},[_c('div',{staticClass:\"pswp__preloader__donut\"})])])])]),_vm._v(\" \"),_c('div',{staticClass:\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\"},[_c('div',{staticClass:\"pswp__share-tooltip\"})]),_vm._v(\" \"),_c('button',{staticClass:\"pswp__button pswp__button--arrow--left\",attrs:{\"title\":\"Previous (arrow left)\"}}),_vm._v(\" \"),_c('button',{staticClass:\"pswp__button pswp__button--arrow--right\",attrs:{\"title\":\"Next (arrow right)\"}}),_vm._v(\" \"),_c('div',{staticClass:\"pswp__caption\"},[_c('div',{staticClass:\"pswp__caption__center\"})])])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.registry.npmjs.org/vue-loader/13.7.3/node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-321b1d0a\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/.registry.npmjs.org/vue-loader/13.7.3/node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/lib/preview.vue\n// module id = 9\n// module chunks = 0","'use strict';\nvar PhotoSwipe = function (template, UiClass, items, options) {\n\n  /*>>framework-bridge*/\n  /**\n   *\n   * Set of generic functions used by gallery.\n   *\n   * You're free to modify anything here as long as functionality is kept.\n   *\n   */\n  var framework = {\n    features: null,\n    bind: function (target, type, listener, unbind) {\n      var methodName = (unbind ? 'remove' : 'add') + 'EventListener';\n      type = type.split(' ');\n      for (var i = 0; i < type.length; i++) {\n        if (type[i]) {\n          target[methodName](type[i], listener, false);\n        }\n      }\n    },\n    isArray: function (obj) {\n      return (obj instanceof Array);\n    },\n    createEl: function (classes, tag) {\n      var el = document.createElement(tag || 'div');\n      if (classes) {\n        el.className = classes;\n      }\n      return el;\n    },\n    getScrollY: function () {\n      var yOffset = window.pageYOffset;\n      return yOffset !== undefined ? yOffset : document.documentElement.scrollTop;\n    },\n    unbind: function (target, type, listener) {\n      framework.bind(target, type, listener, true);\n    },\n    removeClass: function (el, className) {\n      var reg = new RegExp('(\\\\s|^)' + className + '(\\\\s|$)');\n      el.className = el.className.replace(reg, ' ').replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n    },\n    addClass: function (el, className) {\n      if (!framework.hasClass(el, className)) {\n        el.className += (el.className ? ' ' : '') + className;\n      }\n    },\n    hasClass: function (el, className) {\n      return el.className && new RegExp('(^|\\\\s)' + className + '(\\\\s|$)').test(el.className);\n    },\n    getChildByClass: function (parentEl, childClassName) {\n      var node = parentEl.firstChild;\n      while (node) {\n        if (framework.hasClass(node, childClassName)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    },\n    arraySearch: function (array, value, key) {\n      var i = array.length;\n      while (i--) {\n        if (array[i][key] === value) {\n          return i;\n        }\n      }\n      return -1;\n    },\n    extend: function (o1, o2, preventOverwrite) {\n      for (var prop in o2) {\n        if (o2.hasOwnProperty(prop)) {\n          if (preventOverwrite && o1.hasOwnProperty(prop)) {\n            continue;\n          }\n          o1[prop] = o2[prop];\n        }\n      }\n    },\n    easing: {\n      sine: {\n        out: function (k) {\n          return Math.sin(k * (Math.PI / 2));\n        },\n        inOut: function (k) {\n          return -(Math.cos(Math.PI * k) - 1) / 2;\n        }\n      },\n      cubic: {\n        out: function (k) {\n          return --k * k * k + 1;\n        }\n      }\n      /*\n  elastic: {\n      out: function ( k ) {\n\n          var s, a = 0.1, p = 0.4;\n          if ( k === 0 ) return 0;\n          if ( k === 1 ) return 1;\n          if ( !a || a < 1 ) { a = 1; s = p / 4; }\n          else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n          return ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );\n\n      },\n  },\n  back: {\n      out: function ( k ) {\n          var s = 1.70158;\n          return --k * k * ( ( s + 1 ) * k + s ) + 1;\n      }\n  }\n*/\n    },\n\n    /**\n     *\n     * @return {object}\n     *\n     * {\n\t *  raf : request animation frame function\n\t *  caf : cancel animation frame function\n\t *  transfrom : transform property key (with vendor), or null if not supported\n\t *  oldIE : IE8 or below\n\t * }\n     *\n     */\n    detectFeatures: function () {\n      if (framework.features) {\n        return framework.features;\n      }\n      var helperEl = framework.createEl(),\n        helperStyle = helperEl.style,\n        vendor = '',\n        features = {};\n\n      // IE8 and below\n      features.oldIE = document.all && !document.addEventListener;\n\n      features.touch = 'ontouchstart' in window;\n\n      if (window.requestAnimationFrame) {\n        features.raf = window.requestAnimationFrame;\n        features.caf = window.cancelAnimationFrame;\n      }\n\n      features.pointerEvent = !!(window.PointerEvent) || navigator.msPointerEnabled;\n\n      // fix false-positive detection of old Android in new IE\n      // (IE11 ua string contains \"Android 4.0\")\n\n      if (!features.pointerEvent) {\n\n        var ua = navigator.userAgent;\n\n        // Detect if device is iPhone or iPod and if it's older than iOS 8\n        // http://stackoverflow.com/a/14223920\n        //\n        // This detection is made because of buggy top/bottom toolbars\n        // that don't trigger window.resize event.\n        // For more info refer to _isFixedPosition variable in core.js\n\n        if (/iP(hone|od)/.test(navigator.platform)) {\n          var v = (navigator.appVersion).match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n          if (v && v.length > 0) {\n            v = parseInt(v[1], 10);\n            if (v >= 1 && v < 8) {\n              features.isOldIOSPhone = true;\n            }\n          }\n        }\n\n        // Detect old Android (before KitKat)\n        // due to bugs related to position:fixed\n        // http://stackoverflow.com/questions/7184573/pick-up-the-android-version-in-the-browser-by-javascript\n\n        var match = ua.match(/Android\\s([0-9\\.]*)/);\n        var androidversion = match ? match[1] : 0;\n        androidversion = parseFloat(androidversion);\n        if (androidversion >= 1) {\n          if (androidversion < 4.4) {\n            features.isOldAndroid = true; // for fixed position bug & performance\n          }\n          features.androidVersion = androidversion; // for touchend bug\n        }\n        features.isMobileOpera = /opera mini|opera mobi/i.test(ua);\n\n        // p.s. yes, yes, UA sniffing is bad, propose your solution for above bugs.\n      }\n\n      var styleChecks = ['transform', 'perspective', 'animationName'],\n        vendors = ['', 'webkit', 'Moz', 'ms', 'O'],\n        styleCheckItem,\n        styleName;\n\n      for (var i = 0; i < 4; i++) {\n        vendor = vendors[i];\n\n        for (var a = 0; a < 3; a++) {\n          styleCheckItem = styleChecks[a];\n\n          // uppercase first letter of property name, if vendor is present\n          styleName = vendor + (vendor ?\n            styleCheckItem.charAt(0).toUpperCase() + styleCheckItem.slice(1) :\n            styleCheckItem);\n\n          if (!features[styleCheckItem] && styleName in helperStyle) {\n            features[styleCheckItem] = styleName;\n          }\n        }\n\n        if (vendor && !features.raf) {\n          vendor = vendor.toLowerCase();\n          features.raf = window[vendor + 'RequestAnimationFrame'];\n          if (features.raf) {\n            features.caf = window[vendor + 'CancelAnimationFrame'] ||\n              window[vendor + 'CancelRequestAnimationFrame'];\n          }\n        }\n      }\n\n      if (!features.raf) {\n        var lastTime = 0;\n        features.raf = function (fn) {\n          var currTime = new Date().getTime();\n          var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n          var id = window.setTimeout(function () {\n            fn(currTime + timeToCall);\n          }, timeToCall);\n          lastTime = currTime + timeToCall;\n          return id;\n        };\n        features.caf = function (id) {\n          clearTimeout(id);\n        };\n      }\n\n      // Detect SVG support\n      features.svg = !!document.createElementNS &&\n        !!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;\n\n      framework.features = features;\n\n      return features;\n    }\n  };\n\n  framework.detectFeatures();\n\n// Override addEventListener for old versions of IE\n  if (framework.features.oldIE) {\n\n    framework.bind = function (target, type, listener, unbind) {\n\n      type = type.split(' ');\n\n      var methodName = (unbind ? 'detach' : 'attach') + 'Event',\n        evName,\n        _handleEv = function () {\n          listener.handleEvent.call(listener);\n        };\n\n      for (var i = 0; i < type.length; i++) {\n        evName = type[i];\n        if (evName) {\n\n          if (typeof listener === 'object' && listener.handleEvent) {\n            if (!unbind) {\n              listener['oldIE' + evName] = _handleEv;\n            } else {\n              if (!listener['oldIE' + evName]) {\n                return false;\n              }\n            }\n\n            target[methodName]('on' + evName, listener['oldIE' + evName]);\n          } else {\n            target[methodName]('on' + evName, listener);\n          }\n\n        }\n      }\n    };\n\n  }\n\n  /*>>framework-bridge*/\n\n  /*>>core*/\n//function(template, UiClass, items, options)\n\n  var self = this;\n\n  /**\n   * Static vars, don't change unless you know what you're doing.\n   */\n  var DOUBLE_TAP_RADIUS = 25,\n    NUM_HOLDERS = 3;\n\n  /**\n   * Options\n   */\n  var _options = {\n    allowPanToNext: true,\n    spacing: 0.12,\n    bgOpacity: 1,\n    mouseUsed: false,\n    loop: true,\n    pinchToClose: true,\n    closeOnScroll: true,\n    closeOnVerticalDrag: true,\n    verticalDragRange: 0.75,\n    hideAnimationDuration: 333,\n    showAnimationDuration: 333,\n    showHideOpacity: false,\n    focus: true,\n    escKey: true,\n    arrowKeys: true,\n    mainScrollEndFriction: 0.35,\n    panEndFriction: 0.35,\n    isClickableElement: function (el) {\n      return el.tagName === 'A';\n    },\n    getDoubleTapZoom: function (isMouseClick, item) {\n      if (isMouseClick) {\n        return 1;\n      } else {\n        return item.initialZoomLevel < 0.7 ? 1 : 1.33;\n      }\n    },\n    maxSpreadZoom: 1.33,\n    modal: true,\n\n    // not fully implemented yet\n    scaleMode: 'fit' // TODO\n  };\n  framework.extend(_options, options);\n\n\n  /**\n   * Private helper variables & functions\n   */\n\n  var _getEmptyPoint = function () {\n    return {x: 0, y: 0};\n  };\n\n  var _isOpen,\n    _isDestroying,\n    _closedByScroll,\n    _currentItemIndex,\n    _containerStyle,\n    _containerShiftIndex,\n    _currPanDist = _getEmptyPoint(),\n    _startPanOffset = _getEmptyPoint(),\n    _panOffset = _getEmptyPoint(),\n    _upMoveEvents, // drag move, drag end & drag cancel events array\n    _downEvents, // drag start events array\n    _globalEventHandlers,\n    _viewportSize = {},\n    _currZoomLevel,\n    _startZoomLevel,\n    _translatePrefix,\n    _translateSufix,\n    _updateSizeInterval,\n    _itemsNeedUpdate,\n    _currPositionIndex = 0,\n    _offset = {},\n    _slideSize = _getEmptyPoint(), // size of slide area, including spacing\n    _itemHolders,\n    _prevItemIndex,\n    _indexDiff = 0, // difference of indexes since last content update\n    _dragStartEvent,\n    _dragMoveEvent,\n    _dragEndEvent,\n    _dragCancelEvent,\n    _transformKey,\n    _pointerEventEnabled,\n    _isFixedPosition = true,\n    _likelyTouchDevice,\n    _modules = [],\n    _requestAF,\n    _cancelAF,\n    _initalClassName,\n    _initalWindowScrollY,\n    _oldIE,\n    _currentWindowScrollY,\n    _features,\n    _windowVisibleSize = {},\n    _renderMaxResolution = false,\n    _orientationChangeTimeout,\n\n\n    // Registers PhotoSWipe module (History, Controller ...)\n    _registerModule = function (name, module) {\n      framework.extend(self, module.publicMethods);\n      _modules.push(name);\n    },\n\n    _getLoopedId = function (index) {\n      var numSlides = _getNumItems();\n      if (index > numSlides - 1) {\n        return index - numSlides;\n      } else if (index < 0) {\n        return numSlides + index;\n      }\n      return index;\n    },\n\n    // Micro bind/trigger\n    _listeners = {},\n    _listen = function (name, fn) {\n      if (!_listeners[name]) {\n        _listeners[name] = [];\n      }\n      return _listeners[name].push(fn);\n    },\n    _shout = function (name) {\n      var listeners = _listeners[name];\n\n      if (listeners) {\n        var args = Array.prototype.slice.call(arguments);\n        args.shift();\n\n        for (var i = 0; i < listeners.length; i++) {\n          listeners[i].apply(self, args);\n        }\n      }\n    },\n    _shoutAsync = async function (name) {\n      var listeners = _listeners[name];\n\n      if (listeners) {\n        var args = Array.prototype.slice.call(arguments);\n        args.shift();\n        const p = [];\n        for (var i = 0; i < listeners.length; i++) {\n          p.push(listeners[i].apply(self, args));\n        }\n        return Promise.all(p);\n      }\n    },\n\n    _getCurrentTime = function () {\n      return new Date().getTime();\n    },\n    _applyBgOpacity = function (opacity) {\n      _bgOpacity = opacity;\n      self.bg.style.opacity = opacity * _options.bgOpacity;\n    },\n\n    _applyZoomTransform = function (styleObj, x, y, zoom, item) {\n      if (!_renderMaxResolution || (item && item !== self.currItem)) {\n        zoom = zoom / (item ? item.fitRatio : self.currItem.fitRatio);\n      }\n\n      styleObj[_transformKey] = _translatePrefix + x + 'px, ' + y + 'px' + _translateSufix + ' scale(' + zoom + ')';\n    },\n    _applyCurrentZoomPan = function (allowRenderResolution) {\n      if (_currZoomElementStyle) {\n\n        if (allowRenderResolution) {\n          if (_currZoomLevel > self.currItem.fitRatio) {\n            if (!_renderMaxResolution) {\n              _setImageSize(self.currItem, false, true);\n              _renderMaxResolution = true;\n            }\n          } else {\n            if (_renderMaxResolution) {\n              _setImageSize(self.currItem);\n              _renderMaxResolution = false;\n            }\n          }\n        }\n\n\n        _applyZoomTransform(_currZoomElementStyle, _panOffset.x, _panOffset.y, _currZoomLevel);\n      }\n    },\n    _applyZoomPanToItem = function (item) {\n      if (item.container) {\n\n        _applyZoomTransform(item.container.style,\n          item.initialPosition.x,\n          item.initialPosition.y,\n          item.initialZoomLevel,\n          item);\n      }\n    },\n    _setTranslateX = function (x, elStyle) {\n      elStyle[_transformKey] = _translatePrefix + x + 'px, 0px' + _translateSufix;\n    },\n    _moveMainScroll = function (x, dragging) {\n\n      if (!_options.loop && dragging) {\n        var newSlideIndexOffset = _currentItemIndex + (_slideSize.x * _currPositionIndex - x) / _slideSize.x,\n          delta = Math.round(x - _mainScrollPos.x);\n\n        if ((newSlideIndexOffset < 0 && delta > 0) ||\n          (newSlideIndexOffset >= _getNumItems() - 1 && delta < 0)) {\n          x = _mainScrollPos.x + delta * _options.mainScrollEndFriction;\n        }\n      }\n\n      _mainScrollPos.x = x;\n      _setTranslateX(x, _containerStyle);\n    },\n    _calculatePanOffset = function (axis, zoomLevel) {\n      var m = _midZoomPoint[axis] - _offset[axis];\n      return _startPanOffset[axis] + _currPanDist[axis] + m - m * (zoomLevel / _startZoomLevel);\n    },\n\n    _equalizePoints = function (p1, p2) {\n      p1.x = p2.x;\n      p1.y = p2.y;\n      if (p2.id) {\n        p1.id = p2.id;\n      }\n    },\n    _roundPoint = function (p) {\n      p.x = Math.round(p.x);\n      p.y = Math.round(p.y);\n    },\n\n    _mouseMoveTimeout = null,\n    _onFirstMouseMove = function () {\n      // Wait until mouse move event is fired at least twice during 100ms\n      // We do this, because some mobile browsers trigger it on touchstart\n      if (_mouseMoveTimeout) {\n        framework.unbind(document, 'mousemove', _onFirstMouseMove);\n        framework.addClass(template, 'pswp--has_mouse');\n        _options.mouseUsed = true;\n        _shout('mouseUsed');\n      }\n      _mouseMoveTimeout = setTimeout(function () {\n        _mouseMoveTimeout = null;\n      }, 100);\n    },\n\n    _bindEvents = function () {\n      framework.bind(document, 'keydown', self);\n\n      if (_features.transform) {\n        // don't bind click event in browsers that don't support transform (mostly IE8)\n        framework.bind(self.scrollWrap, 'click', self);\n      }\n\n\n      if (!_options.mouseUsed) {\n        framework.bind(document, 'mousemove', _onFirstMouseMove);\n      }\n\n      framework.bind(window, 'resize scroll orientationchange', self);\n\n      _shout('bindEvents');\n    },\n\n    _unbindEvents = function () {\n      framework.unbind(window, 'resize scroll orientationchange', self);\n      framework.unbind(window, 'scroll', _globalEventHandlers.scroll);\n      framework.unbind(document, 'keydown', self);\n      framework.unbind(document, 'mousemove', _onFirstMouseMove);\n\n      if (_features.transform) {\n        framework.unbind(self.scrollWrap, 'click', self);\n      }\n\n      if (_isDragging) {\n        framework.unbind(window, _upMoveEvents, self);\n      }\n\n      clearTimeout(_orientationChangeTimeout);\n\n      _shout('unbindEvents');\n    },\n\n    _calculatePanBounds = function (zoomLevel, update) {\n      var bounds = _calculateItemSize(self.currItem, _viewportSize, zoomLevel);\n      if (update) {\n        _currPanBounds = bounds;\n      }\n      return bounds;\n    },\n\n    _getMinZoomLevel = function (item) {\n      if (!item) {\n        item = self.currItem;\n      }\n      return item.initialZoomLevel;\n    },\n    _getMaxZoomLevel = function (item) {\n      if (!item) {\n        item = self.currItem;\n      }\n      return item.w > 0 ? _options.maxSpreadZoom : 1;\n    },\n\n    // Return true if offset is out of the bounds\n    _modifyDestPanOffset = function (axis, destPanBounds, destPanOffset, destZoomLevel) {\n      if (destZoomLevel === self.currItem.initialZoomLevel) {\n        destPanOffset[axis] = self.currItem.initialPosition[axis];\n        return true;\n      } else {\n        destPanOffset[axis] = _calculatePanOffset(axis, destZoomLevel);\n\n        if (destPanOffset[axis] > destPanBounds.min[axis]) {\n          destPanOffset[axis] = destPanBounds.min[axis];\n          return true;\n        } else if (destPanOffset[axis] < destPanBounds.max[axis]) {\n          destPanOffset[axis] = destPanBounds.max[axis];\n          return true;\n        }\n      }\n      return false;\n    },\n\n    _setupTransforms = function () {\n\n      if (_transformKey) {\n        // setup 3d transforms\n        var allow3dTransform = _features.perspective && !_likelyTouchDevice;\n        _translatePrefix = 'translate' + (allow3dTransform ? '3d(' : '(');\n        _translateSufix = _features.perspective ? ', 0px)' : ')';\n        return;\n      }\n\n      // Override zoom/pan/move functions in case old browser is used (most likely IE)\n      // (so they use left/top/width/height, instead of CSS transform)\n\n      _transformKey = 'left';\n      framework.addClass(template, 'pswp--ie');\n\n      _setTranslateX = function (x, elStyle) {\n        elStyle.left = x + 'px';\n      };\n      _applyZoomPanToItem = function (item) {\n\n        var zoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\n          s = item.container.style,\n          w = zoomRatio * item.w,\n          h = zoomRatio * item.h;\n\n        s.width = w + 'px';\n        s.height = h + 'px';\n        s.left = item.initialPosition.x + 'px';\n        s.top = item.initialPosition.y + 'px';\n\n      };\n      _applyCurrentZoomPan = function () {\n        if (_currZoomElementStyle) {\n\n          var s = _currZoomElementStyle,\n            item = self.currItem,\n            zoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\n            w = zoomRatio * item.w,\n            h = zoomRatio * item.h;\n\n          s.width = w + 'px';\n          s.height = h + 'px';\n\n\n          s.left = _panOffset.x + 'px';\n          s.top = _panOffset.y + 'px';\n        }\n\n      };\n    },\n\n    _onKeyDown = function (e) {\n      var keydownAction = '';\n      if (_options.escKey && e.keyCode === 27) {\n        keydownAction = 'close';\n      } else if (_options.arrowKeys) {\n        if (e.keyCode === 37) {\n          keydownAction = 'prev';\n        } else if (e.keyCode === 39) {\n          keydownAction = 'next';\n        }\n      }\n\n      if (keydownAction) {\n        // don't do anything if special key pressed to prevent from overriding default browser actions\n        // e.g. in Chrome on Mac cmd+arrow-left returns to previous page\n        if (!e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey) {\n          if (e.preventDefault) {\n            e.preventDefault();\n          } else {\n            e.returnValue = false;\n          }\n          self[keydownAction]();\n        }\n      }\n    },\n\n    _onGlobalClick = function (e) {\n      if (!e) {\n        return;\n      }\n\n      // don't allow click event to pass through when triggering after drag or some other gesture\n      if (_moved || _zoomStarted || _mainScrollAnimating || _verticalDragInitiated) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    },\n\n    _updatePageScrollOffset = function () {\n      self.setScrollOffset(0, framework.getScrollY());\n    };\n\n\n// Micro animation engine\n  var _animations = {},\n    _numAnimations = 0,\n    _stopAnimation = function (name) {\n      if (_animations[name]) {\n        if (_animations[name].raf) {\n          _cancelAF(_animations[name].raf);\n        }\n        _numAnimations--;\n        delete _animations[name];\n      }\n    },\n    _registerStartAnimation = function (name) {\n      if (_animations[name]) {\n        _stopAnimation(name);\n      }\n      if (!_animations[name]) {\n        _numAnimations++;\n        _animations[name] = {};\n      }\n    },\n    _stopAllAnimations = function () {\n      for (var prop in _animations) {\n\n        if (_animations.hasOwnProperty(prop)) {\n          _stopAnimation(prop);\n        }\n\n      }\n    },\n    _animateProp = function (name, b, endProp, d, easingFn, onUpdate, onComplete) {\n      var startAnimTime = _getCurrentTime(), t;\n      _registerStartAnimation(name);\n\n      var animloop = function () {\n        if (_animations[name]) {\n\n          t = _getCurrentTime() - startAnimTime; // time diff\n          //b - beginning (start prop)\n          //d - anim duration\n\n          if (t >= d) {\n            _stopAnimation(name);\n            onUpdate(endProp);\n            if (onComplete) {\n              onComplete();\n            }\n            return;\n          }\n          onUpdate((endProp - b) * easingFn(t / d) + b);\n\n          _animations[name].raf = _requestAF(animloop);\n        }\n      };\n      animloop();\n    },\n    _animatePropAsync = async function (name, b, endProp, d, easingFn, onUpdate, onComplete) {\n      var startAnimTime = _getCurrentTime(), t;\n      _registerStartAnimation(name);\n\n      var animloop = async function () {\n        if (_animations[name]) {\n\n          t = _getCurrentTime() - startAnimTime; // time diff\n          //b - beginning (start prop)\n          //d - anim duration\n\n          if (t >= d) {\n            _stopAnimation(name);\n            await onUpdate(endProp);\n            if (onComplete) {\n              await onComplete();\n            }\n            return;\n          }\n          await onUpdate((endProp - b) * easingFn(t / d) + b);\n\n          _animations[name].raf = _requestAF(animloop);\n        }\n      };\n      await animloop();\n    };\n\n\n  var publicMethods = {\n\n    // make a few local variables and functions public\n    shout: _shout,\n    listen: _listen,\n    viewportSize: _viewportSize,\n    options: _options,\n\n    isMainScrollAnimating: function () {\n      return _mainScrollAnimating;\n    },\n    getZoomLevel: function () {\n      return _currZoomLevel;\n    },\n    getCurrentIndex: function () {\n      return _currentItemIndex;\n    },\n    isDragging: function () {\n      return _isDragging;\n    },\n    isZooming: function () {\n      return _isZooming;\n    },\n    setScrollOffset: function (x, y) {\n      _offset.x = x;\n      _currentWindowScrollY = _offset.y = y;\n      _shout('updateScrollOffset', _offset);\n    },\n    applyZoomPan: function (zoomLevel, panX, panY, allowRenderResolution) {\n      _panOffset.x = panX;\n      _panOffset.y = panY;\n      _currZoomLevel = zoomLevel;\n      _applyCurrentZoomPan(allowRenderResolution);\n    },\n\n    init: function () {\n\n      if (_isOpen || _isDestroying) {\n        return;\n      }\n\n      var i;\n\n      self.framework = framework; // basic functionality\n      self.template = template; // root DOM element of PhotoSwipe\n      self.bg = framework.getChildByClass(template, 'pswp__bg');\n\n      _initalClassName = template.className;\n      _isOpen = true;\n\n      _features = framework.detectFeatures();\n      _requestAF = _features.raf;\n      _cancelAF = _features.caf;\n      _transformKey = _features.transform;\n      _oldIE = _features.oldIE;\n\n      self.scrollWrap = framework.getChildByClass(template, 'pswp__scroll-wrap');\n      self.container = framework.getChildByClass(self.scrollWrap, 'pswp__container');\n\n      _containerStyle = self.container.style; // for fast access\n\n      // Objects that hold slides (there are only 3 in DOM)\n      self.itemHolders = _itemHolders = [\n        {el: self.container.children[0], wrap: 0, index: -1},\n        {el: self.container.children[1], wrap: 0, index: -1},\n        {el: self.container.children[2], wrap: 0, index: -1}\n      ];\n\n      // hide nearby item holders until initial zoom animation finishes (to avoid extra Paints)\n      _itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'none';\n\n      _setupTransforms();\n\n      // Setup global events\n      _globalEventHandlers = {\n        resize: self.updateSize,\n\n        // Fixes: iOS 10.3 resize event\n        // does not update scrollWrap.clientWidth instantly after resize\n        // https://github.com/dimsemenov/PhotoSwipe/issues/1315\n        orientationchange: function () {\n          clearTimeout(_orientationChangeTimeout);\n          _orientationChangeTimeout = setTimeout(function () {\n            if (_viewportSize.x !== self.scrollWrap.clientWidth) {\n              self.updateSize();\n            }\n          }, 500);\n        },\n        scroll: _updatePageScrollOffset,\n        keydown: _onKeyDown,\n        click: _onGlobalClick\n      };\n\n      // disable show/hide effects on old browsers that don't support CSS animations or transforms,\n      // old IOS, Android and Opera mobile. Blackberry seems to work fine, even older models.\n      var oldPhone = _features.isOldIOSPhone || _features.isOldAndroid || _features.isMobileOpera;\n      if (!_features.animationName || !_features.transform || oldPhone) {\n        _options.showAnimationDuration = _options.hideAnimationDuration = 0;\n      }\n\n      // init modules\n      for (i = 0; i < _modules.length; i++) {\n        self['init' + _modules[i]]();\n      }\n\n      // init\n      if (UiClass) {\n        var ui = self.ui = new UiClass(self, framework);\n        ui.init();\n      }\n\n      _shout('firstUpdate');\n      _currentItemIndex = _currentItemIndex || _options.index || 0;\n      // validate index\n      if (isNaN(_currentItemIndex) || _currentItemIndex < 0 || _currentItemIndex >= _getNumItems()) {\n        _currentItemIndex = 0;\n      }\n      self.currItem = _getItemAt(_currentItemIndex);\n\n\n      if (_features.isOldIOSPhone || _features.isOldAndroid) {\n        _isFixedPosition = false;\n      }\n\n      template.setAttribute('aria-hidden', 'false');\n      if (_options.modal) {\n        if (!_isFixedPosition) {\n          template.style.position = 'absolute';\n          template.style.top = framework.getScrollY() + 'px';\n        } else {\n          template.style.position = 'fixed';\n        }\n      }\n\n      if (_currentWindowScrollY === undefined) {\n        _shout('initialLayout');\n        _currentWindowScrollY = _initalWindowScrollY = framework.getScrollY();\n      }\n\n      // add classes to root element of PhotoSwipe\n      var rootClasses = 'pswp--open ';\n      if (_options.mainClass) {\n        rootClasses += _options.mainClass + ' ';\n      }\n      if (_options.showHideOpacity) {\n        rootClasses += 'pswp--animate_opacity ';\n      }\n      rootClasses += _likelyTouchDevice ? 'pswp--touch' : 'pswp--notouch';\n      rootClasses += _features.animationName ? ' pswp--css_animation' : '';\n      rootClasses += _features.svg ? ' pswp--svg' : '';\n      framework.addClass(template, rootClasses);\n\n      self.updateSize();\n\n      // initial update\n      _containerShiftIndex = -1;\n      _indexDiff = null;\n      for (i = 0; i < NUM_HOLDERS; i++) {\n        _setTranslateX((i + _containerShiftIndex) * _slideSize.x, _itemHolders[i].el.style);\n      }\n\n      if (!_oldIE) {\n        framework.bind(self.scrollWrap, _downEvents, self); // no dragging for old IE\n      }\n\n      _listen('initialZoomInEnd', async function () {\n        await self.setContentAsync(_itemHolders[0], _currentItemIndex - 1);\n        await self.setContentAsync(_itemHolders[2], _currentItemIndex + 1);\n\n        _itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'block';\n\n        if (_options.focus) {\n          // focus causes layout,\n          // which causes lag during the animation,\n          // that's why we delay it untill the initial zoom transition ends\n          template.focus();\n        }\n\n\n        _bindEvents();\n      });\n\n      // set content for center slide (first time)\n      self.setContent(_itemHolders[1], _currentItemIndex);\n      self.updateCurrItem();\n\n      _shout('afterInit');\n\n      if (!_isFixedPosition) {\n\n        // On all versions of iOS lower than 8.0, we check size of viewport every second.\n        //\n        // This is done to detect when Safari top & bottom bars appear,\n        // as this action doesn't trigger any events (like resize).\n        //\n        // On iOS8 they fixed this.\n        //\n        // 10 Nov 2014: iOS 7 usage ~40%. iOS 8 usage 56%.\n\n        _updateSizeInterval = setInterval(function () {\n          if (!_numAnimations && !_isDragging && !_isZooming && (_currZoomLevel === self.currItem.initialZoomLevel)) {\n            self.updateSize();\n          }\n        }, 1000);\n      }\n\n      framework.addClass(template, 'pswp--visible');\n    },\n\n    // Close the gallery, then destroy it\n    close: function () {\n      if (!_isOpen) {\n        return;\n      }\n\n      _isOpen = false;\n      _isDestroying = true;\n      _shout('close');\n      _unbindEvents();\n\n      _showOrHide(self.currItem, null, true, self.destroy);\n    },\n\n    // destroys the gallery (unbinds events, cleans up intervals and timeouts to avoid memory leaks)\n    destroy: function () {\n      _shout('destroy');\n\n      if (_showOrHideTimeout) {\n        clearTimeout(_showOrHideTimeout);\n      }\n\n      template.setAttribute('aria-hidden', 'true');\n      template.className = _initalClassName;\n\n      if (_updateSizeInterval) {\n        clearInterval(_updateSizeInterval);\n      }\n\n      framework.unbind(self.scrollWrap, _downEvents, self);\n\n      // we unbind scroll event at the end, as closing animation may depend on it\n      framework.unbind(window, 'scroll', self);\n\n      _stopDragUpdateLoop();\n\n      _stopAllAnimations();\n\n      _listeners = null;\n    },\n\n    /**\n     * Pan image to position\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Boolean} force Will ignore bounds if set to true.\n     */\n    panTo: function (x, y, force) {\n      if (!force) {\n        if (x > _currPanBounds.min.x) {\n          x = _currPanBounds.min.x;\n        } else if (x < _currPanBounds.max.x) {\n          x = _currPanBounds.max.x;\n        }\n\n        if (y > _currPanBounds.min.y) {\n          y = _currPanBounds.min.y;\n        } else if (y < _currPanBounds.max.y) {\n          y = _currPanBounds.max.y;\n        }\n      }\n\n      _panOffset.x = x;\n      _panOffset.y = y;\n      _applyCurrentZoomPan();\n    },\n\n    handleEvent: function (e) {\n      e = e || window.event;\n      if (_globalEventHandlers[e.type]) {\n        _globalEventHandlers[e.type](e);\n      }\n    },\n\n\n    goTo: function (index) {\n      index = _getLoopedId(index);\n\n      var diff = index - _currentItemIndex;\n      _indexDiff = diff;\n\n      _currentItemIndex = index;\n      self.currItem = _getItemAt(_currentItemIndex);\n      _currPositionIndex -= diff;\n\n      _moveMainScroll(_slideSize.x * _currPositionIndex);\n\n\n      _stopAllAnimations();\n      _mainScrollAnimating = false;\n\n      self.updateCurrItem();\n    },\n    next: function () {\n      self.goTo(_currentItemIndex + 1);\n    },\n    prev: function () {\n      self.goTo(_currentItemIndex - 1);\n    },\n\n    // update current zoom/pan objects\n    updateCurrZoomItem: function (emulateSetContent) {\n      if (emulateSetContent) {\n        _shout('beforeChange', 0);\n      }\n\n      // itemHolder[1] is middle (current) item\n      if (_itemHolders[1].el.children.length) {\n        var zoomElement = _itemHolders[1].el.children[0];\n        if (framework.hasClass(zoomElement, 'pswp__zoom-wrap')) {\n          _currZoomElementStyle = zoomElement.style;\n        } else {\n          _currZoomElementStyle = null;\n        }\n      } else {\n        _currZoomElementStyle = null;\n      }\n\n      _currPanBounds = self.currItem.bounds;\n      _startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\n\n      _panOffset.x = _currPanBounds.center.x;\n      _panOffset.y = _currPanBounds.center.y;\n\n      if (emulateSetContent) {\n        _shout('afterChange');\n      }\n    },\n\n\n    invalidateCurrItems: function () {\n      _itemsNeedUpdate = true;\n      for (var i = 0; i < NUM_HOLDERS; i++) {\n        if (_itemHolders[i].item) {\n          _itemHolders[i].item.needsUpdate = true;\n        }\n      }\n    },\n\n    updateCurrItem: function (beforeAnimation) {\n\n      if (_indexDiff === 0) {\n        return;\n      }\n\n      var diffAbs = Math.abs(_indexDiff),\n        tempHolder;\n\n      if (beforeAnimation && diffAbs < 2) {\n        return;\n      }\n\n\n      self.currItem = _getItemAt(_currentItemIndex);\n      _renderMaxResolution = false;\n\n      _shout('beforeChange', _indexDiff);\n\n      if (diffAbs >= NUM_HOLDERS) {\n        _containerShiftIndex += _indexDiff + (_indexDiff > 0 ? -NUM_HOLDERS : NUM_HOLDERS);\n        diffAbs = NUM_HOLDERS;\n      }\n      for (var i = 0; i < diffAbs; i++) {\n        if (_indexDiff > 0) {\n          tempHolder = _itemHolders.shift();\n          _itemHolders[NUM_HOLDERS - 1] = tempHolder; // move first to last\n\n          _containerShiftIndex++;\n          _setTranslateX((_containerShiftIndex + 2) * _slideSize.x, tempHolder.el.style);\n          self.setContent(tempHolder, _currentItemIndex - diffAbs + i + 1 + 1);\n        } else {\n          tempHolder = _itemHolders.pop();\n          _itemHolders.unshift(tempHolder); // move last to first\n\n          _containerShiftIndex--;\n          _setTranslateX(_containerShiftIndex * _slideSize.x, tempHolder.el.style);\n          self.setContent(tempHolder, _currentItemIndex + diffAbs - i - 1 - 1);\n        }\n\n      }\n\n      // reset zoom/pan on previous item\n      if (_currZoomElementStyle && Math.abs(_indexDiff) === 1) {\n\n        var prevItem = _getItemAt(_prevItemIndex);\n        if (prevItem.initialZoomLevel !== _currZoomLevel) {\n          _calculateItemSize(prevItem, _viewportSize);\n          _setImageSize(prevItem);\n          _applyZoomPanToItem(prevItem);\n        }\n\n      }\n\n      // reset diff after update\n      _indexDiff = 0;\n\n      self.updateCurrZoomItem();\n\n      _prevItemIndex = _currentItemIndex;\n\n      _shout('afterChange');\n\n    },\n    updateCurrItemAsync: async function (beforeAnimation) {\n\n      if (_indexDiff === 0) {\n        return;\n      }\n\n      var diffAbs = Math.abs(_indexDiff),\n        tempHolder;\n\n      if (beforeAnimation && diffAbs < 2) {\n        return;\n      }\n\n\n      self.currItem = _getItemAt(_currentItemIndex);\n      _renderMaxResolution = false;\n\n      _shout('beforeChange', _indexDiff);\n\n      if (diffAbs >= NUM_HOLDERS) {\n        _containerShiftIndex += _indexDiff + (_indexDiff > 0 ? -NUM_HOLDERS : NUM_HOLDERS);\n        diffAbs = NUM_HOLDERS;\n      }\n      for (var i = 0; i < diffAbs; i++) {\n        if (_indexDiff > 0) {\n          tempHolder = _itemHolders.shift();\n          _itemHolders[NUM_HOLDERS - 1] = tempHolder; // move first to last\n\n          _containerShiftIndex++;\n          _setTranslateX((_containerShiftIndex + 2) * _slideSize.x, tempHolder.el.style);\n          await self.setContentAsync(tempHolder, _currentItemIndex - diffAbs + i + 1 + 1);\n        } else {\n          tempHolder = _itemHolders.pop();\n          _itemHolders.unshift(tempHolder); // move last to first\n\n          _containerShiftIndex--;\n          _setTranslateX(_containerShiftIndex * _slideSize.x, tempHolder.el.style);\n          await self.setContentAsync(tempHolder, _currentItemIndex + diffAbs - i - 1 - 1);\n        }\n\n      }\n\n      // reset zoom/pan on previous item\n      if (_currZoomElementStyle && Math.abs(_indexDiff) === 1) {\n\n        var prevItem = _getItemAt(_prevItemIndex);\n        if (prevItem.initialZoomLevel !== _currZoomLevel) {\n          _calculateItemSize(prevItem, _viewportSize);\n          _setImageSize(prevItem);\n          _applyZoomPanToItem(prevItem);\n        }\n\n      }\n\n      // reset diff after update\n      _indexDiff = 0;\n\n      self.updateCurrZoomItem();\n\n      _prevItemIndex = _currentItemIndex;\n\n      _shout('afterChange');\n\n    },\n\n    updateSize: function (force) {\n\n      if (!_isFixedPosition && _options.modal) {\n        var windowScrollY = framework.getScrollY();\n        if (_currentWindowScrollY !== windowScrollY) {\n          template.style.top = windowScrollY + 'px';\n          _currentWindowScrollY = windowScrollY;\n        }\n        if (!force && _windowVisibleSize.x === window.innerWidth && _windowVisibleSize.y === window.innerHeight) {\n          return;\n        }\n        _windowVisibleSize.x = window.innerWidth;\n        _windowVisibleSize.y = window.innerHeight;\n\n        //template.style.width = _windowVisibleSize.x + 'px';\n        template.style.height = _windowVisibleSize.y + 'px';\n      }\n\n\n      _viewportSize.x = self.scrollWrap.clientWidth;\n      _viewportSize.y = self.scrollWrap.clientHeight;\n\n      _updatePageScrollOffset();\n\n      _slideSize.x = _viewportSize.x + Math.round(_viewportSize.x * _options.spacing);\n      _slideSize.y = _viewportSize.y;\n\n      _moveMainScroll(_slideSize.x * _currPositionIndex);\n\n      _shout('beforeResize'); // even may be used for example to switch image sources\n\n\n      // don't re-calculate size on inital size update\n      if (_containerShiftIndex !== undefined) {\n\n        var holder,\n          item,\n          hIndex;\n\n        for (var i = 0; i < NUM_HOLDERS; i++) {\n          holder = _itemHolders[i];\n          _setTranslateX((i + _containerShiftIndex) * _slideSize.x, holder.el.style);\n\n          hIndex = _currentItemIndex + i - 1;\n\n          if (_options.loop && _getNumItems() > 2) {\n            hIndex = _getLoopedId(hIndex);\n          }\n\n          // update zoom level on items and refresh source (if needsUpdate)\n          item = _getItemAt(hIndex);\n\n          // re-render gallery item if `needsUpdate`,\n          // or doesn't have `bounds` (entirely new slide object)\n          if (item && (_itemsNeedUpdate || item.needsUpdate || !item.bounds)) {\n\n            self.cleanSlide(item);\n\n            self.setContent(holder, hIndex);\n\n            // if \"center\" slide\n            if (i === 1) {\n              self.currItem = item;\n              self.updateCurrZoomItem(true);\n            }\n\n            item.needsUpdate = false;\n\n          } else if (holder.index === -1 && hIndex >= 0) {\n            // add content first time\n            self.setContent(holder, hIndex);\n          }\n          if (item && item.container) {\n            _calculateItemSize(item, _viewportSize);\n            _setImageSize(item);\n            _applyZoomPanToItem(item);\n          }\n\n        }\n        _itemsNeedUpdate = false;\n      }\n\n      _startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\n      _currPanBounds = self.currItem.bounds;\n\n      if (_currPanBounds) {\n        _panOffset.x = _currPanBounds.center.x;\n        _panOffset.y = _currPanBounds.center.y;\n        _applyCurrentZoomPan(true);\n      }\n\n      _shout('resize');\n    },\n\n    // Zoom current item to\n    zoomTo: function (destZoomLevel, centerPoint, speed, easingFn, updateFn) {\n      /*\n  if(destZoomLevel === 'fit') {\n      destZoomLevel = self.currItem.fitRatio;\n  } else if(destZoomLevel === 'fill') {\n      destZoomLevel = self.currItem.fillRatio;\n  }\n*/\n\n      if (centerPoint) {\n        _startZoomLevel = _currZoomLevel;\n        _midZoomPoint.x = Math.abs(centerPoint.x) - _panOffset.x;\n        _midZoomPoint.y = Math.abs(centerPoint.y) - _panOffset.y;\n        _equalizePoints(_startPanOffset, _panOffset);\n      }\n\n      var destPanBounds = _calculatePanBounds(destZoomLevel, false),\n        destPanOffset = {};\n\n      _modifyDestPanOffset('x', destPanBounds, destPanOffset, destZoomLevel);\n      _modifyDestPanOffset('y', destPanBounds, destPanOffset, destZoomLevel);\n\n      var initialZoomLevel = _currZoomLevel;\n      var initialPanOffset = {\n        x: _panOffset.x,\n        y: _panOffset.y\n      };\n\n      _roundPoint(destPanOffset);\n\n      var onUpdate = function (now) {\n        if (now === 1) {\n          _currZoomLevel = destZoomLevel;\n          _panOffset.x = destPanOffset.x;\n          _panOffset.y = destPanOffset.y;\n        } else {\n          _currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\n          _panOffset.x = (destPanOffset.x - initialPanOffset.x) * now + initialPanOffset.x;\n          _panOffset.y = (destPanOffset.y - initialPanOffset.y) * now + initialPanOffset.y;\n        }\n\n        if (updateFn) {\n          updateFn(now);\n        }\n\n        _applyCurrentZoomPan(now === 1);\n      };\n\n      if (speed) {\n        _animateProp('customZoomTo', 0, 1, speed, easingFn || framework.easing.sine.inOut, onUpdate);\n      } else {\n        onUpdate(1);\n      }\n    }\n\n\n  };\n\n\n  /*>>core*/\n\n  /*>>gestures*/\n  /**\n   * Mouse/touch/pointer event handlers.\n   *\n   * separated from @core.js for readability\n   */\n\n  var MIN_SWIPE_DISTANCE = 30,\n    DIRECTION_CHECK_OFFSET = 10; // amount of pixels to drag to determine direction of swipe\n\n  var _gestureStartTime,\n    _gestureCheckSpeedTime,\n\n    // pool of objects that are used during dragging of zooming\n    p = {}, // first point\n    p2 = {}, // second point (for zoom gesture)\n    delta = {},\n    _currPoint = {},\n    _startPoint = {},\n    _currPointers = [],\n    _startMainScrollPos = {},\n    _releaseAnimData,\n    _posPoints = [], // array of points during dragging, used to determine type of gesture\n    _tempPoint = {},\n\n    _isZoomingIn,\n    _verticalDragInitiated,\n    _oldAndroidTouchEndTimeout,\n    _currZoomedItemIndex = 0,\n    _centerPoint = _getEmptyPoint(),\n    _lastReleaseTime = 0,\n    _isDragging, // at least one pointer is down\n    _isMultitouch, // at least two _pointers are down\n    _zoomStarted, // zoom level changed during zoom gesture\n    _moved,\n    _dragAnimFrame,\n    _mainScrollShifted,\n    _currentPoints, // array of current touch points\n    _isZooming,\n    _currPointsDistance,\n    _startPointsDistance,\n    _currPanBounds,\n    _mainScrollPos = _getEmptyPoint(),\n    _currZoomElementStyle,\n    _mainScrollAnimating, // true, if animation after swipe gesture is running\n    _midZoomPoint = _getEmptyPoint(),\n    _currCenterPoint = _getEmptyPoint(),\n    _direction,\n    _isFirstMove,\n    _opacityChanged,\n    _bgOpacity,\n    _wasOverInitialZoom,\n\n    _isEqualPoints = function (p1, p2) {\n      return p1.x === p2.x && p1.y === p2.y;\n    },\n    _isNearbyPoints = function (touch0, touch1) {\n      return Math.abs(touch0.x - touch1.x) < DOUBLE_TAP_RADIUS && Math.abs(touch0.y - touch1.y) < DOUBLE_TAP_RADIUS;\n    },\n    _calculatePointsDistance = function (p1, p2) {\n      _tempPoint.x = Math.abs(p1.x - p2.x);\n      _tempPoint.y = Math.abs(p1.y - p2.y);\n      return Math.sqrt(_tempPoint.x * _tempPoint.x + _tempPoint.y * _tempPoint.y);\n    },\n    _stopDragUpdateLoop = function () {\n      if (_dragAnimFrame) {\n        _cancelAF(_dragAnimFrame);\n        _dragAnimFrame = null;\n      }\n    },\n    _dragUpdateLoop = function () {\n      if (_isDragging) {\n        _dragAnimFrame = _requestAF(_dragUpdateLoop);\n        _renderMovement();\n      }\n    },\n    _canPan = function () {\n      return !(_options.scaleMode === 'fit' && _currZoomLevel === self.currItem.initialZoomLevel);\n    },\n\n    // find the closest parent DOM element\n    _closestElement = function (el, fn) {\n      if (!el || el === document) {\n        return false;\n      }\n\n      // don't search elements above pswp__scroll-wrap\n      if (el.getAttribute('class') && el.getAttribute('class').indexOf('pswp__scroll-wrap') > -1) {\n        return false;\n      }\n\n      if (fn(el)) {\n        return el;\n      }\n\n      return _closestElement(el.parentNode, fn);\n    },\n\n    _preventObj = {},\n    _preventDefaultEventBehaviour = function (e, isDown) {\n      _preventObj.prevent = !_closestElement(e.target, _options.isClickableElement);\n\n      _shout('preventDragEvent', e, isDown, _preventObj);\n      return _preventObj.prevent;\n\n    },\n    _convertTouchToPoint = function (touch, p) {\n      p.x = touch.pageX;\n      p.y = touch.pageY;\n      p.id = touch.identifier;\n      return p;\n    },\n    _findCenterOfPoints = function (p1, p2, pCenter) {\n      pCenter.x = (p1.x + p2.x) * 0.5;\n      pCenter.y = (p1.y + p2.y) * 0.5;\n    },\n    _pushPosPoint = function (time, x, y) {\n      if (time - _gestureCheckSpeedTime > 50) {\n        var o = _posPoints.length > 2 ? _posPoints.shift() : {};\n        o.x = x;\n        o.y = y;\n        _posPoints.push(o);\n        _gestureCheckSpeedTime = time;\n      }\n    },\n\n    _calculateVerticalDragOpacityRatio = function () {\n      var yOffset = _panOffset.y - self.currItem.initialPosition.y; // difference between initial and current position\n      return 1 - Math.abs(yOffset / (_viewportSize.y / 2));\n    },\n\n\n    // points pool, reused during touch events\n    _ePoint1 = {},\n    _ePoint2 = {},\n    _tempPointsArr = [],\n    _tempCounter,\n    _getTouchPoints = function (e) {\n      // clean up previous points, without recreating array\n      while (_tempPointsArr.length > 0) {\n        _tempPointsArr.pop();\n      }\n\n      if (!_pointerEventEnabled) {\n        if (e.type.indexOf('touch') > -1) {\n\n          if (e.touches && e.touches.length > 0) {\n            _tempPointsArr[0] = _convertTouchToPoint(e.touches[0], _ePoint1);\n            if (e.touches.length > 1) {\n              _tempPointsArr[1] = _convertTouchToPoint(e.touches[1], _ePoint2);\n            }\n          }\n\n        } else {\n          _ePoint1.x = e.pageX;\n          _ePoint1.y = e.pageY;\n          _ePoint1.id = '';\n          _tempPointsArr[0] = _ePoint1;//_ePoint1;\n        }\n      } else {\n        _tempCounter = 0;\n        // we can use forEach, as pointer events are supported only in modern browsers\n        _currPointers.forEach(function (p) {\n          if (_tempCounter === 0) {\n            _tempPointsArr[0] = p;\n          } else if (_tempCounter === 1) {\n            _tempPointsArr[1] = p;\n          }\n          _tempCounter++;\n\n        });\n      }\n      return _tempPointsArr;\n    },\n\n    _panOrMoveMainScroll = function (axis, delta) {\n\n      var panFriction,\n        overDiff = 0,\n        newOffset = _panOffset[axis] + delta[axis],\n        startOverDiff,\n        dir = delta[axis] > 0,\n        newMainScrollPosition = _mainScrollPos.x + delta.x,\n        mainScrollDiff = _mainScrollPos.x - _startMainScrollPos.x,\n        newPanPos,\n        newMainScrollPos;\n\n      // calculate fdistance over the bounds and friction\n      if (newOffset > _currPanBounds.min[axis] || newOffset < _currPanBounds.max[axis]) {\n        panFriction = _options.panEndFriction;\n        // Linear increasing of friction, so at 1/4 of viewport it's at max value.\n        // Looks not as nice as was expected. Left for history.\n        // panFriction = (1 - (_panOffset[axis] + delta[axis] + panBounds.min[axis]) / (_viewportSize[axis] / 4) );\n      } else {\n        panFriction = 1;\n      }\n\n      newOffset = _panOffset[axis] + delta[axis] * panFriction;\n\n      // move main scroll or start panning\n      if (_options.allowPanToNext || _currZoomLevel === self.currItem.initialZoomLevel) {\n\n\n        if (!_currZoomElementStyle) {\n\n          newMainScrollPos = newMainScrollPosition;\n\n        } else if (_direction === 'h' && axis === 'x' && !_zoomStarted) {\n\n          if (dir) {\n            if (newOffset > _currPanBounds.min[axis]) {\n              panFriction = _options.panEndFriction;\n              overDiff = _currPanBounds.min[axis] - newOffset;\n              startOverDiff = _currPanBounds.min[axis] - _startPanOffset[axis];\n            }\n\n            // drag right\n            if ((startOverDiff <= 0 || mainScrollDiff < 0) && _getNumItems() > 1) {\n              newMainScrollPos = newMainScrollPosition;\n              if (mainScrollDiff < 0 && newMainScrollPosition > _startMainScrollPos.x) {\n                newMainScrollPos = _startMainScrollPos.x;\n              }\n            } else {\n              if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n                newPanPos = newOffset;\n              }\n\n            }\n\n          } else {\n\n            if (newOffset < _currPanBounds.max[axis]) {\n              panFriction = _options.panEndFriction;\n              overDiff = newOffset - _currPanBounds.max[axis];\n              startOverDiff = _startPanOffset[axis] - _currPanBounds.max[axis];\n            }\n\n            if ((startOverDiff <= 0 || mainScrollDiff > 0) && _getNumItems() > 1) {\n              newMainScrollPos = newMainScrollPosition;\n\n              if (mainScrollDiff > 0 && newMainScrollPosition < _startMainScrollPos.x) {\n                newMainScrollPos = _startMainScrollPos.x;\n              }\n\n            } else {\n              if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n                newPanPos = newOffset;\n              }\n            }\n\n          }\n\n\n          //\n        }\n\n        if (axis === 'x') {\n\n          if (newMainScrollPos !== undefined) {\n            _moveMainScroll(newMainScrollPos, true);\n            if (newMainScrollPos === _startMainScrollPos.x) {\n              _mainScrollShifted = false;\n            } else {\n              _mainScrollShifted = true;\n            }\n          }\n\n          if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n            if (newPanPos !== undefined) {\n              _panOffset.x = newPanPos;\n            } else if (!_mainScrollShifted) {\n              _panOffset.x += delta.x * panFriction;\n            }\n          }\n\n          return newMainScrollPos !== undefined;\n        }\n\n      }\n\n      if (!_mainScrollAnimating) {\n\n        if (!_mainScrollShifted) {\n          if (_currZoomLevel > self.currItem.fitRatio) {\n            _panOffset[axis] += delta[axis] * panFriction;\n\n          }\n        }\n\n\n      }\n\n    },\n\n    // Pointerdown/touchstart/mousedown handler\n    _onDragStart = function (e) {\n\n      // Allow dragging only via left mouse button.\n      // As this handler is not added in IE8 - we ignore e.which\n      //\n      // http://www.quirksmode.org/js/events_properties.html\n      // https://developer.mozilla.org/en-US/docs/Web/API/event.button\n      if (e.type === 'mousedown' && e.button > 0) {\n        return;\n      }\n\n      if (_initialZoomRunning) {\n        e.preventDefault();\n        return;\n      }\n\n      if (_oldAndroidTouchEndTimeout && e.type === 'mousedown') {\n        return;\n      }\n\n      if (_preventDefaultEventBehaviour(e, true)) {\n        e.preventDefault();\n      }\n\n\n      _shout('pointerDown');\n\n      if (_pointerEventEnabled) {\n        var pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n        if (pointerIndex < 0) {\n          pointerIndex = _currPointers.length;\n        }\n        _currPointers[pointerIndex] = {x: e.pageX, y: e.pageY, id: e.pointerId};\n      }\n\n\n      var startPointsList = _getTouchPoints(e),\n        numPoints = startPointsList.length;\n\n      _currentPoints = null;\n\n      _stopAllAnimations();\n\n      // init drag\n      if (!_isDragging || numPoints === 1) {\n\n\n        _isDragging = _isFirstMove = true;\n        framework.bind(window, _upMoveEvents, self);\n\n        _isZoomingIn =\n          _wasOverInitialZoom =\n            _opacityChanged =\n              _verticalDragInitiated =\n                _mainScrollShifted =\n                  _moved =\n                    _isMultitouch =\n                      _zoomStarted = false;\n\n        _direction = null;\n\n        _shout('firstTouchStart', startPointsList);\n\n        _equalizePoints(_startPanOffset, _panOffset);\n\n        _currPanDist.x = _currPanDist.y = 0;\n        _equalizePoints(_currPoint, startPointsList[0]);\n        _equalizePoints(_startPoint, _currPoint);\n\n        //_equalizePoints(_startMainScrollPos, _mainScrollPos);\n        _startMainScrollPos.x = _slideSize.x * _currPositionIndex;\n\n        _posPoints = [{\n          x: _currPoint.x,\n          y: _currPoint.y\n        }];\n\n        _gestureCheckSpeedTime = _gestureStartTime = _getCurrentTime();\n\n        //_mainScrollAnimationEnd(true);\n        _calculatePanBounds(_currZoomLevel, true);\n\n        // Start rendering\n        _stopDragUpdateLoop();\n        _dragUpdateLoop();\n\n      }\n\n      // init zoom\n      if (!_isZooming && numPoints > 1 && !_mainScrollAnimating && !_mainScrollShifted) {\n        _startZoomLevel = _currZoomLevel;\n        _zoomStarted = false; // true if zoom changed at least once\n\n        _isZooming = _isMultitouch = true;\n        _currPanDist.y = _currPanDist.x = 0;\n\n        _equalizePoints(_startPanOffset, _panOffset);\n\n        _equalizePoints(p, startPointsList[0]);\n        _equalizePoints(p2, startPointsList[1]);\n\n        _findCenterOfPoints(p, p2, _currCenterPoint);\n\n        _midZoomPoint.x = Math.abs(_currCenterPoint.x) - _panOffset.x;\n        _midZoomPoint.y = Math.abs(_currCenterPoint.y) - _panOffset.y;\n        _currPointsDistance = _startPointsDistance = _calculatePointsDistance(p, p2);\n      }\n\n\n    },\n\n    // Pointermove/touchmove/mousemove handler\n    _onDragMove = function (e) {\n\n      e.preventDefault();\n\n      if (_pointerEventEnabled) {\n        var pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n        if (pointerIndex > -1) {\n          var p = _currPointers[pointerIndex];\n          p.x = e.pageX;\n          p.y = e.pageY;\n        }\n      }\n\n      if (_isDragging) {\n        var touchesList = _getTouchPoints(e);\n        if (!_direction && !_moved && !_isZooming) {\n\n          if (_mainScrollPos.x !== _slideSize.x * _currPositionIndex) {\n            // if main scroll position is shifted – direction is always horizontal\n            _direction = 'h';\n          } else {\n            var diff = Math.abs(touchesList[0].x - _currPoint.x) - Math.abs(touchesList[0].y - _currPoint.y);\n            // check the direction of movement\n            if (Math.abs(diff) >= DIRECTION_CHECK_OFFSET) {\n              _direction = diff > 0 ? 'h' : 'v';\n              _currentPoints = touchesList;\n            }\n          }\n\n        } else {\n          _currentPoints = touchesList;\n        }\n      }\n    },\n    //\n    _renderMovement = function () {\n\n      if (!_currentPoints) {\n        return;\n      }\n\n      var numPoints = _currentPoints.length;\n\n      if (numPoints === 0) {\n        return;\n      }\n\n      _equalizePoints(p, _currentPoints[0]);\n\n      delta.x = p.x - _currPoint.x;\n      delta.y = p.y - _currPoint.y;\n\n      if (_isZooming && numPoints > 1) {\n        // Handle behaviour for more than 1 point\n\n        _currPoint.x = p.x;\n        _currPoint.y = p.y;\n\n        // check if one of two points changed\n        if (!delta.x && !delta.y && _isEqualPoints(_currentPoints[1], p2)) {\n          return;\n        }\n\n        _equalizePoints(p2, _currentPoints[1]);\n\n\n        if (!_zoomStarted) {\n          _zoomStarted = true;\n          _shout('zoomGestureStarted');\n        }\n\n        // Distance between two points\n        var pointsDistance = _calculatePointsDistance(p, p2);\n\n        var zoomLevel = _calculateZoomLevel(pointsDistance);\n\n        // slightly over the of initial zoom level\n        if (zoomLevel > self.currItem.initialZoomLevel + self.currItem.initialZoomLevel / 15) {\n          _wasOverInitialZoom = true;\n        }\n\n        // Apply the friction if zoom level is out of the bounds\n        var zoomFriction = 1,\n          minZoomLevel = _getMinZoomLevel(),\n          maxZoomLevel = _getMaxZoomLevel();\n\n        if (zoomLevel < minZoomLevel) {\n\n          if (_options.pinchToClose && !_wasOverInitialZoom && _startZoomLevel <= self.currItem.initialZoomLevel) {\n            // fade out background if zooming out\n            var minusDiff = minZoomLevel - zoomLevel;\n            var percent = 1 - minusDiff / (minZoomLevel / 1.2);\n\n            _applyBgOpacity(percent);\n            _shout('onPinchClose', percent);\n            _opacityChanged = true;\n          } else {\n            zoomFriction = (minZoomLevel - zoomLevel) / minZoomLevel;\n            if (zoomFriction > 1) {\n              zoomFriction = 1;\n            }\n            zoomLevel = minZoomLevel - zoomFriction * (minZoomLevel / 3);\n          }\n\n        } else if (zoomLevel > maxZoomLevel) {\n          // 1.5 - extra zoom level above the max. E.g. if max is x6, real max 6 + 1.5 = 7.5\n          zoomFriction = (zoomLevel - maxZoomLevel) / (minZoomLevel * 6);\n          if (zoomFriction > 1) {\n            zoomFriction = 1;\n          }\n          zoomLevel = maxZoomLevel + zoomFriction * minZoomLevel;\n        }\n\n        if (zoomFriction < 0) {\n          zoomFriction = 0;\n        }\n\n        // distance between touch points after friction is applied\n        _currPointsDistance = pointsDistance;\n\n        // _centerPoint - The point in the middle of two pointers\n        _findCenterOfPoints(p, p2, _centerPoint);\n\n        // paning with two pointers pressed\n        _currPanDist.x += _centerPoint.x - _currCenterPoint.x;\n        _currPanDist.y += _centerPoint.y - _currCenterPoint.y;\n        _equalizePoints(_currCenterPoint, _centerPoint);\n\n        _panOffset.x = _calculatePanOffset('x', zoomLevel);\n        _panOffset.y = _calculatePanOffset('y', zoomLevel);\n\n        _isZoomingIn = zoomLevel > _currZoomLevel;\n        _currZoomLevel = zoomLevel;\n        _applyCurrentZoomPan();\n\n      } else {\n\n        // handle behaviour for one point (dragging or panning)\n\n        if (!_direction) {\n          return;\n        }\n\n        if (_isFirstMove) {\n          _isFirstMove = false;\n\n          // subtract drag distance that was used during the detection direction\n\n          if (Math.abs(delta.x) >= DIRECTION_CHECK_OFFSET) {\n            delta.x -= _currentPoints[0].x - _startPoint.x;\n          }\n\n          if (Math.abs(delta.y) >= DIRECTION_CHECK_OFFSET) {\n            delta.y -= _currentPoints[0].y - _startPoint.y;\n          }\n        }\n\n        _currPoint.x = p.x;\n        _currPoint.y = p.y;\n\n        // do nothing if pointers position hasn't changed\n        if (delta.x === 0 && delta.y === 0) {\n          return;\n        }\n\n        if (_direction === 'v' && _options.closeOnVerticalDrag) {\n          if (!_canPan()) {\n            _currPanDist.y += delta.y;\n            _panOffset.y += delta.y;\n\n            var opacityRatio = _calculateVerticalDragOpacityRatio();\n\n            _verticalDragInitiated = true;\n            _shout('onVerticalDrag', opacityRatio);\n\n            _applyBgOpacity(opacityRatio);\n            _applyCurrentZoomPan();\n            return;\n          }\n        }\n\n        _pushPosPoint(_getCurrentTime(), p.x, p.y);\n\n        _moved = true;\n        _currPanBounds = self.currItem.bounds;\n\n        var mainScrollChanged = _panOrMoveMainScroll('x', delta);\n        if (!mainScrollChanged) {\n          _panOrMoveMainScroll('y', delta);\n\n          _roundPoint(_panOffset);\n          _applyCurrentZoomPan();\n        }\n\n      }\n\n    },\n\n    // Pointerup/pointercancel/touchend/touchcancel/mouseup event handler\n    _onDragRelease = async function (e) {\n\n      if (_features.isOldAndroid) {\n\n        if (_oldAndroidTouchEndTimeout && e.type === 'mouseup') {\n          return;\n        }\n\n        // on Android (v4.1, 4.2, 4.3 & possibly older)\n        // ghost mousedown/up event isn't preventable via e.preventDefault,\n        // which causes fake mousedown event\n        // so we block mousedown/up for 600ms\n        if (e.type.indexOf('touch') > -1) {\n          clearTimeout(_oldAndroidTouchEndTimeout);\n          _oldAndroidTouchEndTimeout = setTimeout(function () {\n            _oldAndroidTouchEndTimeout = 0;\n          }, 600);\n        }\n\n      }\n\n      _shout('pointerUp');\n\n      if (_preventDefaultEventBehaviour(e, false)) {\n        e.preventDefault();\n      }\n\n      var releasePoint;\n\n      if (_pointerEventEnabled) {\n        var pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\n        if (pointerIndex > -1) {\n          releasePoint = _currPointers.splice(pointerIndex, 1)[0];\n\n          if (navigator.msPointerEnabled) {\n            var MSPOINTER_TYPES = {\n              4: 'mouse', // event.MSPOINTER_TYPE_MOUSE\n              2: 'touch', // event.MSPOINTER_TYPE_TOUCH\n              3: 'pen' // event.MSPOINTER_TYPE_PEN\n            };\n            releasePoint.type = MSPOINTER_TYPES[e.pointerType];\n\n            if (!releasePoint.type) {\n              releasePoint.type = e.pointerType || 'mouse';\n            }\n          } else {\n            releasePoint.type = e.pointerType || 'mouse';\n          }\n\n        }\n      }\n\n      var touchList = _getTouchPoints(e),\n        gestureType,\n        numPoints = touchList.length;\n\n      if (e.type === 'mouseup') {\n        numPoints = 0;\n      }\n\n      // Do nothing if there were 3 touch points or more\n      if (numPoints === 2) {\n        _currentPoints = null;\n        return true;\n      }\n\n      // if second pointer released\n      if (numPoints === 1) {\n        _equalizePoints(_startPoint, touchList[0]);\n      }\n\n\n      // pointer hasn't moved, send \"tap release\" point\n      if (numPoints === 0 && !_direction && !_mainScrollAnimating) {\n        if (!releasePoint) {\n          if (e.type === 'mouseup') {\n            releasePoint = {x: e.pageX, y: e.pageY, type: 'mouse'};\n          } else if (e.changedTouches && e.changedTouches[0]) {\n            releasePoint = {x: e.changedTouches[0].pageX, y: e.changedTouches[0].pageY, type: 'touch'};\n          }\n        }\n\n        _shout('touchRelease', e, releasePoint);\n      }\n\n      // Difference in time between releasing of two last touch points (zoom gesture)\n      var releaseTimeDiff = -1;\n\n      // Gesture completed, no pointers left\n      if (numPoints === 0) {\n        _isDragging = false;\n        framework.unbind(window, _upMoveEvents, self);\n\n        _stopDragUpdateLoop();\n\n        if (_isZooming) {\n          // Two points released at the same time\n          releaseTimeDiff = 0;\n        } else if (_lastReleaseTime !== -1) {\n          releaseTimeDiff = _getCurrentTime() - _lastReleaseTime;\n        }\n      }\n      _lastReleaseTime = numPoints === 1 ? _getCurrentTime() : -1;\n\n      if (releaseTimeDiff !== -1 && releaseTimeDiff < 150) {\n        gestureType = 'zoom';\n      } else {\n        gestureType = 'swipe';\n      }\n\n      if (_isZooming && numPoints < 2) {\n        _isZooming = false;\n\n        // Only second point released\n        if (numPoints === 1) {\n          gestureType = 'zoomPointerUp';\n        }\n        _shout('zoomGestureEnded');\n      }\n\n      _currentPoints = null;\n      if (!_moved && !_zoomStarted && !_mainScrollAnimating && !_verticalDragInitiated) {\n        // nothing to animate\n        return;\n      }\n\n      _stopAllAnimations();\n\n\n      if (!_releaseAnimData) {\n        _releaseAnimData = _initDragReleaseAnimationData();\n      }\n\n      _releaseAnimData.calculateSwipeSpeed('x');\n\n\n      if (_verticalDragInitiated) {\n\n        var opacityRatio = _calculateVerticalDragOpacityRatio();\n\n        if (opacityRatio < _options.verticalDragRange) {\n          self.close();\n        } else {\n          var initalPanY = _panOffset.y,\n            initialBgOpacity = _bgOpacity;\n\n          _animateProp('verticalDrag', 0, 1, 300, framework.easing.cubic.out, function (now) {\n\n            _panOffset.y = (self.currItem.initialPosition.y - initalPanY) * now + initalPanY;\n\n            _applyBgOpacity((1 - initialBgOpacity) * now + initialBgOpacity);\n            _applyCurrentZoomPan();\n          });\n\n          _shout('onVerticalDrag', 1);\n        }\n\n        return;\n      }\n\n\n      // main scroll\n      if ((_mainScrollShifted || _mainScrollAnimating) && numPoints === 0) {\n        var itemChanged = await _finishSwipeMainScrollGesture(gestureType, _releaseAnimData);\n        if (itemChanged) {\n          return;\n        }\n        gestureType = 'zoomPointerUp';\n      }\n\n      // prevent zoom/pan animation when main scroll animation runs\n      if (_mainScrollAnimating) {\n        return;\n      }\n\n      // Complete simple zoom gesture (reset zoom level if it's out of the bounds)\n      if (gestureType !== 'swipe') {\n        _completeZoomGesture();\n        return;\n      }\n\n      // Complete pan gesture if main scroll is not shifted, and it's possible to pan current image\n      if (!_mainScrollShifted && _currZoomLevel > self.currItem.fitRatio) {\n        _completePanGesture(_releaseAnimData);\n      }\n    },\n\n\n    // Returns object with data about gesture\n    // It's created only once and then reused\n    _initDragReleaseAnimationData = function () {\n      // temp local vars\n      var lastFlickDuration,\n        tempReleasePos;\n\n      // s = this\n      var s = {\n        lastFlickOffset: {},\n        lastFlickDist: {},\n        lastFlickSpeed: {},\n        slowDownRatio: {},\n        slowDownRatioReverse: {},\n        speedDecelerationRatio: {},\n        speedDecelerationRatioAbs: {},\n        distanceOffset: {},\n        backAnimDestination: {},\n        backAnimStarted: {},\n        calculateSwipeSpeed: function (axis) {\n\n\n          if (_posPoints.length > 1) {\n            lastFlickDuration = _getCurrentTime() - _gestureCheckSpeedTime + 50;\n            tempReleasePos = _posPoints[_posPoints.length - 2][axis];\n          } else {\n            lastFlickDuration = _getCurrentTime() - _gestureStartTime; // total gesture duration\n            tempReleasePos = _startPoint[axis];\n          }\n          s.lastFlickOffset[axis] = _currPoint[axis] - tempReleasePos;\n          s.lastFlickDist[axis] = Math.abs(s.lastFlickOffset[axis]);\n          if (s.lastFlickDist[axis] > 20) {\n            s.lastFlickSpeed[axis] = s.lastFlickOffset[axis] / lastFlickDuration;\n          } else {\n            s.lastFlickSpeed[axis] = 0;\n          }\n          if (Math.abs(s.lastFlickSpeed[axis]) < 0.1) {\n            s.lastFlickSpeed[axis] = 0;\n          }\n\n          s.slowDownRatio[axis] = 0.95;\n          s.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\n          s.speedDecelerationRatio[axis] = 1;\n        },\n\n        calculateOverBoundsAnimOffset: function (axis, speed) {\n          if (!s.backAnimStarted[axis]) {\n\n            if (_panOffset[axis] > _currPanBounds.min[axis]) {\n              s.backAnimDestination[axis] = _currPanBounds.min[axis];\n\n            } else if (_panOffset[axis] < _currPanBounds.max[axis]) {\n              s.backAnimDestination[axis] = _currPanBounds.max[axis];\n            }\n\n            if (s.backAnimDestination[axis] !== undefined) {\n              s.slowDownRatio[axis] = 0.7;\n              s.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\n              if (s.speedDecelerationRatioAbs[axis] < 0.05) {\n\n                s.lastFlickSpeed[axis] = 0;\n                s.backAnimStarted[axis] = true;\n\n                _animateProp('bounceZoomPan' + axis, _panOffset[axis],\n                  s.backAnimDestination[axis],\n                  speed || 300,\n                  framework.easing.sine.out,\n                  function (pos) {\n                    _panOffset[axis] = pos;\n                    _applyCurrentZoomPan();\n                  }\n                );\n\n              }\n            }\n          }\n        },\n\n        // Reduces the speed by slowDownRatio (per 10ms)\n        calculateAnimOffset: function (axis) {\n          if (!s.backAnimStarted[axis]) {\n            s.speedDecelerationRatio[axis] = s.speedDecelerationRatio[axis] * (s.slowDownRatio[axis] +\n              s.slowDownRatioReverse[axis] -\n              s.slowDownRatioReverse[axis] * s.timeDiff / 10);\n\n            s.speedDecelerationRatioAbs[axis] = Math.abs(s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis]);\n            s.distanceOffset[axis] = s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis] * s.timeDiff;\n            _panOffset[axis] += s.distanceOffset[axis];\n\n          }\n        },\n\n        panAnimLoop: function () {\n          if (_animations.zoomPan) {\n            _animations.zoomPan.raf = _requestAF(s.panAnimLoop);\n\n            s.now = _getCurrentTime();\n            s.timeDiff = s.now - s.lastNow;\n            s.lastNow = s.now;\n\n            s.calculateAnimOffset('x');\n            s.calculateAnimOffset('y');\n\n            _applyCurrentZoomPan();\n\n            s.calculateOverBoundsAnimOffset('x');\n            s.calculateOverBoundsAnimOffset('y');\n\n\n            if (s.speedDecelerationRatioAbs.x < 0.05 && s.speedDecelerationRatioAbs.y < 0.05) {\n\n              // round pan position\n              _panOffset.x = Math.round(_panOffset.x);\n              _panOffset.y = Math.round(_panOffset.y);\n              _applyCurrentZoomPan();\n\n              _stopAnimation('zoomPan');\n              return;\n            }\n          }\n\n        }\n      };\n      return s;\n    },\n\n    _completePanGesture = function (animData) {\n      // calculate swipe speed for Y axis (paanning)\n      animData.calculateSwipeSpeed('y');\n\n      _currPanBounds = self.currItem.bounds;\n\n      animData.backAnimDestination = {};\n      animData.backAnimStarted = {};\n\n      // Avoid acceleration animation if speed is too low\n      if (Math.abs(animData.lastFlickSpeed.x) <= 0.05 && Math.abs(animData.lastFlickSpeed.y) <= 0.05) {\n        animData.speedDecelerationRatioAbs.x = animData.speedDecelerationRatioAbs.y = 0;\n\n        // Run pan drag release animation. E.g. if you drag image and release finger without momentum.\n        animData.calculateOverBoundsAnimOffset('x');\n        animData.calculateOverBoundsAnimOffset('y');\n        return true;\n      }\n\n      // Animation loop that controls the acceleration after pan gesture ends\n      _registerStartAnimation('zoomPan');\n      animData.lastNow = _getCurrentTime();\n      animData.panAnimLoop();\n    },\n\n\n    _finishSwipeMainScrollGesture = async function (gestureType, _releaseAnimData) {\n      var itemChanged;\n      if (!_mainScrollAnimating) {\n        _currZoomedItemIndex = _currentItemIndex;\n      }\n\n\n      var itemsDiff;\n\n      if (gestureType === 'swipe') {\n        var totalShiftDist = _currPoint.x - _startPoint.x,\n          isFastLastFlick = _releaseAnimData.lastFlickDist.x < 10;\n\n        // if container is shifted for more than MIN_SWIPE_DISTANCE,\n        // and last flick gesture was in right direction\n        if (totalShiftDist > MIN_SWIPE_DISTANCE &&\n          (isFastLastFlick || _releaseAnimData.lastFlickOffset.x > 20)) {\n          // go to prev item\n          itemsDiff = -1;\n        } else if (totalShiftDist < -MIN_SWIPE_DISTANCE &&\n          (isFastLastFlick || _releaseAnimData.lastFlickOffset.x < -20)) {\n          // go to next item\n          itemsDiff = 1;\n        }\n      }\n\n      var nextCircle;\n\n      if (itemsDiff) {\n\n        _currentItemIndex += itemsDiff;\n\n        if (_currentItemIndex < 0) {\n          _currentItemIndex = _options.loop ? _getNumItems() - 1 : 0;\n          nextCircle = true;\n        } else if (_currentItemIndex >= _getNumItems()) {\n          _currentItemIndex = _options.loop ? 0 : _getNumItems() - 1;\n          nextCircle = true;\n        }\n\n        if (!nextCircle || _options.loop) {\n          _indexDiff += itemsDiff;\n          _currPositionIndex -= itemsDiff;\n          itemChanged = true;\n        }\n\n\n      }\n\n      var animateToX = _slideSize.x * _currPositionIndex;\n      var animateToDist = Math.abs(animateToX - _mainScrollPos.x);\n      var finishAnimDuration;\n\n\n      if (!itemChanged && animateToX > _mainScrollPos.x !== _releaseAnimData.lastFlickSpeed.x > 0) {\n        // \"return to current\" duration, e.g. when dragging from slide 0 to -1\n        finishAnimDuration = 333;\n      } else {\n        finishAnimDuration = Math.abs(_releaseAnimData.lastFlickSpeed.x) > 0 ?\n          animateToDist / Math.abs(_releaseAnimData.lastFlickSpeed.x) :\n          333;\n\n        finishAnimDuration = Math.min(finishAnimDuration, 400);\n        finishAnimDuration = Math.max(finishAnimDuration, 250);\n      }\n\n      if (_currZoomedItemIndex === _currentItemIndex) {\n        itemChanged = false;\n      }\n\n      _mainScrollAnimating = true;\n\n      _shout('mainScrollAnimStart');\n\n      await _animatePropAsync('mainScroll', _mainScrollPos.x, animateToX, finishAnimDuration, framework.easing.cubic.out,\n        _moveMainScroll,\n        async function () {\n          _stopAllAnimations();\n          _mainScrollAnimating = false;\n          _currZoomedItemIndex = -1;\n\n          if (itemChanged || _currZoomedItemIndex !== _currentItemIndex) {\n            await self.updateCurrItemAsync();\n          }\n\n          _shout('mainScrollAnimComplete');\n        }\n      );\n\n      if (itemChanged) {\n        await self.updateCurrItemAsync(true);\n      }\n\n      return itemChanged;\n    },\n\n    _calculateZoomLevel = function (touchesDistance) {\n      return 1 / _startPointsDistance * touchesDistance * _startZoomLevel;\n    },\n\n    // Resets zoom if it's out of bounds\n    _completeZoomGesture = function () {\n      var destZoomLevel = _currZoomLevel,\n        minZoomLevel = _getMinZoomLevel(),\n        maxZoomLevel = _getMaxZoomLevel();\n\n      if (_currZoomLevel < minZoomLevel) {\n        destZoomLevel = minZoomLevel;\n      } else if (_currZoomLevel > maxZoomLevel) {\n        destZoomLevel = maxZoomLevel;\n      }\n\n      var destOpacity = 1,\n        onUpdate,\n        initialOpacity = _bgOpacity;\n\n      if (_opacityChanged && !_isZoomingIn && !_wasOverInitialZoom && _currZoomLevel < minZoomLevel) {\n        //_closedByScroll = true;\n        self.close();\n        return true;\n      }\n\n      if (_opacityChanged) {\n        onUpdate = function (now) {\n          _applyBgOpacity((destOpacity - initialOpacity) * now + initialOpacity);\n        };\n      }\n\n      self.zoomTo(destZoomLevel, 0, 200, framework.easing.cubic.out, onUpdate);\n      return true;\n    };\n\n\n  _registerModule('Gestures', {\n    publicMethods: {\n\n      initGestures: function () {\n\n        // helper function that builds touch/pointer/mouse events\n        var addEventNames = function (pref, down, move, up, cancel) {\n          _dragStartEvent = pref + down;\n          _dragMoveEvent = pref + move;\n          _dragEndEvent = pref + up;\n          if (cancel) {\n            _dragCancelEvent = pref + cancel;\n          } else {\n            _dragCancelEvent = '';\n          }\n        };\n\n        _pointerEventEnabled = _features.pointerEvent;\n        if (_pointerEventEnabled && _features.touch) {\n          // we don't need touch events, if browser supports pointer events\n          _features.touch = false;\n        }\n\n        if (_pointerEventEnabled) {\n          if (navigator.msPointerEnabled) {\n            // IE10 pointer events are case-sensitive\n            addEventNames('MSPointer', 'Down', 'Move', 'Up', 'Cancel');\n          } else {\n            addEventNames('pointer', 'down', 'move', 'up', 'cancel');\n          }\n        } else if (_features.touch) {\n          addEventNames('touch', 'start', 'move', 'end', 'cancel');\n          _likelyTouchDevice = true;\n        } else {\n          addEventNames('mouse', 'down', 'move', 'up');\n        }\n\n        _upMoveEvents = _dragMoveEvent + ' ' + _dragEndEvent + ' ' + _dragCancelEvent;\n        _downEvents = _dragStartEvent;\n\n        if (_pointerEventEnabled && !_likelyTouchDevice) {\n          _likelyTouchDevice = (navigator.maxTouchPoints > 1) || (navigator.msMaxTouchPoints > 1);\n        }\n        // make variable public\n        self.likelyTouchDevice = _likelyTouchDevice;\n\n        _globalEventHandlers[_dragStartEvent] = _onDragStart;\n        _globalEventHandlers[_dragMoveEvent] = _onDragMove;\n        _globalEventHandlers[_dragEndEvent] = _onDragRelease; // the Kraken\n\n        if (_dragCancelEvent) {\n          _globalEventHandlers[_dragCancelEvent] = _globalEventHandlers[_dragEndEvent];\n        }\n\n        // Bind mouse events on device with detected hardware touch support, in case it supports multiple types of input.\n        if (_features.touch) {\n          _downEvents += ' mousedown';\n          _upMoveEvents += ' mousemove mouseup';\n          _globalEventHandlers.mousedown = _globalEventHandlers[_dragStartEvent];\n          _globalEventHandlers.mousemove = _globalEventHandlers[_dragMoveEvent];\n          _globalEventHandlers.mouseup = _globalEventHandlers[_dragEndEvent];\n        }\n\n        if (!_likelyTouchDevice) {\n          // don't allow pan to next slide from zoomed state on Desktop\n          _options.allowPanToNext = false;\n        }\n      }\n\n    }\n  });\n\n\n  /*>>gestures*/\n\n  /*>>show-hide-transition*/\n  /**\n   * show-hide-transition.js:\n   *\n   * Manages initial opening or closing transition.\n   *\n   * If you're not planning to use transition for gallery at all,\n   * you may set options hideAnimationDuration and showAnimationDuration to 0,\n   * and just delete startAnimation function.\n   *\n   */\n\n\n  var _showOrHideTimeout,\n    _showOrHide = function (item, img, out, completeFn) {\n\n      if (_showOrHideTimeout) {\n        clearTimeout(_showOrHideTimeout);\n      }\n\n      _initialZoomRunning = true;\n      _initialContentSet = true;\n\n      // dimensions of small thumbnail {x:,y:,w:}.\n      // Height is optional, as calculated based on large image.\n      var thumbBounds;\n      if (item.initialLayout) {\n        thumbBounds = item.initialLayout;\n        item.initialLayout = null;\n      } else {\n        thumbBounds = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\n      }\n\n      var duration = out ? _options.hideAnimationDuration : _options.showAnimationDuration;\n\n      var onComplete = function () {\n        _stopAnimation('initialZoom');\n        if (!out) {\n          _applyBgOpacity(1);\n          if (img) {\n            img.style.display = 'block';\n          }\n          framework.addClass(template, 'pswp--animated-in');\n          _shout('initialZoom' + (out ? 'OutEnd' : 'InEnd'));\n        } else {\n          self.template.removeAttribute('style');\n          self.bg.removeAttribute('style');\n        }\n\n        if (completeFn) {\n          completeFn();\n        }\n        _initialZoomRunning = false;\n      };\n\n      // if bounds aren't provided, just open gallery without animation\n      if (!duration || !thumbBounds || thumbBounds.x === undefined) {\n\n        _shout('initialZoom' + (out ? 'Out' : 'In'));\n\n        _currZoomLevel = item.initialZoomLevel;\n        _equalizePoints(_panOffset, item.initialPosition);\n        _applyCurrentZoomPan();\n\n        template.style.opacity = out ? 0 : 1;\n        _applyBgOpacity(1);\n\n        if (duration) {\n          setTimeout(function () {\n            onComplete();\n          }, duration);\n        } else {\n          onComplete();\n        }\n\n        return;\n      }\n\n      var startAnimation = function () {\n        var closeWithRaf = _closedByScroll,\n          fadeEverything = !self.currItem.src || self.currItem.loadError || _options.showHideOpacity;\n\n        // apply hw-acceleration to image\n        if (item.miniImg) {\n          item.miniImg.style.webkitBackfaceVisibility = 'hidden';\n        }\n\n        if (!out) {\n          _currZoomLevel = thumbBounds.w / item.w;\n          _panOffset.x = thumbBounds.x;\n          _panOffset.y = thumbBounds.y - _initalWindowScrollY;\n\n          self[fadeEverything ? 'template' : 'bg'].style.opacity = 0.001;\n          _applyCurrentZoomPan();\n        }\n\n        _registerStartAnimation('initialZoom');\n\n        if (out && !closeWithRaf) {\n          framework.removeClass(template, 'pswp--animated-in');\n        }\n\n        if (fadeEverything) {\n          if (out) {\n            framework[(closeWithRaf ? 'remove' : 'add') + 'Class'](template, 'pswp--animate_opacity');\n          } else {\n            setTimeout(function () {\n              framework.addClass(template, 'pswp--animate_opacity');\n            }, 30);\n          }\n        }\n\n        _showOrHideTimeout = setTimeout(function () {\n\n          _shout('initialZoom' + (out ? 'Out' : 'In'));\n\n\n          if (!out) {\n\n            // \"in\" animation always uses CSS transitions (instead of rAF).\n            // CSS transition work faster here,\n            // as developer may also want to animate other things,\n            // like ui on top of sliding area, which can be animated just via CSS\n\n            _currZoomLevel = item.initialZoomLevel;\n            _equalizePoints(_panOffset, item.initialPosition);\n            _applyCurrentZoomPan();\n            _applyBgOpacity(1);\n\n            if (fadeEverything) {\n              template.style.opacity = 1;\n            } else {\n              _applyBgOpacity(1);\n            }\n\n            _showOrHideTimeout = setTimeout(onComplete, duration + 20);\n          } else {\n\n            // \"out\" animation uses rAF only when PhotoSwipe is closed by browser scroll, to recalculate position\n            var destZoomLevel = thumbBounds.w / item.w,\n              initialPanOffset = {\n                x: _panOffset.x,\n                y: _panOffset.y\n              },\n              initialZoomLevel = _currZoomLevel,\n              initalBgOpacity = _bgOpacity,\n              onUpdate = function (now) {\n\n                if (now === 1) {\n                  _currZoomLevel = destZoomLevel;\n                  _panOffset.x = thumbBounds.x;\n                  _panOffset.y = thumbBounds.y - _currentWindowScrollY;\n                } else {\n                  _currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\n                  _panOffset.x = (thumbBounds.x - initialPanOffset.x) * now + initialPanOffset.x;\n                  _panOffset.y = (thumbBounds.y - _currentWindowScrollY - initialPanOffset.y) * now + initialPanOffset.y;\n                }\n\n                _applyCurrentZoomPan();\n                if (fadeEverything) {\n                  template.style.opacity = 1 - now;\n                } else {\n                  _applyBgOpacity(initalBgOpacity - now * initalBgOpacity);\n                }\n              };\n\n            if (closeWithRaf) {\n              _animateProp('initialZoom', 0, 1, duration, framework.easing.cubic.out, onUpdate, onComplete);\n            } else {\n              onUpdate(1);\n              _showOrHideTimeout = setTimeout(onComplete, duration + 20);\n            }\n          }\n\n        }, out ? 25 : 90); // Main purpose of this delay is to give browser time to paint and\n        // create composite layers of PhotoSwipe UI parts (background, controls, caption, arrows).\n        // Which avoids lag at the beginning of scale transition.\n      };\n      startAnimation();\n\n\n    };\n\n  /*>>show-hide-transition*/\n\n  /*>>items-controller*/\n  /**\n   *\n   * Controller manages gallery items, their dimensions, and their content.\n   *\n   */\n\n  var _items,\n    _tempPanAreaSize = {},\n    _imagesToAppendPool = [],\n    _initialContentSet,\n    _initialZoomRunning,\n    _controllerDefaultOptions = {\n      index: 0,\n      errorMsg: '<div class=\"pswp__error-msg\"><a href=\"%url%\" target=\"_blank\">The image</a> could not be loaded.</div>',\n      forceProgressiveLoading: false, // TODO\n      preload: [1, 1],\n      getNumItemsFn: function () {\n        return _items.length;\n      }\n    };\n\n\n  var _getItemAt,\n    _getNumItems,\n    _initialIsLoop,\n    _getZeroBounds = function () {\n      return {\n        center: {x: 0, y: 0},\n        max: {x: 0, y: 0},\n        min: {x: 0, y: 0}\n      };\n    },\n    _calculateSingleItemPanBounds = function (item, realPanElementW, realPanElementH) {\n      var bounds = item.bounds;\n\n      // position of element when it's centered\n      bounds.center.x = Math.round((_tempPanAreaSize.x - realPanElementW) / 2);\n      bounds.center.y = Math.round((_tempPanAreaSize.y - realPanElementH) / 2) + item.vGap.top;\n\n      // maximum pan position\n      bounds.max.x = (realPanElementW > _tempPanAreaSize.x) ?\n        Math.round(_tempPanAreaSize.x - realPanElementW) :\n        bounds.center.x;\n\n      bounds.max.y = (realPanElementH > _tempPanAreaSize.y) ?\n        Math.round(_tempPanAreaSize.y - realPanElementH) + item.vGap.top :\n        bounds.center.y;\n\n      // minimum pan position\n      bounds.min.x = (realPanElementW > _tempPanAreaSize.x) ? 0 : bounds.center.x;\n      bounds.min.y = (realPanElementH > _tempPanAreaSize.y) ? item.vGap.top : bounds.center.y;\n    },\n    _calculateItemSize = function (item, viewportSize, zoomLevel) {\n\n      if (item.src && !item.loadError) {\n        var isInitial = !zoomLevel;\n\n        if (isInitial) {\n          if (!item.vGap) {\n            item.vGap = {top: 0, bottom: 0};\n          }\n          // allows overriding vertical margin for individual items\n          _shout('parseVerticalMargin', item);\n        }\n\n\n        _tempPanAreaSize.x = viewportSize.x;\n        _tempPanAreaSize.y = viewportSize.y - item.vGap.top - item.vGap.bottom;\n\n        if (isInitial) {\n          var hRatio = _tempPanAreaSize.x / item.w;\n          var vRatio = _tempPanAreaSize.y / item.h;\n\n          item.fitRatio = hRatio < vRatio ? hRatio : vRatio;\n          //item.fillRatio = hRatio > vRatio ? hRatio : vRatio;\n\n          var scaleMode = _options.scaleMode;\n\n          if (scaleMode === 'orig') {\n            zoomLevel = 1;\n          } else if (scaleMode === 'fit') {\n            zoomLevel = item.fitRatio;\n          }\n\n          if (zoomLevel > 1) {\n            zoomLevel = 1;\n          }\n\n          item.initialZoomLevel = zoomLevel;\n\n          if (!item.bounds) {\n            // reuse bounds object\n            item.bounds = _getZeroBounds();\n          }\n        }\n\n        if (!zoomLevel) {\n          return;\n        }\n\n        _calculateSingleItemPanBounds(item, item.w * zoomLevel, item.h * zoomLevel);\n\n        if (isInitial && zoomLevel === item.initialZoomLevel) {\n          item.initialPosition = item.bounds.center;\n        }\n\n        return item.bounds;\n      } else {\n        item.w = item.h = 0;\n        item.initialZoomLevel = item.fitRatio = 1;\n        item.bounds = _getZeroBounds();\n        item.initialPosition = item.bounds.center;\n\n        // if it's not image, we return zero bounds (content is not zoomable)\n        return item.bounds;\n      }\n\n    },\n\n\n    _appendImage = function (index, item, baseDiv, img, preventAnimation, keepPlaceholder) {\n\n\n      if (item.loadError) {\n        return;\n      }\n\n      if (img) {\n\n        item.imageAppended = true;\n        _setImageSize(item, img, (item === self.currItem && _renderMaxResolution));\n\n        baseDiv.appendChild(img);\n\n        if (keepPlaceholder) {\n          setTimeout(function () {\n            if (item && item.loaded && item.placeholder) {\n              item.placeholder.style.display = 'none';\n              item.placeholder = null;\n            }\n          }, 500);\n        }\n      }\n    },\n\n\n    _preloadImage = function (item) {\n      item.loading = true;\n      item.loaded = false;\n      var img = item.img = framework.createEl('pswp__img', 'img');\n      var onComplete = function () {\n        item.loading = false;\n        item.loaded = true;\n\n        if (item.loadComplete) {\n          item.loadComplete(item);\n        } else {\n          item.img = null; // no need to store image object\n        }\n        img.onload = img.onerror = null;\n        img = null;\n      };\n      img.onload = onComplete;\n      img.onerror = function () {\n        item.loadError = true;\n        onComplete();\n      };\n\n      img.src = item.src;// + '?a=' + Math.random();\n\n      return img;\n    },\n    _checkForError = function (item, cleanUp) {\n      if (item.src && item.loadError && item.container) {\n\n        if (cleanUp) {\n          item.container.innerHTML = '';\n        }\n\n        item.container.innerHTML = _options.errorMsg.replace('%url%', item.src);\n        return true;\n\n      }\n    },\n    _setImageSize = function (item, img, maxRes) {\n      if (!item.src) {\n        return;\n      }\n\n      if (!img) {\n        img = item.container.lastChild;\n      }\n\n      var w = maxRes ? item.w : Math.round(item.w * item.fitRatio),\n        h = maxRes ? item.h : Math.round(item.h * item.fitRatio);\n\n      if (item.placeholder && !item.loaded) {\n        item.placeholder.style.width = w + 'px';\n        item.placeholder.style.height = h + 'px';\n      }\n\n      img.style.width = w + 'px';\n      img.style.height = h + 'px';\n    },\n    _appendImagesPool = function () {\n\n      if (_imagesToAppendPool.length) {\n        var poolItem;\n\n        for (var i = 0; i < _imagesToAppendPool.length; i++) {\n          poolItem = _imagesToAppendPool[i];\n          if (poolItem.holder.index === poolItem.index) {\n            _appendImage(poolItem.index, poolItem.item, poolItem.baseDiv, poolItem.img, false, poolItem.clearPlaceholder);\n          }\n        }\n        _imagesToAppendPool = [];\n      }\n    };\n\n\n  _registerModule('Controller', {\n\n    publicMethods: {\n\n      lazyLoadItem: function (index) {\n        index = _getLoopedId(index);\n        var item = _getItemAt(index);\n\n        if (!item || ((item.loaded || item.loading) && !_itemsNeedUpdate)) {\n          return;\n        }\n\n        _shout('gettingData', index, item);\n        if (!item.src) {\n          return;\n        }\n\n        _preloadImage(item);\n      },\n      initController: function () {\n        framework.extend(_options, _controllerDefaultOptions, true);\n        self.items = _items = items;\n        _getItemAt = self.getItemAt;\n        _getNumItems = _options.getNumItemsFn; //self.getNumItems;\n\n\n        _initialIsLoop = _options.loop;\n        if (_getNumItems() < 3) {\n          _options.loop = false; // disable loop if less then 3 items\n        }\n\n        _listen('beforeChange', function (diff) {\n\n          var p = _options.preload,\n            isNext = diff === null ? true : (diff >= 0),\n            preloadBefore = Math.min(p[0], _getNumItems()),\n            preloadAfter = Math.min(p[1], _getNumItems()),\n            i;\n\n\n          for (i = 1; i <= (isNext ? preloadAfter : preloadBefore); i++) {\n            self.lazyLoadItem(_currentItemIndex + i);\n          }\n          for (i = 1; i <= (isNext ? preloadBefore : preloadAfter); i++) {\n            self.lazyLoadItem(_currentItemIndex - i);\n          }\n        });\n\n        _listen('initialLayout', function () {\n          self.currItem.initialLayout = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\n        });\n\n        _listen('mainScrollAnimComplete', _appendImagesPool);\n        _listen('initialZoomInEnd', _appendImagesPool);\n\n\n        _listen('destroy', function () {\n          var item;\n          for (var i = 0; i < _items.length; i++) {\n            item = _items[i];\n            // remove reference to DOM elements, for GC\n            if (item.container) {\n              item.container = null;\n            }\n            if (item.placeholder) {\n              item.placeholder = null;\n            }\n            if (item.img) {\n              item.img = null;\n            }\n            if (item.preloader) {\n              item.preloader = null;\n            }\n            if (item.loadError) {\n              item.loaded = item.loadError = false;\n            }\n          }\n          _imagesToAppendPool = null;\n        });\n      },\n\n\n      getItemAt: function (index) {\n        if (index >= 0) {\n          return _items[index] !== undefined ? _items[index] : false;\n        }\n        return false;\n      },\n\n      allowProgressiveImg: function () {\n        // 1. Progressive image loading isn't working on webkit/blink\n        //    when hw-acceleration (e.g. translateZ) is applied to IMG element.\n        //    That's why in PhotoSwipe parent element gets zoom transform, not image itself.\n        //\n        // 2. Progressive image loading sometimes blinks in webkit/blink when applying animation to parent element.\n        //    That's why it's disabled on touch devices (mainly because of swipe transition)\n        //\n        // 3. Progressive image loading sometimes doesn't work in IE (up to 11).\n\n        // Don't allow progressive loading on non-large touch devices\n        return _options.forceProgressiveLoading || !_likelyTouchDevice || _options.mouseUsed || screen.width > 1200;\n        // 1200 - to eliminate touch devices with large screen (like Chromebook Pixel)\n      },\n\n      setContent: function (holder, index) {\n\n        if (_options.loop) {\n          index = _getLoopedId(index);\n        }\n\n        var prevItem = self.getItemAt(holder.index);\n        if (prevItem) {\n          prevItem.container = null;\n        }\n\n        var item = self.getItemAt(index),\n          img;\n\n        if (!item) {\n          holder.el.innerHTML = '';\n          return;\n        }\n\n        // allow to override data\n        _shout('gettingData', index, item);\n        //console.log(\"gettedData\", index);\n\n        holder.index = index;\n        holder.item = item;\n\n        // base container DIV is created only once for each of 3 holders\n        var baseDiv = item.container = framework.createEl('pswp__zoom-wrap');\n\n\n        if (!item.src && item.html) {\n          if (item.html.tagName) {\n            baseDiv.appendChild(item.html);\n          } else {\n            baseDiv.innerHTML = item.html;\n          }\n        }\n\n        _checkForError(item);\n\n        _calculateItemSize(item, _viewportSize);\n\n        if (item.src && !item.loadError && !item.loaded) {\n\n          item.loadComplete = function (item) {\n\n            // gallery closed before image finished loading\n            if (!_isOpen) {\n              return;\n            }\n\n            // check if holder hasn't changed while image was loading\n            if (holder && holder.index === index) {\n              if (_checkForError(item, true)) {\n                item.loadComplete = item.img = null;\n                _calculateItemSize(item, _viewportSize);\n                _applyZoomPanToItem(item);\n\n                if (holder.index === _currentItemIndex) {\n                  // recalculate dimensions\n                  self.updateCurrZoomItem();\n                }\n                return;\n              }\n              if (!item.imageAppended) {\n                if (_features.transform && (_mainScrollAnimating || _initialZoomRunning)) {\n                  _imagesToAppendPool.push({\n                    item: item,\n                    baseDiv: baseDiv,\n                    img: item.img,\n                    index: index,\n                    holder: holder,\n                    clearPlaceholder: true\n                  });\n                } else {\n                  _appendImage(index, item, baseDiv, item.img, _mainScrollAnimating || _initialZoomRunning, true);\n                }\n              } else {\n                // remove preloader & mini-img\n                if (!_initialZoomRunning && item.placeholder) {\n                  item.placeholder.style.display = 'none';\n                  item.placeholder = null;\n                }\n              }\n            }\n\n            item.loadComplete = null;\n            item.img = null; // no need to store image element after it's added\n\n            _shout('imageLoadComplete', index, item);\n          };\n\n          if (framework.features.transform) {\n\n            var placeholderClassName = 'pswp__img pswp__img--placeholder';\n            placeholderClassName += (item.msrc ? '' : ' pswp__img--placeholder--blank');\n\n            var placeholder = framework.createEl(placeholderClassName, item.msrc ? 'img' : '');\n            if (item.msrc) {\n              placeholder.src = item.msrc;\n            }\n\n            _setImageSize(item, placeholder);\n\n            baseDiv.appendChild(placeholder);\n            item.placeholder = placeholder;\n\n          }\n\n\n          if (!item.loading) {\n            _preloadImage(item);\n          }\n\n\n          if (self.allowProgressiveImg()) {\n            // just append image\n            if (!_initialContentSet && _features.transform) {\n              _imagesToAppendPool.push({\n                item: item,\n                baseDiv: baseDiv,\n                img: item.img,\n                index: index,\n                holder: holder\n              });\n            } else {\n              _appendImage(index, item, baseDiv, item.img, true, true);\n            }\n          }\n\n        } else if (item.src && !item.loadError) {\n          // image object is created every time, due to bugs of image loading & delay when switching images\n          img = framework.createEl('pswp__img', 'img');\n          img.style.opacity = 1;\n          img.src = item.src;\n          _setImageSize(item, img);\n          _appendImage(index, item, baseDiv, img, true);\n        }\n\n\n        if (!_initialContentSet && index === _currentItemIndex) {\n          _currZoomElementStyle = baseDiv.style;\n          _showOrHide(item, (img || item.img));\n        } else {\n          _applyZoomPanToItem(item);\n        }\n\n        holder.el.innerHTML = '';\n        holder.el.appendChild(baseDiv);\n      },\n      setContentAsync: async function (holder, index) {\n\n        if (_options.loop) {\n          index = _getLoopedId(index);\n        }\n\n        var prevItem = self.getItemAt(holder.index);\n        if (prevItem) {\n          prevItem.container = null;\n        }\n\n        var item = self.getItemAt(index),\n          img;\n\n        if (!item) {\n          holder.el.innerHTML = '';\n          return;\n        }\n\n        // allow to override data\n        await _shoutAsync('gettingData', index, item);\n        //console.log(\"async gettedData\", index);\n\n        holder.index = index;\n        holder.item = item;\n\n        // base container DIV is created only once for each of 3 holders\n        var baseDiv = item.container = framework.createEl('pswp__zoom-wrap');\n\n\n        if (!item.src && item.html) {\n          if (item.html.tagName) {\n            baseDiv.appendChild(item.html);\n          } else {\n            baseDiv.innerHTML = item.html;\n          }\n        }\n\n        _checkForError(item);\n\n        _calculateItemSize(item, _viewportSize);\n\n        if (item.src && !item.loadError && !item.loaded) {\n\n          item.loadComplete = function (item) {\n\n            // gallery closed before image finished loading\n            if (!_isOpen) {\n              return;\n            }\n\n            // check if holder hasn't changed while image was loading\n            if (holder && holder.index === index) {\n              if (_checkForError(item, true)) {\n                item.loadComplete = item.img = null;\n                _calculateItemSize(item, _viewportSize);\n                _applyZoomPanToItem(item);\n\n                if (holder.index === _currentItemIndex) {\n                  // recalculate dimensions\n                  self.updateCurrZoomItem();\n                }\n                return;\n              }\n              if (!item.imageAppended) {\n                if (_features.transform && (_mainScrollAnimating || _initialZoomRunning)) {\n                  _imagesToAppendPool.push({\n                    item: item,\n                    baseDiv: baseDiv,\n                    img: item.img,\n                    index: index,\n                    holder: holder,\n                    clearPlaceholder: true\n                  });\n                } else {\n                  _appendImage(index, item, baseDiv, item.img, _mainScrollAnimating || _initialZoomRunning, true);\n                }\n              } else {\n                // remove preloader & mini-img\n                if (!_initialZoomRunning && item.placeholder) {\n                  item.placeholder.style.display = 'none';\n                  item.placeholder = null;\n                }\n              }\n            }\n\n            item.loadComplete = null;\n            item.img = null; // no need to store image element after it's added\n\n            _shout('imageLoadComplete', index, item);\n          };\n\n          if (framework.features.transform) {\n\n            var placeholderClassName = 'pswp__img pswp__img--placeholder';\n            placeholderClassName += (item.msrc ? '' : ' pswp__img--placeholder--blank');\n\n            var placeholder = framework.createEl(placeholderClassName, item.msrc ? 'img' : '');\n            if (item.msrc) {\n              placeholder.src = item.msrc;\n            }\n\n            _setImageSize(item, placeholder);\n\n            baseDiv.appendChild(placeholder);\n            item.placeholder = placeholder;\n\n          }\n\n\n          if (!item.loading) {\n            _preloadImage(item);\n          }\n\n\n          if (self.allowProgressiveImg()) {\n            // just append image\n            if (!_initialContentSet && _features.transform) {\n              _imagesToAppendPool.push({\n                item: item,\n                baseDiv: baseDiv,\n                img: item.img,\n                index: index,\n                holder: holder\n              });\n            } else {\n              _appendImage(index, item, baseDiv, item.img, true, true);\n            }\n          }\n\n        } else if (item.src && !item.loadError) {\n          // image object is created every time, due to bugs of image loading & delay when switching images\n          img = framework.createEl('pswp__img', 'img');\n          img.style.opacity = 1;\n          img.src = item.src;\n          _setImageSize(item, img);\n          _appendImage(index, item, baseDiv, img, true);\n        }\n\n\n        if (!_initialContentSet && index === _currentItemIndex) {\n          _currZoomElementStyle = baseDiv.style;\n          _showOrHide(item, (img || item.img));\n        } else {\n          _applyZoomPanToItem(item);\n        }\n\n        holder.el.innerHTML = '';\n        holder.el.appendChild(baseDiv);\n      },\n      cleanSlide: function (item) {\n        if (item.img) {\n          item.img.onload = item.img.onerror = null;\n        }\n        item.loaded = item.loading = item.img = item.imageAppended = false;\n      }\n\n    }\n  });\n\n  /*>>items-controller*/\n\n  /*>>tap*/\n  /**\n   * tap.js:\n   *\n   * Displatches tap and double-tap events.\n   *\n   */\n\n  var tapTimer,\n    tapReleasePoint = {},\n    _dispatchTapEvent = function (origEvent, releasePoint, pointerType) {\n      var e = document.createEvent('CustomEvent'),\n        eDetail = {\n          origEvent: origEvent,\n          target: origEvent.target,\n          releasePoint: releasePoint,\n          pointerType: pointerType || 'touch'\n        };\n\n      e.initCustomEvent('pswpTap', true, true, eDetail);\n      origEvent.target.dispatchEvent(e);\n    };\n\n  _registerModule('Tap', {\n    publicMethods: {\n      initTap: function () {\n        _listen('firstTouchStart', self.onTapStart);\n        _listen('touchRelease', self.onTapRelease);\n        _listen('destroy', function () {\n          tapReleasePoint = {};\n          tapTimer = null;\n        });\n      },\n      onTapStart: function (touchList) {\n        if (touchList.length > 1) {\n          clearTimeout(tapTimer);\n          tapTimer = null;\n        }\n      },\n      onTapRelease: function (e, releasePoint) {\n        if (!releasePoint) {\n          return;\n        }\n\n        if (!_moved && !_isMultitouch && !_numAnimations) {\n          var p0 = releasePoint;\n          if (tapTimer) {\n            clearTimeout(tapTimer);\n            tapTimer = null;\n\n            // Check if taped on the same place\n            if (_isNearbyPoints(p0, tapReleasePoint)) {\n              _shout('doubleTap', p0);\n              return;\n            }\n          }\n\n          if (releasePoint.type === 'mouse') {\n            _dispatchTapEvent(e, releasePoint, 'mouse');\n            return;\n          }\n\n          var clickedTagName = e.target.tagName.toUpperCase();\n          // avoid double tap delay on buttons and elements that have class pswp__single-tap\n          if (clickedTagName === 'BUTTON' || framework.hasClass(e.target, 'pswp__single-tap')) {\n            _dispatchTapEvent(e, releasePoint);\n            return;\n          }\n\n          _equalizePoints(tapReleasePoint, p0);\n\n          tapTimer = setTimeout(function () {\n            _dispatchTapEvent(e, releasePoint);\n            tapTimer = null;\n          }, 300);\n        }\n      }\n    }\n  });\n\n  /*>>tap*/\n\n  /*>>desktop-zoom*/\n  /**\n   *\n   * desktop-zoom.js:\n   *\n   * - Binds mousewheel event for paning zoomed image.\n   * - Manages \"dragging\", \"zoomed-in\", \"zoom-out\" classes.\n   *   (which are used for cursors and zoom icon)\n   * - Adds toggleDesktopZoom function.\n   *\n   */\n\n  var _wheelDelta;\n\n  _registerModule('DesktopZoom', {\n\n    publicMethods: {\n\n      initDesktopZoom: function () {\n\n        if (_oldIE) {\n          // no zoom for old IE (<=8)\n          return;\n        }\n\n        if (_likelyTouchDevice) {\n          // if detected hardware touch support, we wait until mouse is used,\n          // and only then apply desktop-zoom features\n          _listen('mouseUsed', function () {\n            self.setupDesktopZoom();\n          });\n        } else {\n          self.setupDesktopZoom(true);\n        }\n\n      },\n\n      setupDesktopZoom: function (onInit) {\n\n        _wheelDelta = {};\n\n        var events = 'wheel mousewheel DOMMouseScroll';\n\n        _listen('bindEvents', function () {\n          framework.bind(template, events, self.handleMouseWheel);\n        });\n\n        _listen('unbindEvents', function () {\n          if (_wheelDelta) {\n            framework.unbind(template, events, self.handleMouseWheel);\n          }\n        });\n\n        self.mouseZoomedIn = false;\n\n        var hasDraggingClass,\n          updateZoomable = function () {\n            if (self.mouseZoomedIn) {\n              framework.removeClass(template, 'pswp--zoomed-in');\n              self.mouseZoomedIn = false;\n            }\n            if (_currZoomLevel < 1) {\n              framework.addClass(template, 'pswp--zoom-allowed');\n            } else {\n              framework.removeClass(template, 'pswp--zoom-allowed');\n            }\n            removeDraggingClass();\n          },\n          removeDraggingClass = function () {\n            if (hasDraggingClass) {\n              framework.removeClass(template, 'pswp--dragging');\n              hasDraggingClass = false;\n            }\n          };\n\n        _listen('resize', updateZoomable);\n        _listen('afterChange', updateZoomable);\n        _listen('pointerDown', function () {\n          if (self.mouseZoomedIn) {\n            hasDraggingClass = true;\n            framework.addClass(template, 'pswp--dragging');\n          }\n        });\n        _listen('pointerUp', removeDraggingClass);\n\n        if (!onInit) {\n          updateZoomable();\n        }\n\n      },\n\n      handleMouseWheel: function (e) {\n\n        if (_currZoomLevel <= self.currItem.fitRatio) {\n          if (_options.modal) {\n\n            if (!_options.closeOnScroll || _numAnimations || _isDragging) {\n              e.preventDefault();\n            } else if (_transformKey && Math.abs(e.deltaY) > 2) {\n              // close PhotoSwipe\n              // if browser supports transforms & scroll changed enough\n              _closedByScroll = true;\n              self.close();\n            }\n\n          }\n          return true;\n        }\n\n        // allow just one event to fire\n        e.stopPropagation();\n\n        // https://developer.mozilla.org/en-US/docs/Web/Events/wheel\n        _wheelDelta.x = 0;\n\n        if ('deltaX' in e) {\n          if (e.deltaMode === 1 /* DOM_DELTA_LINE */) {\n            // 18 - average line height\n            _wheelDelta.x = e.deltaX * 18;\n            _wheelDelta.y = e.deltaY * 18;\n          } else {\n            _wheelDelta.x = e.deltaX;\n            _wheelDelta.y = e.deltaY;\n          }\n        } else if ('wheelDelta' in e) {\n          if (e.wheelDeltaX) {\n            _wheelDelta.x = -0.16 * e.wheelDeltaX;\n          }\n          if (e.wheelDeltaY) {\n            _wheelDelta.y = -0.16 * e.wheelDeltaY;\n          } else {\n            _wheelDelta.y = -0.16 * e.wheelDelta;\n          }\n        } else if ('detail' in e) {\n          _wheelDelta.y = e.detail;\n        } else {\n          return;\n        }\n\n        _calculatePanBounds(_currZoomLevel, true);\n\n        var newPanX = _panOffset.x - _wheelDelta.x,\n          newPanY = _panOffset.y - _wheelDelta.y;\n\n        // only prevent scrolling in nonmodal mode when not at edges\n        if (_options.modal ||\n          (\n            newPanX <= _currPanBounds.min.x && newPanX >= _currPanBounds.max.x &&\n            newPanY <= _currPanBounds.min.y && newPanY >= _currPanBounds.max.y\n          )) {\n          e.preventDefault();\n        }\n\n        // TODO: use rAF instead of mousewheel?\n        self.panTo(newPanX, newPanY);\n      },\n\n      toggleDesktopZoom: function (centerPoint) {\n        centerPoint = centerPoint || {\n          x: _viewportSize.x / 2 + _offset.x,\n          y: _viewportSize.y / 2 + _offset.y\n        };\n\n        var doubleTapZoomLevel = _options.getDoubleTapZoom(true, self.currItem);\n        var zoomOut = _currZoomLevel === doubleTapZoomLevel;\n\n        self.mouseZoomedIn = !zoomOut;\n\n        self.zoomTo(zoomOut ? self.currItem.initialZoomLevel : doubleTapZoomLevel, centerPoint, 333);\n        framework[(!zoomOut ? 'add' : 'remove') + 'Class'](template, 'pswp--zoomed-in');\n      }\n\n    }\n  });\n\n\n  /*>>desktop-zoom*/\n\n  /*>>history*/\n  /**\n   *\n   * history.js:\n   *\n   * - Back button to close gallery.\n   *\n   * - Unique URL for each slide: example.com/&pid=1&gid=3\n   *   (where PID is picture index, and GID and gallery index)\n   *\n   * - Switch URL when slides change.\n   *\n   */\n\n\n  var _historyDefaultOptions = {\n    history: true,\n    galleryUID: 1\n  };\n\n  var _historyUpdateTimeout,\n    _hashChangeTimeout,\n    _hashAnimCheckTimeout,\n    _hashChangedByScript,\n    _hashChangedByHistory,\n    _hashReseted,\n    _initialHash,\n    _historyChanged,\n    _closedFromURL,\n    _urlChangedOnce,\n    _windowLoc,\n\n    _supportsPushState,\n\n    _getHash = function () {\n      return _windowLoc.hash.substring(1);\n    },\n    _cleanHistoryTimeouts = function () {\n\n      if (_historyUpdateTimeout) {\n        clearTimeout(_historyUpdateTimeout);\n      }\n\n      if (_hashAnimCheckTimeout) {\n        clearTimeout(_hashAnimCheckTimeout);\n      }\n    },\n\n    // pid - Picture index\n    // gid - Gallery index\n    _parseItemIndexFromURL = function () {\n      var hash = _getHash(),\n        params = {};\n\n      if (hash.length < 5) { // pid=1\n        return params;\n      }\n\n      var i, vars = hash.split('&');\n      for (i = 0; i < vars.length; i++) {\n        if (!vars[i]) {\n          continue;\n        }\n        var pair = vars[i].split('=');\n        if (pair.length < 2) {\n          continue;\n        }\n        params[pair[0]] = pair[1];\n      }\n      if (_options.galleryPIDs) {\n        // detect custom pid in hash and search for it among the items collection\n        var searchfor = params.pid;\n        params.pid = 0; // if custom pid cannot be found, fallback to the first item\n        for (i = 0; i < _items.length; i++) {\n          if (_items[i].pid === searchfor) {\n            params.pid = i;\n            break;\n          }\n        }\n      } else {\n        params.pid = parseInt(params.pid, 10) - 1;\n      }\n      if (params.pid < 0) {\n        params.pid = 0;\n      }\n      return params;\n    },\n    _updateHash = function () {\n\n      if (_hashAnimCheckTimeout) {\n        clearTimeout(_hashAnimCheckTimeout);\n      }\n\n\n      if (_numAnimations || _isDragging) {\n        // changing browser URL forces layout/paint in some browsers, which causes noticable lag during animation\n        // that's why we update hash only when no animations running\n        _hashAnimCheckTimeout = setTimeout(_updateHash, 500);\n        return;\n      }\n\n      if (_hashChangedByScript) {\n        clearTimeout(_hashChangeTimeout);\n      } else {\n        _hashChangedByScript = true;\n      }\n\n\n      var pid = (_currentItemIndex + 1);\n      var item = _getItemAt(_currentItemIndex);\n      if (item.hasOwnProperty('pid')) {\n        // carry forward any custom pid assigned to the item\n        pid = item.pid;\n      }\n      var newHash = _initialHash + '&' + 'gid=' + _options.galleryUID + '&' + 'pid=' + pid;\n\n      if (!_historyChanged) {\n        if (_windowLoc.hash.indexOf(newHash) === -1) {\n          _urlChangedOnce = true;\n        }\n        // first time - add new hisory record, then just replace\n      }\n\n      var newURL = _windowLoc.href.split('#')[0] + '#' + newHash;\n\n      if (_supportsPushState) {\n\n        if ('#' + newHash !== window.location.hash) {\n          history[_historyChanged ? 'replaceState' : 'pushState']('', document.title, newURL);\n        }\n\n      } else {\n        if (_historyChanged) {\n          _windowLoc.replace(newURL);\n        } else {\n          _windowLoc.hash = newHash;\n        }\n      }\n\n\n      _historyChanged = true;\n      _hashChangeTimeout = setTimeout(function () {\n        _hashChangedByScript = false;\n      }, 60);\n    };\n\n\n  _registerModule('History', {\n\n\n    publicMethods: {\n      initHistory: function () {\n\n        framework.extend(_options, _historyDefaultOptions, true);\n\n        if (!_options.history) {\n          return;\n        }\n\n\n        _windowLoc = window.location;\n        _urlChangedOnce = false;\n        _closedFromURL = false;\n        _historyChanged = false;\n        _initialHash = _getHash();\n        _supportsPushState = ('pushState' in history);\n\n\n        if (_initialHash.indexOf('gid=') > -1) {\n          _initialHash = _initialHash.split('&gid=')[0];\n          _initialHash = _initialHash.split('?gid=')[0];\n        }\n\n\n        _listen('afterChange', self.updateURL);\n        _listen('unbindEvents', function () {\n          framework.unbind(window, 'hashchange', self.onHashChange);\n        });\n\n\n        var returnToOriginal = function () {\n          _hashReseted = true;\n          if (!_closedFromURL) {\n\n            if (_urlChangedOnce) {\n              history.back();\n            } else {\n\n              if (_initialHash) {\n                _windowLoc.hash = _initialHash;\n              } else {\n                if (_supportsPushState) {\n\n                  // remove hash from url without refreshing it or scrolling to top\n                  history.pushState('', document.title, _windowLoc.pathname + _windowLoc.search);\n                } else {\n                  _windowLoc.hash = '';\n                }\n              }\n            }\n\n          }\n\n          _cleanHistoryTimeouts();\n        };\n\n\n        _listen('unbindEvents', function () {\n          if (_closedByScroll) {\n            // if PhotoSwipe is closed by scroll, we go \"back\" before the closing animation starts\n            // this is done to keep the scroll position\n            returnToOriginal();\n          }\n        });\n        _listen('destroy', function () {\n          if (!_hashReseted) {\n            returnToOriginal();\n          }\n        });\n        _listen('firstUpdate', function () {\n          _currentItemIndex = _parseItemIndexFromURL().pid;\n        });\n\n\n        var index = _initialHash.indexOf('pid=');\n        if (index > -1) {\n          _initialHash = _initialHash.substring(0, index);\n          if (_initialHash.slice(-1) === '&') {\n            _initialHash = _initialHash.slice(0, -1);\n          }\n        }\n\n\n        setTimeout(function () {\n          if (_isOpen) { // hasn't destroyed yet\n            framework.bind(window, 'hashchange', self.onHashChange);\n          }\n        }, 40);\n\n      },\n      onHashChange: function () {\n\n        if (_getHash() === _initialHash) {\n\n          _closedFromURL = true;\n          self.close();\n          return;\n        }\n        if (!_hashChangedByScript) {\n\n          _hashChangedByHistory = true;\n          self.goTo(_parseItemIndexFromURL().pid);\n          _hashChangedByHistory = false;\n        }\n\n      },\n      updateURL: function () {\n\n        // Delay the update of URL, to avoid lag during transition,\n        // and to not to trigger actions like \"refresh page sound\" or \"blinking favicon\" to often\n\n        _cleanHistoryTimeouts();\n\n\n        if (_hashChangedByHistory) {\n          return;\n        }\n\n        if (!_historyChanged) {\n          _updateHash(); // first time\n        } else {\n          _historyUpdateTimeout = setTimeout(_updateHash, 800);\n        }\n      }\n\n    }\n  });\n\n\n  /*>>history*/\n  framework.extend(self, publicMethods);\n\n};\nexport default PhotoSwipe;\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/photoswipe.js","/*! PhotoSwipe Default UI - 4.1.3 - 2019-01-08\n* http://photoswipe.com\n* Copyright (c) 2019 Dmitry Semenov; */\n/**\n *\n * UI on top of main sliding area (caption, arrows, close button, etc.).\n * Built just using public methods/properties of PhotoSwipe.\n *\n */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.PhotoSwipeUI_Default = factory();\n  }\n})(this, function () {\n\n  'use strict';\n\n\n\n  var PhotoSwipeUI_Default =\n    function(pswp, framework) {\n\n      var ui = this;\n      var _overlayUIUpdated = false,\n        _controlsVisible = true,\n        _fullscrenAPI,\n        _controls,\n        _captionContainer,\n        _fakeCaptionContainer,\n        _indexIndicator,\n        _shareButton,\n        _shareModal,\n        _shareModalHidden = true,\n        _initalCloseOnScrollValue,\n        _isIdle,\n        _listen,\n\n        _loadingIndicator,\n        _loadingIndicatorHidden,\n        _loadingIndicatorTimeout,\n\n        _galleryHasOneSlide,\n\n        _options,\n        _defaultUIOptions = {\n          barsSize: {top:44, bottom:'auto'},\n          closeElClasses: ['item', 'caption', 'zoom-wrap', 'ui', 'top-bar'],\n          timeToIdle: 4000,\n          timeToIdleOutside: 1000,\n          loadingIndicatorDelay: 1000, // 2s\n\n          addCaptionHTMLFn: function(item, captionEl /*, isFake */) {\n            if(!item.title) {\n              captionEl.children[0].innerHTML = '';\n              return false;\n            }\n            captionEl.children[0].innerHTML = item.title;\n            return true;\n          },\n\n          closeEl:true,\n          captionEl: true,\n          fullscreenEl: true,\n          zoomEl: true,\n          shareEl: true,\n          counterEl: true,\n          arrowEl: true,\n          preloaderEl: true,\n\n          tapToClose: false,\n          tapToToggleControls: true,\n\n          clickToCloseNonZoomable: true,\n\n          shareButtons: [\n            {id:'facebook', label:'Share on Facebook', url:'https://www.facebook.com/sharer/sharer.php?u={{url}}'},\n            {id:'twitter', label:'Tweet', url:'https://twitter.com/intent/tweet?text={{text}}&url={{url}}'},\n            {id:'pinterest', label:'Pin it', url:'http://www.pinterest.com/pin/create/button/'+\n              '?url={{url}}&media={{image_url}}&description={{text}}'},\n            {id:'download', label:'Download image', url:'{{raw_image_url}}', download:true}\n          ],\n          getImageURLForShare: function( /* shareButtonData */ ) {\n            return pswp.currItem.src || '';\n          },\n          getPageURLForShare: function( /* shareButtonData */ ) {\n            return window.location.href;\n          },\n          getTextForShare: function( /* shareButtonData */ ) {\n            return pswp.currItem.title || '';\n          },\n\n          indexIndicatorSep: ' / ',\n          fitControlsWidth: 1200\n\n        },\n        _blockControlsTap,\n        _blockControlsTapTimeout;\n\n\n\n      var _onControlsTap = function(e) {\n          if(_blockControlsTap) {\n            return true;\n          }\n\n\n          e = e || window.event;\n\n          if(_options.timeToIdle && _options.mouseUsed && !_isIdle) {\n            // reset idle timer\n            _onIdleMouseMove();\n          }\n\n\n          var target = e.target || e.srcElement,\n            uiElement,\n            clickedClass = target.getAttribute('class') || '',\n            found;\n\n          for(var i = 0; i < _uiElements.length; i++) {\n            uiElement = _uiElements[i];\n            if(uiElement.onTap && clickedClass.indexOf('pswp__' + uiElement.name ) > -1 ) {\n              uiElement.onTap();\n              found = true;\n\n            }\n          }\n\n          if(found) {\n            if(e.stopPropagation) {\n              e.stopPropagation();\n            }\n            _blockControlsTap = true;\n\n            // Some versions of Android don't prevent ghost click event\n            // when preventDefault() was called on touchstart and/or touchend.\n            //\n            // This happens on v4.3, 4.2, 4.1,\n            // older versions strangely work correctly,\n            // but just in case we add delay on all of them)\n            var tapDelay = framework.features.isOldAndroid ? 600 : 30;\n            _blockControlsTapTimeout = setTimeout(function() {\n              _blockControlsTap = false;\n            }, tapDelay);\n          }\n\n        },\n        _fitControlsInViewport = function() {\n          return !pswp.likelyTouchDevice || _options.mouseUsed || screen.width > _options.fitControlsWidth;\n        },\n        _togglePswpClass = function(el, cName, add) {\n          framework[ (add ? 'add' : 'remove') + 'Class' ](el, 'pswp__' + cName);\n        },\n\n        // add class when there is just one item in the gallery\n        // (by default it hides left/right arrows and 1ofX counter)\n        _countNumItems = function() {\n          var hasOneSlide = (_options.getNumItemsFn() === 1);\n\n          if(hasOneSlide !== _galleryHasOneSlide) {\n            _togglePswpClass(_controls, 'ui--one-slide', hasOneSlide);\n            _galleryHasOneSlide = hasOneSlide;\n          }\n        },\n        _toggleShareModalClass = function() {\n          _togglePswpClass(_shareModal, 'share-modal--hidden', _shareModalHidden);\n        },\n        _toggleShareModal = function() {\n\n          _shareModalHidden = !_shareModalHidden;\n\n\n          if(!_shareModalHidden) {\n            _toggleShareModalClass();\n            setTimeout(function() {\n              if(!_shareModalHidden) {\n                framework.addClass(_shareModal, 'pswp__share-modal--fade-in');\n              }\n            }, 30);\n          } else {\n            framework.removeClass(_shareModal, 'pswp__share-modal--fade-in');\n            setTimeout(function() {\n              if(_shareModalHidden) {\n                _toggleShareModalClass();\n              }\n            }, 300);\n          }\n\n          if(!_shareModalHidden) {\n            _updateShareURLs();\n          }\n          return false;\n        },\n\n        _openWindowPopup = function(e) {\n          e = e || window.event;\n          var target = e.target || e.srcElement;\n\n          pswp.shout('shareLinkClick', e, target);\n\n          if(!target.href) {\n            return false;\n          }\n\n          if( target.hasAttribute('download') ) {\n            return true;\n          }\n\n          window.open(target.href, 'pswp_share', 'scrollbars=yes,resizable=yes,toolbar=no,'+\n            'location=yes,width=550,height=420,top=100,left=' +\n            (window.screen ? Math.round(screen.width / 2 - 275) : 100)  );\n\n          if(!_shareModalHidden) {\n            _toggleShareModal();\n          }\n\n          return false;\n        },\n        _updateShareURLs = function() {\n          var shareButtonOut = '',\n            shareButtonData,\n            shareURL,\n            image_url,\n            page_url,\n            share_text;\n\n          for(var i = 0; i < _options.shareButtons.length; i++) {\n            shareButtonData = _options.shareButtons[i];\n\n            image_url = _options.getImageURLForShare(shareButtonData);\n            page_url = _options.getPageURLForShare(shareButtonData);\n            share_text = _options.getTextForShare(shareButtonData);\n\n            shareURL = shareButtonData.url.replace('{{url}}', encodeURIComponent(page_url) )\n              .replace('{{image_url}}', encodeURIComponent(image_url) )\n              .replace('{{raw_image_url}}', image_url )\n              .replace('{{text}}', encodeURIComponent(share_text) );\n\n            shareButtonOut += '<a href=\"' + shareURL + '\" target=\"_blank\" '+\n              'class=\"pswp__share--' + shareButtonData.id + '\"' +\n              (shareButtonData.download ? 'download' : '') + '>' +\n              shareButtonData.label + '</a>';\n\n            if(_options.parseShareButtonOut) {\n              shareButtonOut = _options.parseShareButtonOut(shareButtonData, shareButtonOut);\n            }\n          }\n          _shareModal.children[0].innerHTML = shareButtonOut;\n          _shareModal.children[0].onclick = _openWindowPopup;\n\n        },\n        _hasCloseClass = function(target) {\n          for(var  i = 0; i < _options.closeElClasses.length; i++) {\n            if( framework.hasClass(target, 'pswp__' + _options.closeElClasses[i]) ) {\n              return true;\n            }\n          }\n        },\n        _idleInterval,\n        _idleTimer,\n        _idleIncrement = 0,\n        _onIdleMouseMove = function() {\n          clearTimeout(_idleTimer);\n          _idleIncrement = 0;\n          if(_isIdle) {\n            ui.setIdle(false);\n          }\n        },\n        _onMouseLeaveWindow = function(e) {\n          e = e ? e : window.event;\n          var from = e.relatedTarget || e.toElement;\n          if (!from || from.nodeName === 'HTML') {\n            clearTimeout(_idleTimer);\n            _idleTimer = setTimeout(function() {\n              ui.setIdle(true);\n            }, _options.timeToIdleOutside);\n          }\n        },\n        _setupFullscreenAPI = function() {\n          if(_options.fullscreenEl && !framework.features.isOldAndroid) {\n            if(!_fullscrenAPI) {\n              _fullscrenAPI = ui.getFullscreenAPI();\n            }\n            if(_fullscrenAPI) {\n              framework.bind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\n              ui.updateFullscreen();\n              framework.addClass(pswp.template, 'pswp--supports-fs');\n            } else {\n              framework.removeClass(pswp.template, 'pswp--supports-fs');\n            }\n          }\n        },\n        _setupLoadingIndicator = function() {\n          // Setup loading indicator\n          if(_options.preloaderEl) {\n\n            _toggleLoadingIndicator(true);\n\n            _listen('beforeChange', function() {\n\n              clearTimeout(_loadingIndicatorTimeout);\n\n              // display loading indicator with delay\n              _loadingIndicatorTimeout = setTimeout(function() {\n\n                if(pswp.currItem && pswp.currItem.loading) {\n\n                  if( !pswp.allowProgressiveImg() || (pswp.currItem.img && !pswp.currItem.img.naturalWidth)  ) {\n                    // show preloader if progressive loading is not enabled,\n                    // or image width is not defined yet (because of slow connection)\n                    _toggleLoadingIndicator(false);\n                    // items-controller.js function allowProgressiveImg\n                  }\n\n                } else {\n                  _toggleLoadingIndicator(true); // hide preloader\n                }\n\n              }, _options.loadingIndicatorDelay);\n\n            });\n            _listen('imageLoadComplete', function(index, item) {\n              if(pswp.currItem === item) {\n                _toggleLoadingIndicator(true);\n              }\n            });\n\n          }\n        },\n        _toggleLoadingIndicator = function(hide) {\n          if( _loadingIndicatorHidden !== hide ) {\n            _togglePswpClass(_loadingIndicator, 'preloader--active', !hide);\n            _loadingIndicatorHidden = hide;\n          }\n        },\n        _applyNavBarGaps = function(item) {\n          var gap = item.vGap;\n\n          if( _fitControlsInViewport() ) {\n\n            var bars = _options.barsSize;\n            if(_options.captionEl && bars.bottom === 'auto') {\n              if(!_fakeCaptionContainer) {\n                _fakeCaptionContainer = framework.createEl('pswp__caption pswp__caption--fake');\n                _fakeCaptionContainer.appendChild( framework.createEl('pswp__caption__center') );\n                _controls.insertBefore(_fakeCaptionContainer, _captionContainer);\n                framework.addClass(_controls, 'pswp__ui--fit');\n              }\n              if( _options.addCaptionHTMLFn(item, _fakeCaptionContainer, true) ) {\n\n                var captionSize = _fakeCaptionContainer.clientHeight;\n                gap.bottom = parseInt(captionSize,10) || 44;\n              } else {\n                gap.bottom = bars.top; // if no caption, set size of bottom gap to size of top\n              }\n            } else {\n              gap.bottom = bars.bottom === 'auto' ? 0 : bars.bottom;\n            }\n\n            // height of top bar is static, no need to calculate it\n            gap.top = bars.top;\n          } else {\n            gap.top = gap.bottom = 0;\n          }\n        },\n        _setupIdle = function() {\n          // Hide controls when mouse is used\n          if(_options.timeToIdle) {\n            _listen('mouseUsed', function() {\n\n              framework.bind(document, 'mousemove', _onIdleMouseMove);\n              framework.bind(document, 'mouseout', _onMouseLeaveWindow);\n\n              _idleInterval = setInterval(function() {\n                _idleIncrement++;\n                if(_idleIncrement === 2) {\n                  ui.setIdle(true);\n                }\n              }, _options.timeToIdle / 2);\n            });\n          }\n        },\n        _setupHidingControlsDuringGestures = function() {\n\n          // Hide controls on vertical drag\n          _listen('onVerticalDrag', function(now) {\n            if(_controlsVisible && now < 0.95) {\n              ui.hideControls();\n            } else if(!_controlsVisible && now >= 0.95) {\n              ui.showControls();\n            }\n          });\n\n          // Hide controls when pinching to close\n          var pinchControlsHidden;\n          _listen('onPinchClose' , function(now) {\n            if(_controlsVisible && now < 0.9) {\n              ui.hideControls();\n              pinchControlsHidden = true;\n            } else if(pinchControlsHidden && !_controlsVisible && now > 0.9) {\n              ui.showControls();\n            }\n          });\n\n          _listen('zoomGestureEnded', function() {\n            pinchControlsHidden = false;\n            if(pinchControlsHidden && !_controlsVisible) {\n              ui.showControls();\n            }\n          });\n\n        };\n\n\n\n      var _uiElements = [\n        {\n          name: 'caption',\n          option: 'captionEl',\n          onInit: function(el) {\n            _captionContainer = el;\n          }\n        },\n        {\n          name: 'share-modal',\n          option: 'shareEl',\n          onInit: function(el) {\n            _shareModal = el;\n          },\n          onTap: function() {\n            _toggleShareModal();\n          }\n        },\n        {\n          name: 'button--share',\n          option: 'shareEl',\n          onInit: function(el) {\n            _shareButton = el;\n          },\n          onTap: function() {\n            _toggleShareModal();\n          }\n        },\n        {\n          name: 'button--zoom',\n          option: 'zoomEl',\n          onTap: pswp.toggleDesktopZoom\n        },\n        {\n          name: 'counter',\n          option: 'counterEl',\n          onInit: function(el) {\n            _indexIndicator = el;\n          }\n        },\n        {\n          name: 'button--close',\n          option: 'closeEl',\n          onTap: pswp.close\n        },\n        {\n          name: 'button--arrow--left',\n          option: 'arrowEl',\n          onTap: pswp.prev\n        },\n        {\n          name: 'button--arrow--right',\n          option: 'arrowEl',\n          onTap: pswp.next\n        },\n        {\n          name: 'button--fs',\n          option: 'fullscreenEl',\n          onTap: function() {\n            if(_fullscrenAPI.isFullscreen()) {\n              _fullscrenAPI.exit();\n            } else {\n              _fullscrenAPI.enter();\n            }\n          }\n        },\n        {\n          name: 'preloader',\n          option: 'preloaderEl',\n          onInit: function(el) {\n            _loadingIndicator = el;\n          }\n        }\n\n      ];\n\n      var _setupUIElements = function() {\n        var item,\n          classAttr,\n          uiElement;\n\n        var loopThroughChildElements = function(sChildren) {\n          if(!sChildren) {\n            return;\n          }\n\n          var l = sChildren.length;\n          for(var i = 0; i < l; i++) {\n            item = sChildren[i];\n            classAttr = item.className;\n\n            for(var a = 0; a < _uiElements.length; a++) {\n              uiElement = _uiElements[a];\n\n              if(classAttr.indexOf('pswp__' + uiElement.name) > -1  ) {\n\n                if( _options[uiElement.option] ) { // if element is not disabled from options\n\n                  framework.removeClass(item, 'pswp__element--disabled');\n                  if(uiElement.onInit) {\n                    uiElement.onInit(item);\n                  }\n\n                  //item.style.display = 'block';\n                } else {\n                  framework.addClass(item, 'pswp__element--disabled');\n                  //item.style.display = 'none';\n                }\n              }\n            }\n          }\n        };\n        loopThroughChildElements(_controls.children);\n\n        var topBar =  framework.getChildByClass(_controls, 'pswp__top-bar');\n        if(topBar) {\n          loopThroughChildElements( topBar.children );\n        }\n      };\n\n\n\n\n      ui.init = function() {\n\n        // extend options\n        framework.extend(pswp.options, _defaultUIOptions, true);\n\n        // create local link for fast access\n        _options = pswp.options;\n\n        // find pswp__ui element\n        _controls = framework.getChildByClass(pswp.scrollWrap, 'pswp__ui');\n\n        // create local link\n        _listen = pswp.listen;\n\n\n        _setupHidingControlsDuringGestures();\n\n        // update controls when slides change\n        _listen('beforeChange', ui.update);\n\n        // toggle zoom on double-tap\n        _listen('doubleTap', function(point) {\n          var initialZoomLevel = pswp.currItem.initialZoomLevel;\n          if(pswp.getZoomLevel() !== initialZoomLevel) {\n            pswp.zoomTo(initialZoomLevel, point, 333);\n          } else {\n            pswp.zoomTo(_options.getDoubleTapZoom(false, pswp.currItem), point, 333);\n          }\n        });\n\n        // Allow text selection in caption\n        _listen('preventDragEvent', function(e, isDown, preventObj) {\n          var t = e.target || e.srcElement;\n          if(\n            t &&\n            t.getAttribute('class') && e.type.indexOf('mouse') > -1 &&\n            ( t.getAttribute('class').indexOf('__caption') > 0 || (/(SMALL|STRONG|EM)/i).test(t.tagName) )\n          ) {\n            preventObj.prevent = false;\n          }\n        });\n\n        // bind events for UI\n        _listen('bindEvents', function() {\n          framework.bind(_controls, 'pswpTap click', _onControlsTap);\n          framework.bind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\n\n          if(!pswp.likelyTouchDevice) {\n            framework.bind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\n          }\n        });\n\n        // unbind events for UI\n        _listen('unbindEvents', function() {\n          if(!_shareModalHidden) {\n            _toggleShareModal();\n          }\n\n          if(_idleInterval) {\n            clearInterval(_idleInterval);\n          }\n          framework.unbind(document, 'mouseout', _onMouseLeaveWindow);\n          framework.unbind(document, 'mousemove', _onIdleMouseMove);\n          framework.unbind(_controls, 'pswpTap click', _onControlsTap);\n          framework.unbind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\n          framework.unbind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\n\n          if(_fullscrenAPI) {\n            framework.unbind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\n            if(_fullscrenAPI.isFullscreen()) {\n              _options.hideAnimationDuration = 0;\n              _fullscrenAPI.exit();\n            }\n            _fullscrenAPI = null;\n          }\n        });\n\n\n        // clean up things when gallery is destroyed\n        _listen('destroy', function() {\n          if(_options.captionEl) {\n            if(_fakeCaptionContainer) {\n              _controls.removeChild(_fakeCaptionContainer);\n            }\n            framework.removeClass(_captionContainer, 'pswp__caption--empty');\n          }\n\n          if(_shareModal) {\n            _shareModal.children[0].onclick = null;\n          }\n          framework.removeClass(_controls, 'pswp__ui--over-close');\n          framework.addClass( _controls, 'pswp__ui--hidden');\n          ui.setIdle(false);\n        });\n\n\n        if(!_options.showAnimationDuration) {\n          framework.removeClass( _controls, 'pswp__ui--hidden');\n        }\n        _listen('initialZoomIn', function() {\n          if(_options.showAnimationDuration) {\n            framework.removeClass( _controls, 'pswp__ui--hidden');\n          }\n        });\n        _listen('initialZoomOut', function() {\n          framework.addClass( _controls, 'pswp__ui--hidden');\n        });\n\n        _listen('parseVerticalMargin', _applyNavBarGaps);\n\n        _setupUIElements();\n\n        if(_options.shareEl && _shareButton && _shareModal) {\n          _shareModalHidden = true;\n        }\n\n        _countNumItems();\n\n        _setupIdle();\n\n        _setupFullscreenAPI();\n\n        _setupLoadingIndicator();\n      };\n\n      ui.setIdle = function(isIdle) {\n        _isIdle = isIdle;\n        _togglePswpClass(_controls, 'ui--idle', isIdle);\n      };\n\n      ui.update = function() {\n        // Don't update UI if it's hidden\n        if(_controlsVisible && pswp.currItem) {\n\n          ui.updateIndexIndicator();\n\n          if(_options.captionEl) {\n            _options.addCaptionHTMLFn(pswp.currItem, _captionContainer);\n\n            _togglePswpClass(_captionContainer, 'caption--empty', !pswp.currItem.title);\n          }\n\n          _overlayUIUpdated = true;\n\n        } else {\n          _overlayUIUpdated = false;\n        }\n\n        if(!_shareModalHidden) {\n          _toggleShareModal();\n        }\n\n        _countNumItems();\n      };\n\n      ui.updateFullscreen = function(e) {\n\n        if(e) {\n          // some browsers change window scroll position during the fullscreen\n          // so PhotoSwipe updates it just in case\n          setTimeout(function() {\n            pswp.setScrollOffset( 0, framework.getScrollY() );\n          }, 50);\n        }\n\n        // toogle pswp--fs class on root element\n        framework[ (_fullscrenAPI.isFullscreen() ? 'add' : 'remove') + 'Class' ](pswp.template, 'pswp--fs');\n      };\n\n      ui.updateIndexIndicator = function() {\n        if(_options.counterEl) {\n          _indexIndicator.innerHTML = (pswp.getCurrentIndex()+1) +\n            _options.indexIndicatorSep +\n            _options.getNumItemsFn();\n        }\n      };\n\n      ui.onGlobalTap = function(e) {\n        e = e || window.event;\n        var target = e.target || e.srcElement;\n\n        if(_blockControlsTap) {\n          return;\n        }\n\n        if(e.detail && e.detail.pointerType === 'mouse') {\n\n          // close gallery if clicked outside of the image\n          if(_hasCloseClass(target)) {\n            pswp.close();\n            return;\n          }\n\n          if(framework.hasClass(target, 'pswp__img')) {\n            if(pswp.getZoomLevel() === 1 && pswp.getZoomLevel() <= pswp.currItem.fitRatio) {\n              if(_options.clickToCloseNonZoomable) {\n                pswp.close();\n              }\n            } else {\n              pswp.toggleDesktopZoom(e.detail.releasePoint);\n            }\n          }\n\n        } else {\n\n          // tap anywhere (except buttons) to toggle visibility of controls\n          if(_options.tapToToggleControls) {\n            if(_controlsVisible) {\n              ui.hideControls();\n            } else {\n              ui.showControls();\n            }\n          }\n\n          // tap to close gallery\n          if(_options.tapToClose && (framework.hasClass(target, 'pswp__img') || _hasCloseClass(target)) ) {\n            pswp.close();\n            return;\n          }\n\n        }\n      };\n      ui.onMouseOver = function(e) {\n        e = e || window.event;\n        var target = e.target || e.srcElement;\n\n        // add class when mouse is over an element that should close the gallery\n        _togglePswpClass(_controls, 'ui--over-close', _hasCloseClass(target));\n      };\n\n      ui.hideControls = function() {\n        framework.addClass(_controls,'pswp__ui--hidden');\n        _controlsVisible = false;\n      };\n\n      ui.showControls = function() {\n        _controlsVisible = true;\n        if(!_overlayUIUpdated) {\n          ui.update();\n        }\n        framework.removeClass(_controls,'pswp__ui--hidden');\n      };\n\n      ui.supportsFullscreen = function() {\n        var d = document;\n        return !!(d.exitFullscreen || d.mozCancelFullScreen || d.webkitExitFullscreen || d.msExitFullscreen);\n      };\n\n      ui.getFullscreenAPI = function() {\n        var dE = document.documentElement,\n          api,\n          tF = 'fullscreenchange';\n\n        if (dE.requestFullscreen) {\n          api = {\n            enterK: 'requestFullscreen',\n            exitK: 'exitFullscreen',\n            elementK: 'fullscreenElement',\n            eventK: tF\n          };\n\n        } else if(dE.mozRequestFullScreen ) {\n          api = {\n            enterK: 'mozRequestFullScreen',\n            exitK: 'mozCancelFullScreen',\n            elementK: 'mozFullScreenElement',\n            eventK: 'moz' + tF\n          };\n\n\n\n        } else if(dE.webkitRequestFullscreen) {\n          api = {\n            enterK: 'webkitRequestFullscreen',\n            exitK: 'webkitExitFullscreen',\n            elementK: 'webkitFullscreenElement',\n            eventK: 'webkit' + tF\n          };\n\n        } else if(dE.msRequestFullscreen) {\n          api = {\n            enterK: 'msRequestFullscreen',\n            exitK: 'msExitFullscreen',\n            elementK: 'msFullscreenElement',\n            eventK: 'MSFullscreenChange'\n          };\n        }\n\n        if(api) {\n          api.enter = function() {\n            // disable close-on-scroll in fullscreen\n            _initalCloseOnScrollValue = _options.closeOnScroll;\n            _options.closeOnScroll = false;\n\n            if(this.enterK === 'webkitRequestFullscreen') {\n              pswp.template[this.enterK]( Element.ALLOW_KEYBOARD_INPUT );\n            } else {\n              return pswp.template[this.enterK]();\n            }\n          };\n          api.exit = function() {\n            _options.closeOnScroll = _initalCloseOnScrollValue;\n\n            return document[this.exitK]();\n\n          };\n          api.isFullscreen = function() { return document[this.elementK]; };\n        }\n\n        return api;\n      };\n\n\n\n    };\n  return PhotoSwipeUI_Default;\n\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/photoswipe-ui-default.js"],"sourceRoot":""}